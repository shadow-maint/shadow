2022-11-08  Serge Hallyn <serge@hallyn.com>

	* useradd.8: fix default group ID (Tim Biermann)
	* Revert drop of subid_init() (Serge Hallyn)
	* Georgian translation (NorwayFun)
	* useradd: Avoid taking unneeded space: do not reset non-existent data
	  in lastlog (David Kalnischkies)
	* relax username restrictions (Alexander Kanavin)
	* selinux: check MLS enabled before setting serange (genBTC)
	* copy_tree: use fchmodat instead of chmod (Samanta Navarro)
	* copy_tree: don't block on FIFOs (Samanta Navarro)
	* add shell linter (Jan Macku)
	* copy_tree: carefully treat permissions (Samanta Navarro)
	* lib/commonio: make lock failures more detailed (Luca BRUNO)
	* lib: use strzero and memzero where applicable (Christian Göttsche)
	* Update Dutch translation (Frans Spiesschaert)
	* Don't test for NULL before calling free (Alex Colomar)
	* Use libc MAX() and MIN() (Alejandro Colomar)
	* chage: Fix regression in print_date (Xiami)
	* usermod: report error if homedir does not exist (Iker Pedrosa)
	* libmisc: minimum id check for system accounts (Iker Pedrosa)
	* fix usermod -rG x y wrongly adding a group (xyz)
	* man: add missing space in useradd.8.xml (Iker Pedrosa)
	* lastlog: check for localtime() return value (Iker Pedrosa)
	* Raise limit for passwd and shadow entry length (Iker Pedrosa)
	* Remove adduser-old.c (Alejandro Colomar)
	* useradd: Fix buffer overflow when using a prefix (David Michael)
	* Don't warn when failed to open /etc/nsswitch.conf (Serge Hallyn)

2022-08-15  Serge Hallyn <serge@hallyn.com>

	* Address CVE-2013-4235 (TOCTTOU when copying directories)
	  (Christian Göttsche)

2022-08-15  Serge Hallyn <serge@hallyn.com>

	* Fix uk manpages

2022-08-08  Serge Hallyn <serge@hallyn.com>

	* Add absolute path hint to --root (Celeste Liu)
	* Various cleanups (Christian Göttsche)
	* Fix Ubuntu release used in CI tests (Jeremy Whiting)
	* add -F options to useradd (and tests) (Masatake YAMATO)
	* useradd manpage updates (Masatake YAMATO and Alexander Zhang))
	* Check for ownerid (not just username) in subid ranges (Iker Pedrosa)

2022-07-04  Serge Hallyn <serge@hallyn.com>

	* Declare file local functions static (Christian Göttsche)
	* Use strict prototypes (Christian Göttsche)
	* Do not drop const qualifier for Basename (Christian Göttsche)
	* Constify various pointers (Christian Göttsche)
	* Don't return uninitialized memory (Christian Göttsche)
	* Don't let compiler optimize away memory cleaning (Christian Göttsche)
	* Remove many obsolete compatibility checks  and defines (Alejandro Colomar)
	* Modify ID range check in useradd (Iker Pedrosa)
	* Use "extern "C"" to make libsubid easier to use from C++ (Alois Wohlschlager)
	* French translation updates (bubu)
	* Fix s/with-pam/with-libpam/ (serge)
	* Spanish translation updates (Fernando)
	* French translation fixes (Balint Reczey)
	* Default max group name length to 32 (Jami Kettunen)
	* Fix PAM service files without-selinux (Ali Riza KESKIN)
	* Improve manpages (Markus Hiereth)
	  - groupadd, useradd, usermod
	  - groups and id
	  - pwck
	* Add fedora to CI builds (Iker Pedrosa)
	* Fix condition under which pw_dir check happens (Ed Neville)
	* logoutd: switch to strncat (Steve Grubb)
	* AUTHORS: improve markdown output (Iker Pedrosa)
	* Handle ERANGE errors correctly (Niko)
	* Check for fopen NULL return (juyin)
	* Split get_salt() into its own fn juyin)
	* Get salt before chroot to ensure /dev/urandom. (juyin)
	* Chpasswd code cleanup (juyin)
	* Work around git safe.directory enforcement (serge)
	* Alphabetize order in usermod help (Matheus Marques)
	* Erase password copy on error branches (Christian Göttsche)
	* Suggest using --badname if needed (Iker Pedrosa)
	* Update translation files (Iker Pedrosa)
	* Correct badnames option to badname (Iker Pedrosa)
	* configure: replace obsolete autoconf macros (Christian Göttsche)
	* tests: replace egrep with grep -E (Sam James)
	* Update Ukrainian translations (Yuri Chornoivan)
	* Cleanups (Iker Pedrosa)
	  - Remove redeclared variable
	  - Remove commented out code and FIXMEs
	  - Add header guards
	  - Initialize local variables
	* CI updates (Iker Pedrosa)
	  - Create github workflow to install dependencies
	  - Enable CodeQL
	  - Update actions version
	* libmisc: use /dev/urandom as fallback if other methods fail (Xi Ruoyao)


2022-01-02  Serge Hallyn <serge@hallyn.com>

	* build: include lib/shadowlog_internal.h in dist tarballs (Sam James)

2022-01-02  Serge Hallyn <serge@hallyn.com>

	* Handle possible TOCTTOU issues in usermod/userdel (edneville)
	  * (CVE-2013-4235)
	  * Use O_NOFOLLOW when copying file
	  * Kill all user tasks in userdel
	* Fix useradd -D segfault (Xi Ruoyao)
	* Clean up obsolete libc feature-check ifdefs (Alejandro Colomar)
	* Fix -fno-common build breaks due to duplicate Prog declarations
	  (Adam Sampson)
	* Have single date_to_str definition (Alejandro Colomar)
	* Fix libsubid SONAME version (Sam James)

2021-12-19  Serge Hallyn <serge@hallyn.com>

	Note: From this release forward, su from this package should be
	considered deprecated.  Please replace any users of it with su from
	util-linux.  Please open an issue if there is a problem with that.
	We intend to remove it in an upcoming release.

	* libsubid fixes (Xi Ruoyao, Serge Hallyn, Iker Pedrosa, Mike Gilbert,
	  GalaxyMaster, and Luís Ferreira)
	* Rename the test program list_subid_ranges to getsubids, write
	  a manpage, so distros can ship it. (Iker Pedrosa)
	* Add libeconf dep for new*idmap (Iker Pedrosa)
	* Allow all group types with usermod -G (Iker Pedrosa)
	* Avoid useradd generating empty subid range (Iker Pedrosa)
	* Handle NULL pw_passwd (Jaroslav Jindrak)
	* Fix default value SHA_get_salt_rounds (Mike Gilbert)
	* Use https where possible in README (Paul Menzel)
	* Update content and format of README (Iker Pedrosa)
	* Translation updates (Balint Reczey, Frans Spiesschaert)
	* Switch from xml2po to itstool in 'make dist' (Serge Hallyn)
	* Fix double frees (Michael Vetter)
	* Add LOG_INIT configurable to useradd (Andy Zaugg)
	* Add CREATE_MAIL_SPOOL documentation (Andy Zaugg)
	* Create a security.md
	* Fix su never being SIGKILLd when trapping TERM (Ruihan li)
	* Fix wrong SELinux labels in several possible cases (Iker Pedrosa)
	* Fix missing chmod in chadowtb_move (GalaxyMaster)
	* Handle malformed hushlogins entries (Tobias Stoeckmann)
	* Fix groupdel segv when passwd does not exist (François Rigault)
	* Fix covscan-found newgrp segfault (Iker Pedrosa)
	* Remove trailing slash on hoedir (Ed Neville)
	* Fix passwd -l message - it does not change expirey (Ed Neville)
	* Fix SIGCHLD handling bugs in su and vipw (Tobias Stoeckmann)
	* Remove special case for "" in usermod (Alejandro Colomar)
	* Implement usermod -rG to remove a specific group
	  (Andy Zaugg)
	* call pam_end() after fork in child path for su and login
	  (Björn Fischer)
	* useradd: In absence of /etc/passwd, assume 0 == root
	  (Ludwig Nussel)
	* lib: check NULL before freeing data (Iker Pedrosa)
	* Fix pwck segfault (Iker Pedrosa)

2021-07-22  Serge Hallyn <serge@hallyn.com>

	* Updated translations (Björn Esser, Juergen Hoetzel)
	* Major salt updates (Björn Esser)
	* Various coverity and cleanup fixes (Iker Pedrosa)
	* Consistently use 0 to disable PASS_MIN_DAYS  in man (tzccinct)
	* Implement NSS support for subids and a libsubid (Serge Hallyn)
	* setfcap: retain setfcap when mapping uid 0 (Christian Brauner)
	* login.defs: include HMAC_CRYPTO_ALGO key (Iker Pedrosa)
	* selinux fixes (Christian Göttsche)
	* Fix path prefix path handling (Lucas Servén Marín)
	* Manpage updates (tzccinct, Sevan Janiyan, Iker Pedrosa, Geert Ijewski,
		谭九鼎, Jamin W. Collins, towerpark, andydna, Frans Spiesschaert)
	* Treat an empty passwd field as invalid (Haelwenn Monnier)
	* newxidmap: allow running under alternative gid (Martijn de Gouw)
	* usermod: check that  shell is executable (Geert Ijewski)
	* Add yescript support (Rodolphe Bréard)
	* useradd memleak fixes (whzhe)
	* useradd: use built-in settings by default (Ludwig Nussel)
	* getdefs: add foreign (non-shadow-utils) items (Karel Zak)
	* buffer overflow fixes (Tobias Stoeckmann)
	* Adding run-parts style for pre and post useradd/del (ed@s5h.net)

2020-01-23  Serge Hallyn <serge@hallyn.com>

	* selinux: inclue stdio (Michael Vetter)
	* man: don't suggest making groupmems user-writeable (Michael Weiser)
	* Makefile: bail out on error in for loops (Wolfgang Bumiller)
	* Adding logging of SSH_ORIGINAL_COMMAND to nologin. (ed@s5h.net)
	* add new HOME_MODE login.defs option (Duncan Overbruck)
	* Add tty logging to useradd (ed@s5h.net)
	* Useradd: make non-executable shell check only a warning (Tomas Mraz)
	* Update Dutch translation (Frans-Spiesschaert)
	* user_busy: Do not mistake a regular user process for a namespaced one (Tomas Mraz)
	* Revert "Honor --sbindir and --bindir for binary installation" Patrick McLean)

2019-12-20  Dave Reisner <dreisner@archlinux.org>

	* Do not auto-enable acct_tools_setuid just because
	  pam is enabled.  NOTE - any distros which are relying
	  on this behavior will need to switch to configure
	  --enable-account-tools-setuid

2019-12-01  Serge Hallyn <serge@hallyn.com>

	* Release 4.8
	* Initial optional bcrypt support.
	* Make build/install of 'su' optional.
	* Fix for vipw not resuming correctly when suspended
	* Sync password field descriptions in manpages
	* Check for valid shell argument in useradd
	* Allow translation of new strings through POTFILES.in
	* Migrate to itstool for translations
	* Migrate to new SELinux api
	* Support --enable-vendordir
	* pwck: Only check homedir if set and not a system user
	* Support nonstandard usernames
	* sget{pw,gr}ent: check for data at EOL
	* Add YYY-MM-DD support in chage
	* Fix failing chmod calls for suidubins
	* Fix --sbindir and --bindir for binary installations
	* Fix LASTLOG_UID_MAX in login.defs
	* Fix configure error with dash

2019-06-13  Serge Hallyn <serge@hallyn.com>

	* Release 4.7
	* Spawn: don't loop forever on ECHILD
	* Do not fail locking if there is a stale lockfile Tomas Mraz)
	* Use lckpwdf if prefix not set (Tomas Mraz)
	* Build: check correct DocBook version (Jan Tojnar)
	* Usermod: Print 'no changes' to stdout, not stderr (Serge Hallyn)
	* Add support for btrfs subvolumes for home (Adam Majer)
	* Fix chpasswd long line handling (Nathan Ruiz)
	* Use secure_getenv for gettime (Chris Lamb)
	* Make sp_lstchg reproducible (Chris Lamb)
	* Do not crash commonio_close if db file is not open (Tomas Mraz)
	* Don't flush nscd and sssd cache in read-only mode (Charlie Vuillemez)
	* French manpage update (Alban VIDAL)
	* Fix manpage defaults for SUB_UID/GID_COUNT (Tomas Mraz)
	* Sync po files from shadow.pot (Alban VIDAL)
	* Usermod: guard against unsafe chown of homedir contents (Tomas Mraz)
	* Add LASTLOG_UID_MAX to login.defs (Tomas Mraz)
	* new[ug]idmap file capabilities support (Giuseppe Scrivano and Christian Brauner)
	* Fix segfault in useradd (Tomas Mraz)
	* Coverity issues (Tomas Mraz)
	* Flush sssd caches (Jakub Hrozek)
	* Log UID in nologin (Vladimir Ivanov)
	* run pam_getenvlist after setup_env in su.c (Michael Vogt)
	* Support systems with only utmpx (A. Wilcox)
	* Fix unguarded ENABLE_SUBIDS code (Jan Chren (rindeal))
	* Update po/zh_CN translation (Lion Yang)
	* Create parent dirs for useradd -m (Michael Vetter)
	* Prevent usermod segv
	* Fix usermod crash (fariouche)

2018-04-29  Serge Hallyn <serge@hallyn.com>

	* Release 4.6
	* Newgrp: avoid unnecessary lookups
	* Make language less binary
	* Add error when turning off man switch
	* Spelling fixes
	* Make userdel work with -R
	* newgidmap: enforce setgroups=deny if self-mapping a group
	* Norwegian bokmål translation
	* pwck: prevent crash by not passing O_CREAT
	* WITH_TCB fixes from Mandriva
	* Fix pwconv and grpconv entry skips
	* Fix -- slurping in su
	* add --prefix option

2017-07-16  Serge Hallyn <serge@hallyn.com>

	* Import new Dutch translations.

2017-07-10  Serge Hallyn <serge@hallyn.com>

	* Expand error codes for groupmod.

2017-05-17  Serge Hallyn <serge@hallyn.com>

	* Release 4.5

2017-05-17  Serge Hallyn <serge@hallyn.com>

	* Patch from Tobias Stoeckmann fixing regression in previous CVE fix
	  preventing SIGTERM to su from being propagated to the job.
	* Patch from Chris Lamb making sp_lstchg shadow field reproducible.
	* Merge Russian translation updates from Yuri Kozlov
	* Fix missing close of subuid file on error

2017-02-23  Serge Hallyn <serge@hallyn.com>

	* Merge patch by Tobias Stoeckmann <tobias@stoeckmann.org> to fix
	  the equivalent of util-linux CVE-2017-2616.

2017-02-08  Serge Hallyn <serge@hallyn.com>

	* Update Kazakh translations
	* Consult configuration before calculating subuids
	* Remove misplaced semicolon

2017-01-29  Serge Hallyn <serge@hallyn.com>

	* Patch from Fedora to improve performance with SSSD, Winbind,
	  or nss_ldap. (Tomas Mraz)
	* Make sure knowndef_table is NULL-terminated.  (Bernhard Rosenkränzer)

2016-12-21  Serge Hallyn <serge@hallyn.com>

	* Drop leading underscore from _COMMONIO_H and _SHADOWIO_H
	* Fix readability in usermod error messages.
	* Reset user in tallylog
	* Add audit support to su

2016-12-02  Serge Hallyn <serge@hallyn.com>

	* changes since 4.4
	  - Use sizeof rather than hardcoding snprintf args
	  - Fix useradd improper default loading
	  - Update Vietnamese translations
	  - Update Polish translations
	  - Remove non-POSIX chmod option in Makefile
	  - Fix suidubins assignments
	  - Fix --add-subuids etc spelling in manpages
	  - Audit homedir ownership change.
	  - Print error on selinux file context update failure
	  - Keep original file perms when creating a backup

	* (henceforth we'll update Changelog with each commit
	  and proper credit)

2016-12-02  Serge Hallyn <serge@hallyn.com>

	* Changes since 4.2.1:
	  - Documentation, error report and translations updates
	  - Replace path_max with 32
	  - User namespace support fixes/updates including:
	    - Correct sanity checks in newXidmap
	    - Fix building without subuid support
	    - Add /etc/subuid support for UID matching
	    - Support subuid for nonlocal users
	    - Default to 65536 subuid allocations
	    - Respect -r
	    - Check for range overflows
	  - Add tests from svn tree
	  - Use AC_CHECK_SIZEOF for uid_t size checks
	  - Accomodate missing /etc and login.defs
	  - Support FORCE_SHADOW
	  - Be more robust in hostile environment
	  - Allow removing a primary group
	  - Clear passwords on __pw_dup errors
	  - Memory leak fix in commonio_update and get_map_ranges
	  - Fix resource leak in syslog_sg
	  - Fix user busy error at userdel
	  - Support set/clear lastlog record via lastlog command
	  - Add --no-create-home as longopt for -M
	  - Fix signal races
	  - Reduce syslog priority of common usage events

2013-08-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: After waitpid(), use errno only if waitpid returned
	-1. Debian#688260
	* src/vipw.c: Likewise for system().

2013-08-23  victory  <victory.deb@gmail.com>

	* po/ja.po: Updated to 558t

2013-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/shadow-man-pages.pot: Regenerated.
	* man/po/*.po: Updated PO files.

2013-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newgrp.1.xml: Fix encoding.
	* man/sg.1.xml: Likewise.

2013-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/da.po: Unfuzzy according to previous change.
	* man/po/de.po: Likewise.
	* man/po/fr.po: Likewise.
	* man/po/it.po: Likewise.
	* man/po/pl.po: Likewise.
	* man/po/ru.po: Likewise.
	* man/po/sv.po: Likewise.
	* man/po/zh_CN.po: Likewise.

2013-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chage.1.xml: Add a non breaking space between options and
	their parameter because xml2po removes those spaces. Alioth#314401
	* man/chfn.1.xml: Likewise.
	* man/chgpasswd.8.xml: Likewise.
	* man/chpasswd.8.xml: Likewise.
	* man/chsh.1.xml: Likewise.
	* man/faillog.8.xml: Likewise.
	* man/gpasswd.1.xml: Likewise.
	* man/groupadd.8.xml: Likewise.
	* man/groupdel.8.xml: Likewise.
	* man/groupmems.8.xml: Likewise.
	* man/groupmod.8.xml: Likewise.
	* man/grpck.8.xml: Likewise.
	* man/lastlog.8.xml: Likewise.
	* man/newusers.8.xml: Likewise.
	* man/passwd.1.xml: Likewise.
	* man/pwck.8.xml: Likewise.
	* man/pwconv.8.xml: Likewise.
	* man/su.1.xml: Likewise.
	* man/useradd.8.xml: Likewise.
	* man/userdel.8.xml: Likewise.
	* man/usermod.8.xml: Likewise.
	* man/vipw.8.xml: Likewise.

2013-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/shadow-man-pages.pot: Regenerated.
	* man/po/*.po: Updated PO files.

2013-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/de.po: Fix encoding.

2013-08-19  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c (subordinate_next): Fix return value.

2013-08-16  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/idmapping.c: Include <stdio.h> needed for fprintf() and
	stderr.

2013-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/SUB_GID_COUNT.xml: Document newusers behavior
	when the user already have subordinate group IDs.
	* man/login.defs.d/SUB_UID_COUNT.xml: Likewise.
	* man/login.defs.d/SUB_GID_COUNT.xml: Fix typo (MAX<->MIN).
	* man/login.defs.d/SUB_UID_COUNT.xml: Likewise.

2013-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Check early if /etc/subuid (/etc/subgid) exists
	when option -v/-V (-w/-W) are provided.

2013-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Fix parse of ranges. The hyphen might be followed
	by a negative integer.

2013-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c (find_free_range): max is allowed for new
	ranges.

2013-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_sub_gids.c: Remove dead code.
	find_new_sub_gids() is always called with *range_count set to 0.
	It's more difficult to keep the subordinate GIDs and UIDs
	synchronized, than for the user's UID/GId because the count of
	subordinate IDs may differ.
	* libmisc/find_new_sub_uids.c: Likewise.
	* lib/subordinateio.h, lib/subordinateio.c: Remove APIs that are
	no more needed: is_sub_uid_range_free(), is_sub_gid_range_free(),
	is_range_free().

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Check if sizeof uid_t and gid_t is larger than 32
	bit to support subordinate IDs.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c: Avoid dead branches.
	* lib/subordinateio.c: Add schematics with ranges to help reviews.
	* lib/subordinateio.c: Avoid implicit conversion of pointers and
	integers to booleans.
	* lib/subordinateio.c: Added brackets.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Fail in case arguments are provided after options.
	Debian#677812

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c: Fix count for ranges truncated in
	remove_range().

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Terminate the child (if needed) before closing the PAM
	session. This is probably more correct, and avoid reporting
	termination from signals possibly sent by PAM modules (e.g. former
	versions of pam_systemd). Debian#670132

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: When a SIGTSTP is caught, reset caught to 0. There is
	no need to kill the child in such case after su is resumed. This
	remove the "Session terminated, terminating shell...
	...terminated." messages in such case.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newgidmap.1.xml: Document the checks performed before
	setting the mapping in /proc.
	* man/newuidmap.1.xml: Likewise.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/idmapping.h: Document what the upper and lower fields
	are in struct map_range.
	* man/newgidmap.1.xml: Document when the gid, gidlower and count
	argument are.
	* man/newuidmap.1.xml: Likewise for uid, uidlower and count.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c (shadow_random): Use long instead of size_t.
	Compatibility with size_t is easier to check since it's used for
	smaller numbers (salt size).

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupmem.c: Add splint annotations. The added memset makes
	splint think data was allocated.
	* lib/pwmem.c: Likewise.
	* lib/sgroupio.c: Likewise.
	* lib/shadowmem.c: Likewise.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/SUB_GID_COUNT.xml: Document that the behavior
	of useradd and newusers depends on the existence of /etc/subgid.
	* man/login.defs.d/SUB_UID_COUNT.xml: Likewise for /etc/subuid.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Change message in case of find_new_sub_uids /
	find_new_sub_gids failure. This complements the messages already
	provided by these APIs.

2013-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c: Fix handling of boundaries.
	* libmisc/find_new_sub_uids.c: Likewise.
	* libmisc/find_new_sub_gids.c: Likewise.

2013-08-12  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c: Fix removal of ranges. The database needs
	to be marked as changed or commonio_close will discard any change.

2013-08-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml: Include documentation of SUB_GID_MIN,
	SUB_GID_MAX, SUB_GID_COUNT, SUB_UID_MIN, SUB_UID_MAX,
	SUB_UID_COUNT.
	* man/useradd.8.xml: Likewise.
	* man/usermod.8.xml: Likewise.
	* man/newusers.8.xml: Document usage of /etc/subgid /etc/subuid.
	* man/useradd.8.xml: Likewise.
	* man/userdel.8.xml: Likewise.
	* man/usermod.8.xml: Likewise.
	* man/newusers.8.xml: Add references to subgid(5) and subuid(5).
	* man/useradd.8.xml: Likewise.
	* man/userdel.8.xml: Likewise.
	* man/subgid.5.xml: Sort references alphabetically.
	* man/subuid.5.xml: Likewise.
	* man/subgid.5.xml: Add references to newusers(8), useradd(8),
	userdel(8), usermod(8), user_namespaces(7).
	* man/subuid.5.xml: Likewise.

2013-08-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newgidmap.1.xml: Sort references alphabetically.
	* man/newuidmap.1.xml: Likewise.

2013-08-11  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Add configure options --enable-subordinate-ids /
	--disable-subordinate-ids. Enabled by default.
	* lib/prototypes.h: Include <config.h> before using its macros.
	* lib/commonio.h, lib/commonio.c: Define commonio_append only when
	ENABLE_SUBIDS is defined.
	* lib/prototypes.h, libmisc/find_new_sub_gids.c,
	libmisc/find_new_sub_uids.c: Likewise.
	* lib/subordinateio.h, lib/subordinateio.c: Likewise.
	* libmisc/user_busy.c: Only check if subordinate IDs are in use if
	ENABLE_SUBIDS is defined.
	* src/Makefile.am: Create newgidmap and newuidmap only if
	ENABLE_SUBIDS is defined.
	* src/newusers.c: Check for ENABLE_SUBIDS to enable support for
	subordinate IDs.
	* src/useradd.c: Likewise.
	* src/userdel.c: Likewise.
	* src/usermod.c: Likewise.
	* man/Makefile.am: Install man1/newgidmap.1, man1/newuidmap.1,
	man5/subgid.5, and man5/subuid.5 only if ENABLE_SUBIDS is defined.
	* man/fr/Makefile.am: Install man1/newgidmap.1, man1/newuidmap.1,
	man5/subgid.5, and man5/subuid.5 (not translated yet).
	* man/generate_mans.mak: Add xsltproc conditionals
	subids/no_subids.
	* man/login.defs.d/SUB_GID_COUNT.xml: Add dependency on subids
	condition.
	* man/login.defs.d/SUB_UID_COUNT.xml: Likewise.
	* man/usermod.8.xml: Document options for subordinate IDs and
	reference subgid(5) / subuid(5) depending on the subids condition.

2013-08-09  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Remove unused variable.

2013-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Add include files needed for getaddrinfo().
	See Alioth#314271

2013-08-07  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Check at configure time whether libc supports
	ruserok (support dropped by newer C libraries).

2013-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Fix typos and wording.
	* man/usermod.8.xml: Add references to subgid(5) and subuid(5).

2013-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_sub_gids.c: Fix wording: secondary ->
	subordinate.
	* libmisc/find_new_sub_uids.c: Likewise.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_sub_gids.c: Remove duplicate check (duplicate
	at least in its intent).
	* libmisc/find_new_sub_uids.c: Likewise.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Fix typos.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/subgid.5.xml: Reorder words.
	* man/subuid.5.xml: Likewise.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/subgid.5.xml: Fix typos.
	* man/subuid.5.xml: Likewise.
	* man/subgid.5.xml: Fix copy-paste errors from subuid.5.xml.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newgidmap.1.xml: Remove copy-pasted NOTE.
	* man/newuidmap.1.xml: Likewise.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/subordinateio.c: Remove unused variables.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/SUB_GID_COUNT.xml: Fix typo.
	* man/login.defs.d/SUB_UID_COUNT.xml: Likewise.
	* man/login.defs.d/SUB_UID_COUNT.xml: Fix copy-paste issue from
	SUB_GID_COUNT.
	* man/newgidmap.1.xml: Fix Typo.
	* src/useradd.c: Fix typos.
	* lib/subordinateio.c: Fix typos.

2013-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	Fix Debian bug #675824
	* lib/groupmem.c (__gr_dup): Support libc which define other
	fields in struct group.
	* lib/pwmem.c: Likewise for struct passwd.
	* lib/shadowmem.c: Likewise for struct spwd.
	* lib/sgroupio.c: Apply same logic, even if this structure is
	defined internally.

2013-08-05  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Revert change from 2013-07-29. The length of the
	concatenated 2 lines was correct.

2013-08-05  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: random() max value is 2^31-1 (same as RAND_MAX
	on GNU). As it is not clear whether on some systems the max value
	can exceed this number and whether some systems have max values
	which would be lower, we take this into account when defining the
	salt size and number of rounds for SHA encrypted passwords. Higher
	values are favored.

2013-08-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/su.1.xml: With getopt, '-' does not need to be the last
	option, but it is recommended for portability.
	Closes https://bugs.launchpad.net/bugs/1100775

2013-08-04  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Add NEWS entries.

2013-08-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/da.po: Fix translation (--home became --home-dir).
	* man/po/de.po: Likewise.
	* man/po/fr.po: Likewise.
	* man/po/pl.po: Likewise.
	* man/po/ru.po: Likewise.
	* man/po/sv.po: Likewise.

2013-08-04  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c (merge_group_entries): Do not allocate more than
	necessary (sizeof char* instead of char).
	Thanks for Tomáš Mráz (alioth#313962)
	* lib/groupio.c (merge_group_entries): Document that new_members
	is correctly NULL terminated. (alioth:#313940)

2013-08-03  Nicolas François  <nicolas.francois@centraliens.net>

	* Changelog: Update documentation of 2013-07-28  mancha entry.
	* lib/prototypes.h, lib/encrypt.c: Update splint marker,
	pw_encrypt can return NULL.
	* lib/encrypt.c: Fix outdated statement on GNU crypt.
	* src/chgpasswd.c: Improve diagnostic to user when pw_encrypt
	fails and use fail_exit() instead of exit().
	* src/chpasswd.c: Likewise.
	* src/newusers.c: Likewise.
	* src/passwd.c: Likewise when new password is encrypted.
	* src/newgrp.c: Improve diagnostic to user and syslog when
	pw_encrypt fails.  Do not apply 1s penalty as this is not an
	invalid password issue.
	* src/passwd.c: Likewise when password is checked.

2013-08-02  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setupenv.c: xstrdup the static char* temp_pw_dir /
	temp_pw_shell. That way we can continue to use pw_free() without
	segving. Thanks to Serge Hallyn for the patch.
	* libmisc/setupenv.c: Free pw_dir and pw_shell before reallocating
	them.

2013-08-01  Yuri Kozlov  <yuray@komyakino.ru>

        * po/ru.po: completed translation
	  Closes: Debian#718356

2013-07-29  Michael Scherer <misc-guest@alioth.debian.org>

        * libmisc/root_flag.c: use chdir() before calling chroot() to
	  avoid potential security issue (see
	  http://www.bpfh.net/simes/computing/chroot-break.html)
	  Closes: alioth#313962

2013-07-29  Christian Perrier  <christian@perrier.eu.org>

        * man/useradd.xml: use "--home-dir" instead of "--home"
	  Fix translations too.
	  Thanks to Ville Skyttä
	  Closes: alioth#313880

2013-07-29  Ville Skyttä  <scop-guest@alioth.debian.org>

        * man/ja/man8/groupmod.8: Syntax fix
	  Closes: alioth#313785

2013-07-29  Brad Hubbard  <badone-guest@alioth.debian.org>

	* lib/groupio.c: add newline char when two lines
	are concatenated
	Closes: alioth#313942
	* lib/groupio.c: fix uninitialised memory in
	merge_group_entries causes segfault in useradd by changing
	a call to malloc to a call to calloc
	Closes: alioth:#313940

2013-07-28  Guido Trentalancia  <guido@trentalancia.com>

        * etc/login.defs: fix typographic errors and use a better format
	  Closes: Debian#685415

2013-07-28  Simon Brandmair  <sbrandmair@gmx.net>

        * man/po/de.po: translation completed : 1203 translated messages
	  Closes: Debian#679152

2013-07-28  mancha  <mancha1@hush.com>

	* lib/encrypt.c (pw_encrypt): crypt() in glibc/eglibc 2.17 now
	fails if passed a salt that violates specs. On Linux, crypt() also
	fails with DES/MD5 salts in FIPS140 mode. Rather than exit() on
	NULL returns we send them back to the caller for appropriate
	handling (instead of exiting).  Closes: alioth#314234
	* lib/pwauth.c: Handle NULL return from pw_crypt(), return non
	zero (as in case of failure).
	* libmisc/valid.c: Likewise.
	* src/chgpasswd.c: Handle NULL return from pw_crypt(), report
	crypt error to stderr and exit.
	* src/chpasswd.c: Likewise.
	* src/gpasswd.c: Likewise.
	* src/newusers.c: Likewise.
	* src/passwd.c: Likewise when new password is encrypted.
	* src/newgrp.c: Handle NULL return from pw_crypt(), report crypt
	error to stderr and syslog and return to report unchanged
	password.
	* src/passwd.c: Likewise when password is checked.

2013-07-28  Christian Perrier  <christian@perrier.eu.org>

	* configure.in: Prepare for next point release 4.2.
	* if using the static char* for pw_dir, strdup it so
	  pw_free() can be used. (Closes: Debian#691459, alioth#313957)
	* Kill the child process group, rather than just the
	  immediate child; this is needed now that su no
	  longer starts a controlling terminal when not running an
	  interactive shell (closes: Debian#713979)
	  Thansk to Colin Watson for the patch.

2012-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Set release date.
	* man/po/shadow-man-pages.pot: Regenerated.
	* man/po/*.po: Updated PO files.

2012-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/*.xml: Add author based on copyright statement.
	* man/<ll>/*.[1358], man/<ll>/man[1358]/*.[1358],
	man/<ll>/Makefile.am: Sort manpages per section as the generated
	manpages.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/Makefile.am, man/generate_mans.mak: Update clean targets,
	due to the generation in separate sub folders.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/su.1.xml: Document author to avoid warnings during
	generation. This needs to be rolled out to other manpages.
	* man/generate_mans.mak: Do not add a AUTHOR section in the man
	pages.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: non PAM enabled versions: do not fail if su is called
	without a controlling terminal. Ignore ENXIO errors when opening
	/dev/tty.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Cleanup, return code 13 no more used.
	* man/useradd.8.xml: Document return code 14, and remove return
	code 13.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, man/generate_mans.mak: Generate manpages in man1, man3,
	man5, man8 subdirectories. This fix the generation of .so links
	which did not point to a path relative to the top-level manual
	hierarchy.
	* man/generate_mans.mak: Update man paths accordingly.
	* man/Makefile.am: Likewise.
	* man/da/Makefile.am: Likewise.
	* man/de/Makefile.am: Likewise.
	* man/fr/Makefile.am: Likewise.
	* man/it/Makefile.am: Likewise.
	* man/pl/Makefile.am: Likewise.
	* man/ru/Makefile.am: Likewise.
	* man/sv/Makefile.am: Likewise.
	* man/zh_CN/Makefile.am: Likewise.

2012-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Prepare for next point release 4.1.5.1.

2012-05-19  Nitin A Kamble  <nitin.a.kamble@intel.com>

	* configure.in: Remove deprecated AM_C_PROTOTYPES (no more
	supported in automake 1.12).

2012-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Keep the default file as much as possible to
	avoid issue in case of crash. Use link instead of rename.

2012-05-18  Peter Vrabec  <pvrabec@redhat.com>

	* lib/commonio.c: Fix labeling of /etc/{passwd,shadow,group,gshadow}.
	It will basically label them with same context as
	/etc/{passwd+,shadow+,group+,gshadow+}

2012-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Do not check spw_close() return value (file is
	opened readonly).
	* src/grpunconv.c: Do not check sgr_close() return value (file is
	opened readonly).

2012-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/userdel.c: Fix segfault when userdel removes the
	user's group.

2012-05-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/login.c: Log in utmp / utmpx / wtmp also when PAM is
	enabled. This is not done by pam_lastlog. This was broken on
	2011-07-23.
	* NEWS, libmisc/utmp.c: Do not log in wtmp when PAM is enabled.
	This is done by pam_lastlog.

2012-05-17  Christian Perrier  <bubulle@Êebian.org>

	* man/po/fr.po: French translation of manpages completed

2012-05-17  Simon Brandmair  <sbrandmair@gmx.net>

	* man/po/de.po: German translation of manpages completed

2012-02-12  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: New placeholder for the next release (4.1.5.1 expected)

2012-04-15  Robert Luberda  <robert@debian.org>

	* man/po/pl.po: Complete translation of logoutd(8) in Polish.

2012-02-13  Mike Frysinger  <vapier@gentoo.org>

	* src/passwd.c: (non PAM flavour) Report permission denied when
	access to /etc/shadow fails with EACCES.

2012-02-13  Mike Frysinger  <vapier@gentoo.org>

	* lib/nscd.c: Add missing newline to error message.
	* lib/nscd.c: If nscd is installed but not in use, then running
	`nscd -i` will exit(1). We shouldn't warn in this case since this
	is not abnormal behavior.

2012-02-13  Mike Frysinger  <vapier@gentoo.org>

	* man/.gitignore: Add generate_mans.deps

2012-02-13  Mike Frysinger  <vapier@gentoo.org>

	* man/grpck.8.xml: Relocate space.

2012-02-13  Mike Frysinger  <vapier@gentoo.org>

	* libmisc/copydir.c: Add missing #include <stdarg.h>

2012-02-12  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Set release date.

2012-02-12  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2012-02-11  Giuseppe Sacco  <eppesuig@debian.org>

	* man/po/it.po: Updated after review.

2012-02-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/it/Makefile.am: Activate all manpages.
	* man/po/it.po: Fix formal issues (end of lines).

2012-02-11  Giuseppe Sacco  <eppesuig@debian.org>

	* man/po/it.po: Updated to 1173t.

2012-01-30  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml, man/su.1.xml, man/po/da.po, man/po/ru.po,
	man/po/fr.po, man/po/de.po, man/po/sv.po, man/po/pl.po,
	man/po/it.po, man/po/shadow-man-pages.pot, man/po/zh_CN.po: Fix
	two typos. Thanks to Giuseppe Sacco. Unfuzzy translations
	* po/kk.po, po/nb.po, po/el.po, po/ca.po, po/ja.po: Re-generate.
	* man/login.defs.d/ENV_PATH.xml, man/login.defs.d/ENV_SUPATH.xml:
	Fix typo.

2012-01-28  Innocent De Marchi  <tangram.peces@gmail.com>

	* po/ca.po: Updated to 557t.

2012-01-28  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in, man/da/Makefile.am, man/Makefile.am: Build
	manpages with more than 50% translated messages.
	* man/fr/Makefile.am: Add missing manpages: chgpasswd.8,
	groupmems.8, nologin.8, sulogin.8.
	* man/de/Makefile.am: Add missing manpages: chage.1, chgpasswd.8,
	chpasswd.8, expiry.1, faillog.5, faillog.8, getspnam.3, gpasswd.1,
	groupadd.8, groupdel.8, groupmems.8, groupmod.8, grpck.8,
	grpconv.8, grpunconv.8, gshadow.5, lastlog.8, login.defs.5,
	logoutd.8, newusers.8, nologin.8, pwck.8, pwconv.8, pwunconv.8,
	sg.1, shadow.3, shadow.5, suauth.5, useradd.8, userdel.8,
	usermod.8, limits.5, login.access.5, porttime.5, id.1, sulogin.8
	* man/zh_CN/Makefile.am: Add missing manpages: chgpasswd.8,
	groupmems.8, nologin.8, sulogin.8
	* man/pl/Makefile.am, man/sv/Makefile.am, man/it/Makefile.am:
	Translate only manpages with more than 50% translated messages.
	* man/po/da.po: Do not translate names of manpages (newusers,
	limits, groups)

2012-01-28  Yuri Kozlov  <yuray@komyakino.ru>

	* man/po/ru.po: Updated to 1173t.

2012-01-27  Thomas Blein  <tblein@tblein.eu>

	* po/fr.po: Updated to 557t.
	* man/po/fr.po: Updated to 1173t.

2012-01-26  Joe Hansen  <joedalton2@yahoo.dk>

	* po/da.po: Updated to 557t.
	* man/po/da.po: Updated to 294t879u.

2012-01-23  Thomas Vasileiou  <thomas-v@wildmail.com>

	* po/el.po: Updated to 553t.

2012-01-22  Baurzhan Muftakhidinov  <baurthefirst@gmail.com>

	* po/kk.po: Updated to 557t.

2012-01-21  Miguel Figueiredo  <elmig@debianpt.org>

	* po/pt.po: Updated to 557t.

2012-01-19  Holger Wansing  <linux@wansing-online.de>

	* po/de.po: Updated to 557t.

2012-01-18  Bjørn Steensrud  <bjornst@skogkatt.homelinux.org>

	* po/nb.po: Updated to 557t. Thanks also to Hans Fredrik Nordhaug.

2012-01-16  NAKANO Takeo  <nakano@webmasters.gr.jp>

	* po/ja.po: Updated to 557t

2012-01-16  Simon Brandmair  <sbrandmair@gmx.net>

	* man/po/de.po: Updated to 1173t.

2012-01-14  YunQiang Su  <wzssyqa@gmail.com>

	* po/zh_CN.po: Updated to 551t2f4u
	* man/po/zh_CN.po: Updated to 1026t15f132u

2012-01-09  Yuri Kozlov  <yuray@komyakino.ru>

	* po/ru.po: Updated to 557t.

2012-01-09  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2012-01-08  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Cleanup.
	* lib/selinux.c, lib/semanage.c: prototypes.h was not included.

2011-12-09  Peter Vrabec  <pvrabec@redhat.com>

	* lib/prototypes.h, lib/Makefile.am, po/POTFILES.in,
	libmisc/copydir.c, lib/selinux.c: Move set_selinux_file_context()
	and reset_selinux_file_context() from libmisc/copydir.c to
	lib/selinux.c.
	* lib/commonio.c: Use set_selinux_file_context() and
	reset_selinux_file_context() instead of using the existing
	database SELinux context to set the context for the newly created
	files.

2011-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Do not use a hardcoded program name in the usage
	message.

2011-12-04  Nicolas François  <nicolas.francois@centraliens.net>

	* po/ca.po, po/cs.po, po/da.po, po/de.po, po/es.po, po/eu.po,
	po/fr.po, po/ja.po, po/kk.po, po/pt.po, po/pt_BR.po, po/ru.po,
	po/sk.po, po/sv.po, po/vi.po, po/zh_CN.po: Quick unfuzzy.

2011-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c, src/chpasswd.c, src/chgpasswd.c: Harmonize
	usage messages.

2011-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/Makefile.am, lib/prototypes.h, lib/selinux.c,
	lib/semanage.c, po/POTFILES.in: Move lib/selinux.c to
	lib/semanage.c.

2011-11-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c, man/usermod.8.xml: usermod -Z "" removes the
	SELinux user mapping for the modified user.
	* src/useradd.c: Zflg is #defined as user_selinux non empty.

2011-11-21  Peter Vrabec  <pvrabec@redhat.com>

	* libmisc/copydir.c: Ignore errors to copy ACLs if the operation
	is not supported.

2011-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/root_flag.c, src/gpasswd.c, src/chsh.c: Add splint
	annotations.
	* src/pwconv.c, src/pwunconv.c, src/grpconv.c, src/grpunconv.c:
	Ignore return value of spw_rewind, pw_rewind, sgr_rewind, and
	gr_rewind.
	* lib/commonio.h: Both head and tail cannot be owned. Set tail as
	dependent.
	* src/expiry.c: Ignore return value of expire ().
	* src/expiry.c: The catch_signals function does not use its sig
	parameter.
	* src/userdel.c: Last audit_logger parameter is a
	shadow_audit_result, use SHADOW_AUDIT_FAILURE instead of 0.
	* lib/selinux.c: vasprintf requires _GNU_SOURCE to be defined
	before including stdio.h.
	* src/chage.c: Cast 3rd date_to_str parameter to a time_t
	* src/passwd.c: Add missing cast.
	* lib/commonio.c: Avoid multiple statements per line.
	* lib/commonio.c: Ignore fclose return value when the file was
	open read only or was not changed, or if an error is already
	reported.

2011-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: The fail_max field is a short, use a short also
	for the max argument of setmax / setmax_one.
	* src/faillog.c: Fail with an error message when faillog fails to
	write to the faillog database.

2011-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gpasswd.1.xml: Document the difference between the -r and -R
	options.

2011-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml, man/groupadd.8.xml, man/usermod.8.xml,
	man/groupmod.8.xml: Avoid hardcoded values, and reference instead
	the configuration options (e.g. UID_MIN)
	* man/groupmod.8.xml, man/usermod.8.xml: Add missing reference to
	login.defs
	* man/login.defs.d/UID_MAX.xml, man/login.defs.d/SYS_UID_MAX.xml,
	man/login.defs.d/GID_MAX.xml, man/login.defs.d/SYS_GID_MAX.xml:
	Document the default values.

2011-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Change of group password enforces gshadow
	password. Set /etc/group password to "x".

2011-11-16  Peter Vrabec  <pvrabec@redhat.com>

	* NEWS, src/userdel.c, man/userdel.8.xml: Add option -Z/--selinux-user.
	* libmisc/system.c, lib/prototypes.h, libmisc/Makefile.am: Removed
	safe_system().
	* lib/selinux.c, po/POTFILES.in, lib/prototypes.h,
	lib/Makefile.am: Added helper functions for semanage.
	* NEWS, README, src/useradd.c, src/usermod.c, src/userdel.c,
	configure.in: Use libsemanage instead of semanage.

2011-11-16  Peter Vrabec  <pvrabec@redhat.com>

	* src/Makefile.am: useradd may need the LIBATTR library.

2011-11-16  Peter Vrabec  <pvrabec@redhat.com>

	* libmisc/copydir.c: Ignore perm_copy_file() errors with errno set
	to ENOTSUP.

2011-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Compilation fix when SHADOWGRP is not enabled.
	* libmisc/root_flag.c: Add missing #include <stdio.h>

2011-11-13  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2011-11-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c, src/chfn.c, src/chgpasswd.c, src/chpasswd.c,
	src/chsh.c, src/groupadd.c, src/groupdel.c, src/groupmems.c,
	src/groupmod.c, src/newusers.c, src/useradd.c, src/userdel.c,
	src/usermod.c: Provide the PAM error
	message instead of our own, and log error to syslog.
	* src/groupmems.c: Exit with exit rather than fail_exit in usage().
	* src/newusers.c: Check the number of arguments.
	* src/newusers.c: Do not create the home directory when it is not
	changed.
	* src/useradd.c: Set the group password to "!" rather "x" if there
	are no gshadow file.

2011-11-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Removed pw_opened.
	* src/pwck.c: optind cannot be greater than argc.
	* src/pwck.c: If spw_opened, then is_shadow is implicitly set.
	* src/pwck.c: Do not report passwd entry without x password and a
	shadow entry in --quiet mode (no interaction with the caller)
	* src/pwck.c: Do not check if the last password change is in the
	future if the time is set to 0.

2011-11-11  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/root_flag.c: Drop privileges before changing root. The
	--root option should not be used by regular users for suid utils.
	* libmisc/root_flag.c: Improve error messages.

2011-11-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Compile fix for TCB.

2011-11-11  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Avoid conflict with glibc. Rename error to
	error_acl.

2011-11-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml: Document the optional file argument.
	* man/newusers.8.xml: Fix the documentation of the inputs' format.

2011-11-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupmod.8.xml: Document that the primary group of users may
	be changed by groupmod -g.

2011-11-06  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c, man/newusers.8.xml: Add --root option.

2011-11-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Remove unused variable a.

2011-11-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/generate_mans.mak: The xml-config files do not depend on the
	Makefile.

2011-10-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c, src/chgpasswd.c, src/chpasswd.c, src/chsh.c,
	src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c,
	src/groupmems.c, src/groupmod.c, src/grpconv.c, src/grpunconv.c,
	src/lastlog.c, src/newusers.c, src/passwd.c, src/pwconv.c,
	src/pwunconv.c, src/su.c, src/useradd.c, src/userdel.c,
	src/usermod.c, src/vipw.c: Align and sort options.

2011-10-31  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/pwck.c, man/pwck.8.xm, src/grpck.c, man/grpck.8.xml:
	Add --root option.

2011-10-31  Nicolas François  <nicolas.francois@centraliens.net>

	* man/limits.5.xml, libmisc/limits.c: Sort limit identifiers.
	* libmisc/limits.c: Fix support for the K limit identifier.
	* libmisc/limits.c: Add missing default limit for L and U.

2011-10-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c, man/pwck.8.xml: Add support for long options.
	* src/pwck.c, man/pwck.8.xml: Add -h/--help option
	* src/grpck.c, man/grpck.8.xml: Add support for long options.
	* src/grpck.c, man/grpck.8.xml: Add -h/--help option

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/expiry.c, man/expiry.1.xml: Add support for long options.
	* src/expiry.c, man/expiry.1.xml: Add -h/--help option

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c, man/chfn.1.xml: Add support for long options.
	* src/chfn.c, man/chfn.1.xml: Add -u/--help option
	* NEWS, src/chfn.c, man/chfn.1.xml: Add --root option.

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/vipw.c, man/vipw.8.xml: Add --root option.

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/faillog.c, man/faillog.8.xml: Add --root option.
	* NEWS, src/lastlog.c, man/lastlog.8.xml: Likewise.
	* src/faillog.c: Add Prog variable, and prefix error messages with
	Prog rather than "faillog".
	* src/lastlog.c: Likewise.
	* src/lastlog.c: Split usage in smaller messages.

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chage.c, man/chage.1.xml: Add --root option. Open
	audit and syslog after the potential chroot. chage's usage split
	in smaller messages.

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: re-indent.
	* src/login.c: Fix support for sub-logins.

2011-10-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c, src/chage.c, src/newusers.c, src/su.c: The getopt
	index of long options is not used.

2011-10-29  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/Makefile.am, libmisc/root_flag.c,
	po/POTFILES.in: Add process_root_flag() to process the --root
	option and chroot so that the chroot config is used and changes
	are applied to the chroot.
	* NEWS, src/useradd.c, man/useradd.8.xml: Add --root option. Open
	audit after the potential chroot.
	* NEWS, src/userdel.c, man/userdel.8.xml: Add --root option. Open
	audit and syslog after the potential chroot. userdel's usage split
	in smaller messages.
	* NEWS, src/usermod.c, man/usermod.8.xml: Likewise
	* NEWS, src/groupadd.c, man/groupadd.8.xml: Add --root option. Open
	audit and syslog after the potential chroot.
	* src/groupadd.c: Check atexit failures.
	* src/groupadd.c: Return E_SUCCESS instead of exit'ing at the end
	of main().
	* NEWS, src/groupadd.c, man/groupadd.8.xml: Add --root option. Open
	audit and syslog after the potential chroot.
	* src/groupmod.c: The getopt index of long options is not used.
	* src/groupdel.c: Add process_flags().
	* src/groupdel.c, man/groupdel.8.xml: Add --help option.
	* NEWS, src/groupdel.c, man/groupdel.8.xml: Add --root option. Open
	audit and syslog after the potential chroot.
	* src/groupdel.c: Check atexit failures.
	* NEWS, src/pwconv.c, src/pwunconv.c, src/grpconv.c,
	src/grpunconv.c, man/pwconv.8.xml: Add --root option.
	* src/pwconv.c, src/pwunconv.c, src/grpconv.c, src/grpunconv.c:
	Add --help option.
	* src/pwconv.c, src/pwunconv.c, src/grpconv.c, src/grpunconv.c:
	Add process_flags() and usage().
	* NEWS, src/chpasswd.c, man/chpasswd.8.xml, src/chgpasswd.c,
	man/chgpasswd.8.xml: Add --root option.
	* src/chpasswd.c, src/chgpasswd.c: The getopt index of long
	options is not used.
	* NEWS, src/passwd.c, man/passwd.1.xml: Add --root option.
	passwd's usage split in smaller messages.
	* src/passwd.c: Call sanitize_env() before setting the locales.
	* NEWS, src/groupmems.c, man/groupmems.8.xml: Add --root option.
	Open syslog after the potential chroot.
	* src/groupmems.c: The getopt index of long options is not used.
	* NEWS, src/chsh.c, man/chsh.1.xml: Add --root option.
	chsh's usage split in smaller messages.
	* src/chsh.c: The getopt index of long options is not used.
	* NEWS, src/gpasswd.c, man/gpasswd.1.xml: Add --root option.
	* src/gpasswd.c: The getopt index of long options is not used.

2011-10-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/ja/Makefile.am, man/fr/Makefile.am, man/ru/Makefile.am,
	man/sv/Makefile.am, man/pl/Makefile.am, man/zh_CN/Makefile.am,
	man/it/Makefile.am, man/Makefile.am: Include man_nopam in
	EXTRA_DIST only when USE_PAM (they are already in man_MANS
	otherwise).

2011-10-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/su.1.xml: Document that su -c does not providea controlling
	terminal.

2011-10-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Fix typo.
	* src/useradd.c: Likewise.
	* lib/nscd.c: Remove unused variable.
	* lib/prototypes.h, libmisc/cleanup.c, lib/spawn.c, src/chage.c:
	Add splint annotations.
	* src/sulogin.c (main): env is only used when USE_PAM is not set.

2011-10-15  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/LOGIN_STRING.xml: Fix typo.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes, libmisc/basename.c (Basename): Input is a
	constant string.
	* lib/prototypes.h, lib/spawn.h, lib/spawn.c, src/userdel.c,
	lib/nscd.c, lib/Makefile.am: Delete spawn.h. Move from spawn.h to
	prototypes.h.
	* src/userdel.c: Remove unused variables.
	* lib/nscd.c: Remove unused header files.
	* lib/nscd.c: Add the program name to error messages.
	* lib/nscd.c: Indicate when nscd does not terminate normally (signal).
	* lib/spawn.c: Updated header.
	* lib/spawn.c: Flush stdout and stderr to avoid inheriting from
	ongoing buffers.
	* lib/spawn.c: Avoid implicit conversion of pointer to boolean.
	* lib/spawn.c: Replace perror by a complete message.
	* lib/spawn.c: Continue to wait for the child if another child
	terminates.
	* lib/prototypes.h: The name field from cleanup_info_mod is a
	constant string. (username).

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/cleanup.c: Spawn children should no trigger cleanup
	actions. Make sure only the parent (initial caller) perform the
	cleanup actions.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c (SHA_salt_rounds): It is statically ensured that
	the format fits in rounds_prefix.
	* libmisc/loginprompt.c: Likewise.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpconv.c: Fail if not called correctly.
	* src/grpconv.c: At the end of main, the passwd and shadow files
	are locked. No need to check before unlocking. No need to set the
	lock as false neither since there cannot be anymore failures.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: EPOCH is not needed, it's converted to -1 by
	strtoday(). But we need to support "-1" specifically.
	* src/chage.c: Fix usage: LOGIN is mandatory.
	* src/chage.c: Display disabled expiry or last change as "-1"
	instead of 1969-12-31. 1969-12-31 is still supported as input from
	the user.
	* src/chage.c: Exit cleanly with fail_exit() (lock files were not
	removed).

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Remove def_file. It was always set to
	USER_DEFAULTS_FILE.
	* src/useradd.c: Fix cut&paste issue causing bad warning when
	the useradd.default file contains an invalid INACTIVE= value.
	* src/useradd.c: Added missing end of line for rename errors.
	* src/useradd.c: Added -D synopsis to the usage message.
	* src/useradd.c: Do not scale_age(-1), just use -1.
	* src/useradd.c: Added FIXME to be fixed later.
	* src/useradd.c: Allow -e -1 when there is no shadow file.
	* src/useradd.c: Fail, but do not print the usage message when the
	-e argument is not valid.
	* src/useradd.c: No need to check for oflg since uflg is
	already checked.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Too much const were added on 2011-08-15. pw in
	save_caller_context() is allocated and freed.
	* src/su.c: Added missing #endif indication
	* src/su.c (save_caller_context): password only needed if
	SU_ACCESS and !USE_PAM.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: date_to_str() is always called with negativ set
	to "never", remove this argument.
	* src/usermod.c: Added missing cast for gr_free argument.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwconv.c: Fail if not called correctly.
	* src/pwconv.c: At the end of main, the passwd and shadow files
	are locked. No need to check before unlocking.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Initially set the passwd's password to '*'
	instead of 'x'. Only when it is confirmed that a shadow entry is
	(will be) added, set the passwd's password to 'x'.
	* src/newusers.c: An invalid line is an error. A failure needs to
	be reported.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Remove log_gpasswd_success_gshadow(). Writing in
	gshadow is the last sub-task.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chsh.c: No needto remove lines tarting with '#' from
	/etc/shells. This is already done by getusershell() and these
	shell would fail the access(X_OK) test.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/generate_mans.mak: Fix the generation of translated man
	pages. xml2po removed the comment from empty headers and the
	config was no more inserted.

2011-09-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chage.1.xml: The LOGIN argument is not optional.
	* man/login.defs.d/QUOTAS_ENAB.xml: Document the dependency
	between /etc/limits and QUOTAS_ENAB.

2011-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* po/POTFILES.in: Added lib/spawn.c.

2011-08-20  Jonathan Nieder  <jrnieder@gmail.com>

	* lib/Makefile.am: Added lib/spawn.c and lib/spawn.h.
	* lib/nscd.c, lib/spawn.c, lib/spawn.h: It is not possible to
	differentiate between an nscd failure, and a failure to execute
	due to no nscd with posix_spawn. Use our own run_command routine.
	* src/userdel.c: Use run_command()

2011-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmod.c: Ignore return value from snprintf.
	* src/groupmod.c: Add static qualifier to the cleanup structures.
	* src/groupmod.c: Check atexit failures.

2011-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Do not assign static to NULL.
	* src/usermod.c (date_to_str): buf needs to be unique (e.g.
	independent from negativ), and is an out buffer.
	* src/usermod.c: Ignore return value from snprintf, and force
	nul-termination of buffer.
	* src/usermod.c: Improve memory management.
	* src/usermod.c: An audit bloc was not reachable, moved above on
	success to move the home directory.
	* src/usermod.c: Ignore close() return value for the mailbox
	(opened read only).

2011-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Added const modifiers.
	* lib/prototypes: Synchronize splint annotations.

2011-08-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Add splint annotations.
	* src/su.c: Set caller_on_console as boolean.
	* src/su.c: Ignore return value from fputs (usage) / puts (prompt).
	* src/su.c: Improved memory management.

2011-08-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c, src/chpasswd.c, src/newusers.c: Replace cflg by
	a test on crypt_method.

2011-08-14  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowndir.c: Add splint annotations.
	* src/chgpasswd.c: Likewise.
	* src/chpasswd.c: Likewise.
	* src/newusers.c: Likewise.
	* libmisc/salt.c, lib/prototypes.h (crypt_make_salt): Likewise.

2011-08-14  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/gshadow_.h: Fix typo in comment.

2011-08-14  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/getgr_nam_gid.c: getgr_nam_gid()
	returns an allocated structure.

2011-08-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Add annotations to indicate that su_failure() does
	not return.

2011-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Display PID as unsigned long.

2011-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Remove unused Zflg.

2011-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c: Fix typo sp -> sg. sg_namp -> sg_name
	* src/chgpasswd.c: Always update the group file when SHADOWGRP is
	not enabled.

2011-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Fix typo in notreached annotation.

2011-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Add annotations to indicate that fail_exit() does
	not return.
	* src/usermod.c: Fix typo in notreached annotation.

2011-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_uid.c: free (used_uids) on return.
	* libmisc/find_new_gid.c: free (used_gids) on return.

2011-07-28  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Fix NIS commit from 2011-07-14.

2011-07-28  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chpasswd.c: Create a shadow entry if the password is
	set to 'x' in passwd and there are no entry in shadow for the
	user.
	* NEWS, src/chgpasswd.c: Create a gshadow entry if the password is
	set to 'x' in group and there are no entry in gshadow for the
	group.

2011-07-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Exit after printing usage when arguments or
	options are provided.
	* src/pwunconv.c: Re-indent.
	* src/pwunconv.c: Open the shadow file read only.
	* src/grpunconv.c: Exit after printing usage when arguments or
	options are provided.
	* src/grpunconv.c: Open the gshadow file read only.

2011-07-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c: Fix typo.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/login.c: Do not log in utmp / utmpx / wtmp when PAM is
	enabled. This is already done by pam_lastlog. Note that
	pam_lastlog can only log the parent PID, not the PID of the
	process forked by login.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c: Add annotations to indicate that usage() does
	not return.
	* src/chpasswd.c: Reindent.
	* src/chpasswd.c: Remove dead code. No need to set crypt_method
	to NULL when it is already NULL. sflg is only set if crypt_method
	is not NULL.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Add annotations to indicate that usage() does not
	return.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Add annotations to indicate that usage() does not
	return.
	* src/faillog.c: Fix message: this is faillog, not lastlog.
	* src/faillog.c: Check that there are no extra arguments after
	parsing the options.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c: Add annotations to indicate that usage() does
	not return.
	* src/chgpasswd.c: Split usage in smaller parts. Those parts are
	already translated for chpasswd. Usage is now closer to
	chpasswd's.
	* src/chgpasswd.c: Remove dead code. No need to set crypt_method
	to NULL when it is already NULL. sflg is only set if crypt_method
	is not NULL.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/expiry.c: Remove dead code.
	* src/expiry.c: Improve comments.

2011-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Added comments.
	* src/grpck.c: Avoid implicit conversion of pointer to boolean.
	* src/grpck.c: Remove dead code. argc cannot be lower than optind.
	Avoid checking twice in a row for NULL != list[i].

2011-07-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Fail in case of
	invalid configuration.
	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Updated
	comments.
	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Be more strict
	on the loop stop conditions. Stop if we passed the limit, even if
	the limit itself was never noticed.

2011-07-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fix some spacing issues due to configuration
	variants.

2011-07-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Overflow when computing the number of days based
	on the scaling. Use of long long needed.

2011-07-14  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, lib/commonio.h, lib/commonio.c: Additional messages to
	indicate why locking failed.
	* NEWS, lib/commonio.c: Fix the sort algorithm in case of NIS. NIS
	entries were dropped.
	* lib/commonio.c: NIS entries can start by '+' or '-'.

2011-07-14  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmod.c: When the gshadow file exists but there are
	no gshadow entries, an entry is created if the password is changed
	and group requires a shadow entry.

2011-07-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Fix typo in comment.
	* src/usermod.c (move_home): It is always an error to use -m if
	the new home directory already exist (independently from the
	existence of the old home directory did not exist)
	* src/usermod.c (process_flags): Report usage if no options are
	provided. Update the error message.
	* src/usermod.c (process_flags): Check option compatibility and
	dependency before options are discarded when no changes are
	requested.
	* src/usermod.c (process_flags): Check for oflg is not needed to
	check if changes are needed.
	* src/usermod.c: usage() does not return. Add annotations.
	* src/usermod.c (update_gshadow): is_member was computed twice.
	* src/usermod.c (update_group, update_gshadow): Reduce complexity
	and document checks. Some checks were always true/false within
	their call context.
	* NEWS, src/usermod.c; man/usermod.8.xml: When the shadow file
	exists but there are no shadow entries, an entry has to be created
	if the password is changed and passwd requires a shadow entry, or
	if aging features are used (-e or -f). Document this and also that
	-e and -f require a shadow file.
	* man/usermod.8.xml: Document behavior of an empty EXPIRE_DATE.
	* man/usermod.8.xml: Document that the mail spool might have to be
	renamed (as for the homedir)
	* src/usermod.c (new_pwent): Document that pw_locate will not fail
	because getpwnam returned successfully.
	* src/usermod.c (process_flags): Do not display the usage in case
	of an invalid -f value (similar to -e).
	* src/usermod.c (process_flags): Indicate that the user name is
	invalid, instead of just a 'field'.

2011-07-08  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: Fix typo in comment.
	* src/userdel.c: Fix typo from 2011-06-04. Report failure on the
	mailfile instead of user_home.
	* lib/fields.c: Fixed typo from 2010-02-15. field instead of cp
	ought to be checked.
	* src/vipw.c: Use Prog instead of progname. This is needed since
	Prog is used in the library.
	* configure.in: Fix typo. libcrack default is 'no'.
	* src/groupmod.c: Avoid implicit conversion of pointer to boolean.
	* src/groupmod.c: osgrp can be set only if pflg || nflg. No need
	to check for pflg || nflg again

2011-07-08  Nicolas François  <nicolas.francois@centraliens.net>

	* man/*.xml, man/config.xml.in: Add source and version
	information. This reduce the amount of warnings during the
	manpages generation.

2011-06-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.1.xml: Added reference to chpasswd(8).
	* man/po/ru.po: Add space between option and argument.

2011-06-16  Francisco Javier Cuadrado  <fcocuadrado@gmail.com>

	* po/es.po: Spanish translation

2011-06-16  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/isexpired.c: Added parenthesis.
	* libmisc/env.c: Added comments.
	* libmisc/env.c: Avoid implicit conversion of pointer to boolean.

2011-06-16  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: environ is provided by <unistd.h>.
	* src/su.c: Added function prototypes.
	* src/su.c: Rename shellstr parameter to shellname to avoid
	collision with static variable.
	* NEWS, src/su.c: Added support for PAM modules which change
	PAM_USER.

2011-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c (prepare_pam_close_session): Extract the creation of a
	child and listening for signal in the parent from run_shell().
	prepare_pam_close_session() is now executed before the creation of
	the pam session and before the UID is changed. This allows to
	close the session as root.
	* src/su.c: Also drop the controlling terminal when PAM is not
	used.
	* src/su.c: Remove run_shell().
	* src/su.c: After prepare_pam_close_session() there is no need to
	close the session in the child. Added pam_setcred to
	prepare_pam_close_session().

2011-06-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c (save_caller_context): Extract from main() the code
	used to save the caller's context.
	* src/su.c: Split check_perms() in to a PAM (check_perms_pam) and
	a non-PAM (check_perms_nopam) version.
	* src/su.c: Cleanup check_perms_nopam().
	* src/su.c: Merge environment setting blocks after the creation of
	the session.
	* src/su.c: Close the password databases together with syslog.
	* src/su.c: Extract command line processing from main().
	* src/su.c: Extract export of environment from main().

2011-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Group some of the environment processing blocks. The
	definition of shellstr, PATH and IFS is not influenced (getenv,
	getdef, restricted_shell) by and does not influence (addenv does
	not change environ) the authentication. And the authentication
	did not overwrite those definitions. This will ease an extraction
	from the big main() function.
	* src/su.c: Move definition of change_environment and shellstr
	after the switch to the final subsystem. The previous architecture
	forced to always change the environment (the shell starts with a
	'*' and was thus restricted, and change_environment could not be
	reset to false).
	* src/su.c: No need to change the user's shell in case of
	subsystem root. Update the comments.
	* src/su.c: Define shellstr before the environment so that
	restricted_shell is called only once. This will allow moving the
	environment definition after the switch to the new user.
	* src/su.c: Extract the authentication from the main function.
	* lib/prototypes.h, src/suauth.c, src/su.c (check_su_auth): Do not
	use the pwent global variable to communicate between APIs of
	different files. Added boolean parameter su_to_root to
	check_su_auth().
	* src/su.c (check_perms): Return the passwd entry of the finally
	authenticated user. Remove usage of the pwent variable.
	* src/su.c: The password of the caller is the one from the
	spwd structure only if the passwd's password is 'x'.
	* src/su.c: Cleanup local variables.

2011-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Updating pwent after expire() is not useful. Only the
	password information may have changed and they are not used
	anymore afterwards.
	* src/su.c: No need to call expire() if there are no shadow entry.
	No need to convert a passwd entry into an spwd entry in that case.

2011-06-12  Thomas Blein  <tblein@tblein.eu>

	* man/po/fr.po: French manpages translation

2011-06-05  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/su.c: Do not forward the controlling terminal to
	commands executed with -c. This prevents tty hijacking which could
	lead to execution with the caller's privileges. This required to
	forward signals from the terminal (SIGINT, SIGQUIT, SIGTSTP) to
	the executed command.

2011-06-05  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/userdel.c: Do not remove a group with the same name as
	the user (usergroup) if this group isn't the user's primary group.

2011-06-04  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/userdel.c: Check the existence of the user's mail
	spool before trying to remove it. If it does not exist, a warning
	is issued, but no failure.

2011-06-03  Nicolas François  <nicolas.francois@centraliens.net>

	* src/sulogin.c: Added Prog, needed because of the last xmalloc()
	change.

2011-06-03  Nicolas François  <nicolas.francois@centraliens.net>

	* man/zh_CN/, man/zh_CN/Makefile.am: Added directory, and zh_CN
	Makefile.
	* man/Makefile.am: Build zh_CN pages.
	* man/generate_translations.mak: Add config.xml to CLEANFILES.
	* man/po/zh_CN.po: limits, groups, faillog, expiry should not be
	translated (command name, file name), also this broke the build
	system as they are used to derive manpage names.

2011-06-02  Peter Vrabec  <pvrabec@redhat.com>

	* src/lastlog.c, src/faillog.c: Fix underflows causing wrong entry
	to be displayed.

2011-06-02  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/xmalloc.c: Harmonize message.

2011-06-02  Peter Vrabec  <pvrabec@redhat.com>

	* libmisc/find_new_uid.c, libmisc/find_new_gid.c: Add missing
	memory allocation check.

2011-06-02  Cal Peake  <cp@absolutedigital.net>

	* NEWS, libmisc/addgrps.c: Fix allocator loop. Continue to
	getgroups() when getgroups fails (-1) with errno==EINVAL.

2011-06-01  Simon Brandmair  <sbrandmair@gmx.net>

	* man/newusers.8.xml, man/suauth.5.xml, man/suauth.5.xml,
	  man/logoutd.8.xml, man/chgpasswd.8.xml, man/groups.1.xml,
	  man/faillog.5.xml, man/login.defs.d/MD5_CRYPT_ENAB.xml,
	  man/login.defs.d/DEFAULT_HOME.xml,
	  man/login.defs.d/LOGIN_RETRIES.xml,
	  man/login.defs.d/MD5_CRYPT_ENAB.xml,
	  man/login.defs.d/PORTTIME_CHECKS_ENAB.xml,
	  man/login.defs.d/SHA_CRYPT_MIN_ROUNDS.xml:
	  Fix typos
	* man/po/de.po: German translation of manpages completed

2011-05-23  Innocent De Marchi  <tangram.peces@gmail.com>

	* po/ca.po: Catalan translation completed

2011-04-22  Miguel Figueiredo  <elmig@debianpt.org>

	* po/pt.po: Portuguese translation completed

2011-04-22  Thomas Blein  <tblein@tblein.eu>

	* po/fr.po: French translation completed

2011-04-16  Holger Wansing  <linux@wansing-online.de>

	* po/de.po: German translation completed

2011-04-15  Fred Maranhão  <fred.maranhao@gmail.com>

	* po/pt_BR.po: Brazilian Portuguese translation completed

2011-04-10  Yuri Kozlov  <yuray@komyakino.ru>

	* po/ru.po: Russian translation completed

2011-04-07  Daniel Nylander  <po@danielnylander.se>

	* po/sv.po: Swedish translation completed

2011-04-07  Joe Dalton  <joedalton2@yahoo.dk>

	* po/da.po: Danish translation completed

2011-04-05  Timur Birsh  <taem@linukz.org>

	* po/kk.po: Kazakh translation completed

2011-04-05  NAKANO Takeo  <nakano@st.seikei.ac.jp>

	* po/ja.po: Japanese translation completed

2011-03-30  YunQiang Su  <wzssyqa@gmail.com>

	* man/po/zh_CN.po: convert Simplified Chinese translation
	  of manpages to gettext
	* po/zh_CN.po: Simplified Chinese translation completed

2010-02-15  Nicolas François  <nicolas.francois@centraliens.net>

	* man/ru/Makefile.am: Remove double inclusion of $(man_nopam)

2010-02-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/user_busy.c, src/userdel.c, src/usermod.c: Warn in
	user_busy() rather than in src/userdel.c or src/usermod.c to
	provide more accurate failure cause (user is logged in or user
	still executes processes).

2010-02-15  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c, lib/sgroupio.c, lib/shadowio.c, lib/pwio.c: Check
	entry validity before commits to databases.
	* libmisc/fields.c, libmisc/Makefile.am, lib/fields.c,
	lib/Makefile.am, po/POTFILES.in: fields.c moved from libmisc to
	lib.
	* lib/fields.c: Fail if input pointer is NULL.

2010-02-13  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chfn.c, src/chsh.c: Fix CVE-2011-0721: forbid \n in
	gecos or shell.

2011-02-12  Nicolas François  <nicolas.francois@centraliens.net>

	* autogen.sh: Restore original autoreconf (see 2010-08-29's change
	for autogen.sh)
	* configure.in, man/po/Makefile.in.in, man/po/Makefile.in:
	Makefile.in.in replaced by Makefile.in to avoid config.status
	issues when there are multiple po directories.
	* man/po/LINGUAS: Adapted to above change.
	* man/po/POTFILES.in, man/po/XMLFILES: POTFILES.in replaced by
	XMLFILES.
	* man/Makefile.am: generate_mans.deps shall be included by make,
	not automake.

2010-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/console.c: Fix CONSOLE parser. This caused login
	to hang when CONSOLE was configured with a colon separated list of
	TTYs.  See http://bugs.gentoo.org/show_bug.cgi?id=324419

2010-09-05  Nicolas François  <nicolas.francois@centraliens.net>

	Integrate review comments from Julien Cristau
	* libmisc/copydir.c: Missing parenthesis in comment.
	* libmisc/chowndir.c: Fixed memory leak on failed realloc().
	* libmisc/chowndir.c: Make sure the buffer for the path is large
	enough.
	* libmisc/remove_tree.c: Remove check for NULL before free().

2010-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fix 2 fuzzy strings.

2010-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/usermod.c: Accept options in any order (username not
	necessarily at the end)

2010-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* autogen.sh: Expand autoreconf to avoid running autopoint.

2010-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2010-08-28  Brian M. Carlson  <sandals@crustytoothpaste.ath.cx>

	* man/chsh.1.xml: Fix comma splice.

2010-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/protoypes.h, libmisc/copydir.c, src/useradd.c:
	selinux_file_context renamed set_selinux_file_context.
	* lib/protoypes.h, libmisc/copydir.c, src/useradd.c:
	Added reset_selinux_file_context.
	* src/useradd.c: Check the return value of
	set_selinux_file_context and reset_selinux_file_context.
	* libmisc/copydir.c: Check the return value of
	reset_selinux_file_context.

2010-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Fix handling of environment variables when
	the environment is not changed. In particular, this makes su
	behave as documented regarding PATH and IFS (i.e. they are reset)
	when -p is provided.

2010-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* man/su.1.xml: Fix typo.

2010-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c, src/userdel.c, src/grpck.c, src/gpasswd.c,
	src/newusers.c, src/pwconv.c, src/chpasswd.c, src/logoutd.c,
	src/chfn.c, src/groupmems.c, src/usermod.c, src/pwunconv.c,
	src/expiry.c, src/groupdel.c, src/chgpasswd.c, src/useradd.c,
	src/su.c, src/groupmod.c, src/passwd.c, src/pwck.c, src/chage.c,
	src/groupadd.c, src/login.c, src/grpconv.c, src/groups.c,
	src/grpunconv.c, src/chsh.c: Prog changed to a constant string.

2010-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c: Avoid implicit conversion of integer to
	boolean.
	* libmisc/basename.c: Avoid implicit conversion of pointer to
	boolean.
	* libmisc/basename.c, lib/prototypes.h (Basename): Return a
	constant string.
	* libmisc/basename.c, libmisc/obscure.c, lib/prototypes.h,
	libmisc/xmalloc.c, libmisc/getdate.h, libmisc/system.c,
	libmisc/getgr_nam_gid.c, libmisc/failure.c, libmisc/valid.c: Add
	splint annotations.
	* libmisc/chowndir.c: Avoid memory leak.
	* libmisc/chowndir.c: Do not check *printf/*puts return value.
	* libmisc/chowntty.c: Avoid implicit conversion between integer
	types.
	* libmisc/obscure.c: Return a bool when possible instead of int.
	* libmisc/shell.c: Do not check *printf/*puts return value.
	* libmisc/shell.c: Do not check execle return value.
	* libmisc/setupenv.c: Avoid implicit conversion between integer
	types.
	* libmisc/xmalloc.c: size should not be zero to avoid returning
	NULL pointers.
	* libmisc/hushed.c: Do not check *printf/*puts return value.
	* libmisc/system.c: Avoid implicit conversion of integer to
	boolean. safe_system last argument is a boolean.
	* libmisc/system.c: Check return value of dup2.
	* libmisc/system.c: Do not check *printf/*puts return value.
	* libmisc/system.c: Do not check execve return value.
	* libmisc/salt.c: Do not check *printf/*puts return value.
	* libmisc/loginprompt.c: Do not check gethostname return value.
	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Do not check
	gr_rewind/pw_rewind return value.
	* libmisc/ttytype.c: Limit the number of parsed characters in the
	sscanf format.
	* libmisc/ttytype.c: Test if a type was really read.
	* libmisc/sub.c: Do not check *printf/*puts return value.
	* libmisc/sub.c: Avoid implicit conversion of integer to boolean.
	* src/userdel.c: Fix typo in comment.
	* src/userdel.c: Avoid implicit conversion of boolean to integer.
	* src/userdel.c: safe_system last argument is a boolean.
	* src/newusers.c: Avoid implicit conversion of boolean to integer.
	* src/newusers.c: Avoid implicit conversion of integer to boolean.
	* src/usermod.c: Add brackets.
	* src/usermod.c: Avoid implicit conversion of characters or
	integers to booleans.
	* src/vipw.c: Avoid implicit conversion of integer to boolean.
	* src/su.c: Avoid implicit conversion of integer to boolean.
	* src/su.c: Add brackets.
	* src/useradd.c: Avoid implicit conversion of characters or
	integers to booleans.

2010-08-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/obscure.c, lib/prototypes.h (obscure): Return a bool
	instead of an int.
	* libmisc/obscure.c, libmisc/tz.c, src/passwd.c, lib/encrypt.c,
	libmisc/copydir.c, lib/prototypes.h: Add splint annotations.
	* libmisc/tz.c: Fix some const issues.
	* libmisc/tz.c: Avoid multi-statements lines.
	* libmisc/tz.c: Add brackets.
	* libmisc/copydir.c: Do not check *printf/*puts return value.
	* libmisc/copydir.c: Fail if we cannot set or reset the SELinux
	fscreate context.
	* libmisc/copydir.c: Use xmalloc instead of malloc.
	* libmisc/copydir.c: Do not check lutimes return value
	* src/vipw.c: Avoid implicit conversion of integer to boolean.
	* src/su.c (iswheel): Return a bool instead of an int.
	* src/passwd.c: Remove insert_crypt_passwd(). Use xstrdup instead.
	* src/passwd.c: Return constant strings when sufficient.
	* src/passwd.c: Do not check *printf/*puts return value.
	* src/passwd.c: Avoid implicit conversion of character to boolean.
	* src/passwd.c: Do not check sleep return value.
	* src/sulogin.c: Do not check *printf/*puts return value.
	* lib/encrypt.c: Do not check fprintf return value.

2010-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Fix a const issue.
	* src/passwd.c: Avoid multi-statements lines.
	* src/sulogin.c: Fix a const issue.

2010-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c, lib/prototypes.h: Caller can choose not to
	copy the extended attributes (the SELinux context is hence reset)
	* src/usermod.c: Copy the extended attributes.
	* src/useradd.c: Only reset the SELinux context.

2010-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Fixed typo.

2010-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/console.c, libmisc/motd.c, libmisc/setupenv.c,
	libmisc/sulog.c, libmisc/hushed.c, libmisc/failure.c,
	libmisc/loginprompt.c, libmisc/ttytype.c, libmisc/obscure.c,
	libmisc/pam_pass_non_interractive.c, src/userdel.c, src/login.c,
	lib/commonio.c, lib/commonio.h, libmisc/setugid.c,
	libmisc/setupenv.c: Fix some const issues.
	* libmisc/motd.c: Avoid multi-statements lines.
	* libmisc/motd.c: Support long MOTD_FILE.
	* libmisc/list.c, lib/prototypes.h: Revert previous change.
	dup_list and is_on_list are used with members as defined for the
	group structure, and thus even if the list is not modified, the
	list elements cannot be constant strings.
	* libmisc/system.c: Avoid C++ comments.
	* src/vipw.c: WITH_TCB cannot be tested inside a gettextized
	string. Split the Usage string.
	* lib/commonio.h: Re-indent.

2010-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/audit_help.c (audit_logger):pgname is not used. We let
	audit find out the name of the program.
	* libmisc/audit_help.c: Re-indent.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Avoid implicit conversion from signed to unsigned.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Make sure there are no NULL pointer dereference.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/remove_tree.c: Ignore snprintf return value.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/list.c: dup_list() and is_on_list() do
	not change the members of the list they receive. Added const
	qualifiers.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Re-indent.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Avoid multi-statements lines.

2010-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fix a typo.

2010-06-24  Baurzhan Muftakhidinov  <baurthefirst@gmail.com>

	* NEWS, po/kk.po: Updated Kazakh translation.

2010-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fix some typos. Minor updates: 886t70f187u.

2010-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2010-04-05  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml, man/useradd.8.xml, man/groupadd.8.xml,
	man/login.defs.d/UMASK.xml, man/login.defs.d/CREATE_HOME.xml,
	man/login.defs.d/LOGIN_RETRIES.xml: Fix typos: choosen, overriden,
	bahavior.

2010-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Document changes of ownerships.

2010-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/vipw.8.xml: Fix formatting typo.
	* man/vipw.8.xml: Document the login.defs parameters only when tcb
	is enabled.

2010-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: spool is a constant string.
	* src/useradd.c: Set the new copy_tree's paramater 'copy_root' to false

2010-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: move_home() is only called if mflg is set.
	* src/usermod.c: Fail is -m is provided but the old home directory
	is not a directory.
	* src/usermod.c: Use the previous improvement of copy_tree to
	provide better error diagnosis.
	* src/usermod.c: When rename() is used, also change the ownership.
	* src/usermod.c: Do not change the ownership of the root directory
	twice.
	* src/usermod.c: When -u is provided, only change the ownership of
	the home directory if it is a directory.
	* src/usermod.c: Also change ownerships when -g is used.

2010-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/copydir.c: Add the old UID and GID to
	copy_tree to detect when ownership shall be changed.
	* libmisc/copydir.c: Document the behavior when the IDs are set to
	-1.
	* lib/prototypes.h, libmisc/copydir.c (copy_tree): Add parameter
	copy_root.
	* libmisc/copydir.c: error() and ctx can be static.
	* libmisc/copydir.c (copy_hardlink): Remove parameter src.

2010-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowndir.c: Dynamically allocate memory to support
	path longer than 1024 characters.
	* libmisc/chowndir.c: Fix typos in documentation.
	* libmisc/chowndir.c: Support and document the behavior when a old
	or new ID is set to -1.
	* libmisc/chowndir.c: Improved error detection when chown fails.
	* libmisc/chowndir.c: Harmonize error handling strategy when an
	error occurs: stop changing ownership as soon as an error was
	detected.

2010-04-03  Nicolas François  <nicolas.francois@centraliens.net>

	* man/hu/passwd.5: Fix formatting typo.
	* man/id/login.1: Likewise.

2010-03-31  Nicolas François  <nicolas.francois@centraliens.net>

	* man/vipw.8.xml: When TCB is enabled, vipw uses login.defs.

2010-03-31  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/copydir.c: When a hardlink is detected, the
	original hardlink should not be removed.

2010-03-30  Nicolas François  <nicolas.francois@centraliens.net>

	* po/POTFILES.in, libmisc/Makefile.am, lib/prototypes.h,
	libmisc/remove_tree.c, libmisc/copydir.c: Split remove_tree()
	outside of copydir.c to avoid linking against libacl or libattr.

2010-03-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: shell's name must be -su when a su fakes a login.

2010-03-30  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in, libmisc/copydir.c, man/useradd.8.xml,
	man/usermod.8.xml, src/Makefile.am: Added support for ACLs and
	Extended Attributes.

2010-03-30  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Document the sections closed by #endif

2010-03-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/vipw.8.xml: Add section ENVIRONMENT.

2010-03-26  Nicolas François  <nicolas.francois@centraliens.net>

	* etc/login.defs: Updated description of UMASK to indicate its
	usage by pam_umask.
	* man/login.defs.d/UMASK.xml: Likewise.

2010-03-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.1.xml: login does not check for new mails in PAM
	enabled versions. This is done by pam_mail.

2010-03-25  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chpasswd.c, man/chpasswd.8.xml, man/login.defs.5.xml:
	PAM enabled versions: restore the -e option to allow restoring
	passwords without knowing those passwords. Restore together the -m
	and -c options.

2010-03-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c, src/vipw.c, src/newgrp.c: When the child is
	interrupted, stop ourself with a SIGSTOP signal.

2010-03-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Limit the scope of variable pid.
	* src/login_nopam.c: Limit the scope of variables end, lineno, i,
	str_len.
	* src/logoutd.c: Limit the scope of variable c.
	* src/vipw.c: Re-indent.
	* src/vipw.c: Close the file after the creation of the backup.
	* src/useradd.c (set_default): Close input file on failure.
	* src/useradd.c: Limit the scope of variables spool, file, fd, gr,
	gid, mode.
	* src/passwd.c: Limit the scope of variables last and ok.
	* src/chage.c: Fix typo (non breaking space).
	* src/login.c: Limit the scope of variables erasechar killchar, c,
	failed.
	* src/groups.c: Limit the scope of variable ngroups, pri_grp, i.
	* src/id.c: Limit the scope of variable i.

2010-03-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/utent.c (getutline): Remove getutline(). This function is
	no more used.
	* lib/groupmem.c: Limit the scope of variable i.
	* lib/shadow.c: Avoid implicit conversion of pointers and integers
	to booleans.
	* lib/shadow.c: Added brackets.
	* libmisc/limits.c: Limit the scope of variable tmpmask.
	* libmisc/copydir.c: Close opened file on failure.
	* libmisc/loginprompt.c: Limit the scope of variable envc.
	* libmisc/find_new_uid.c, libmisc/find_new_gid.c: Limit the scope
	of variable id.

2010-03-21  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Detect some
	misconfigurations of UID_MIN, UID_MAX, SYS_UID_MIN, SYS_UID_MAX (and
	the GID equivalents)

2010-03-20  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Next version will be 4.1.5.
	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2010-03-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c: Re-indent to make pmccabe happy.

2010-03-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/generate_translations.mak, man/generate_mans.mak: Fix
	distcheck. All manpages generation code shall be enclosed in
	ENABLE_REGENERATE_MAN conditions.

2010-03-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml: Do not document the features which are not
	working.
	* man/useradd.8.xml: Fix typo: -u was meant instead of -o.
	* man/useradd.8.xml: Document that the default behavior depends on
	CREATE_HOME.

2010-03-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Fix memory management insplit_groups().

2010-03-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/strtoday.c: Empty dates indicate a disabled date, this is
	not an error.

2010-03-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c, lib/commonio.c, po/POTFILES.in: Fix typos.
	* libmisc/limits.c: Removed unused variable.

2010-03-19  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Stop sorting entries when we reach the first
	NIS line.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chsh.c: Even for root, warn if an invalid shell is
	specified. Alioth#311305

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/limits.5.xml: Document the selection of the limits when
	multiple lines match the user.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c: Re-indent.
	* libmisc/limits.c: Reformat the documentation. Avoid personal
	comments.
	* man/limits.5.xml: Document the new features.

2010-03-18  Thomas Orgis  <thomas@orgis.org>

	* NEWS, libmisc/limits.c: Fix parsing of limits.
	* NEWS, libmisc/limits.c: Add support for infinite limits.
	* NEWS, libmisc/limits.c: Add support for @group syntax.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/tcbfuncs.h: Re-indent.
	* lib/tcbfuncs.h: Explicitly indicate function taking a void
	parameter.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: When exiting because of a failure, warn if an
	home directory created, but cannot be removed.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowndir.c: Re-indent.
	* libmisc/chowndir.c: Avoid assignment in comparisons.
	* libmisc/chowndir.c: Added brackets and parenthesis.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/strtoday.c: Add support for numerical dates, assuming
	they are already specified in number of days since Epoch. Return
	-2 in case of errors to support the specification of -1.
	* src/usermod.c, src/useradd.c: Adapt to the new error value of
	strtoday().
	* src/chage.c:  Remove isnum(). Adapt to the new error value of
	strtoday(). Support for numerical dates is moved to strtoday().

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Harmonize name of parameters.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Indicate which tools support TCB.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Unlock the password and shadow files when there is a
	failure to prepare the update in memory.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Only log to SYSLOG when acting on system files.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Document the sections closed by #endif
	* src/pwck.c, man/pwck.8.xml: No alternative shadow file can be
	given when USE_TCB is enabled.
	* src/pwck.c: Remove the -s option from the usage when USE_TCB is
	enabled. The option is still supported, but has no effect, as
	documented in the manpage.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Do not use pwd_file and spw_file. Always use the
	dbname() functions.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Re-indent.

2010-03-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, src/usermod.c, src/vipw.c, src/useradd.c,
	src/pwck.c, src/chage.c, lib/shadowio.c: Explicitly use the
	SHADOWTCB_FAILURE return code instead of 0 or implicit conversion
	to booleans.

2010-03-18  Paweł Hajdan, Jr.  <phajdan.jr@gentoo.org>

	* src/pwck.c: Add support for TCB.
	* src/pwck.c: Use spw_dbname() instead of spw_file since TCB
	changes from a file to another depending on the user. Also use
	pw_dbname() for consistency.

2010-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Re-indent.

2010-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/tcbfuncs.h: Added type shadowtcb_status.
	* lib/tcbfuncs.h, lib/tcbfuncs.c: Return a shadowtcb_status
	instead of an int.
	* lib/tcbfuncs.c: Do not return in OUT_OF_MEMORY.
	* lib/tcbfuncs.c: Only FreeBSD specify that the returned buffer is
	NULL in case of failure. The return value of asprintf shall be
	checked.
	* lib/tcbfuncs.c: Avoid implicit conversion of pointers or
	integers to booleans.
	* lib/tcbfuncs.c: Avoid assignments in comparisons.
	* lib/tcbfuncs.c: Do not free path before its last use.
	* lib/tcbfuncs.c: Include shadowio.h, needed for the
	spw_setdbname's prototype.
	* lib/tcbfuncs.c: Ignore fflush() return value.
	* lib/tcbfuncs.c: Avoid implicit signed to unsigned conversions.
	* lib/tcbfuncs.c: Avoid integer to char conversions.
	* lib/tcbfuncs.c: Include prototypes.h for the definition of Prog.
	* lib/tcbfuncs.c: Removed dead return.
	* lib/tcbfuncs.c: move_dir() and shadowtcb_move() need a non NULL
	stored_tcb_user.
	* lib/tcbfuncs.c: Avoid implicit int to mode_t conversion.
	* lib/tcbfuncs.c: Added brackets and parenthesis.
	* lib/tcbfuncs.c: Re-indent.

2010-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Avoid implicit conversion of pointers to
	booleans.
	* lib/commonio.c: Ignore the return value of close when a
	failure is reported.

2010-03-16  Nicolas François  <nicolas.francois@centraliens.net>

	* man/faillog.8.xml: Document the behavior in display mode of the
	-a option.
	* NEWS, man/faillog.8.xml, src/faillog.c: Extend the -a option to
	the non-display mode. This changes the default behavior of the -l,
	-m, -r, -t options when -a is not specified (restrict to existing
	users).

2010-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chage.1.xml, man/login.defs.5.xml, man/pwck.8.xml,
	man/pwconv.8.xml, man/useradd.8.xml, man/userdel.8.xml,
	man/usermod.8.xml, man/vipw.8.xml: Document the usage of the
	TCB_AUTH_GROUP, TCB_SYMLINKS, and USE_TCB configuration
	parameters.
	* man/pwconv.8.xml, man/pwck.8.xml: Document the behavior when
	USE_TCB is enabled.

2010-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* po/POTFILES.in, lib/tcbfuncs.c: Add more strings for
	translation.
	* lib/tcbfuncs.c: Indicate the name of the program in error
	messages. Avoid perror.
	* src/useradd.c: Re-indent.
	* src/useradd.c: Add more strings for translation. Indicate the
	name of the program in error messages.
	* src/userdel.c: Re-indent.
	* src/userdel.c: Add more strings for translation. Indicate the
	name of the program in error messages.

2010-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: user_newname and user_newid cannot be used to
	test if the username or ID is changed. lflg and uflg should be
	used instead.

2010-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Avoid perror. Give more verbose warnings.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/Makefile.am: Indicate that man/generate_mans.deps is
	generated.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Re-indent.
	* lib/commonio.c: Document the sections closed by #endif
	* lib/commonio.c: Added brackets.
	* lib/commonio.c: Avoid implicit conversion of integer to
	booleans.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Re-indent.
	* src/userdel.c: Added brackets.
	* src/userdel.c: Avoid implicit conversion of pointers to
	booleans.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadowio.c: Re-indent.
	* lib/shadowio.c: Added brackets and parenthesis.
	* lib/shadowio.c: Document the sections closed by #endif
	* lib/shadowio.c: Avoid negation of comparisons.
	* lib/shadowio.c: Avoid implicit conversion of integer to booleans
	and booleans to integers.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Re-indent.
	* src/useradd.c: Added brackets.
	* src/useradd.c: Avoid implicit conversion of integers to
	booleans.
	* src/useradd.c: Harmonize error messages.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Document the sections closed by #endif
	* src/vipw.c: Avoid implicit conversion of pointers or integers to
	booleans.
	* src/vipw.c: Added brackets and parenthesis.
	* src/vipw.c: Limit the definition of some variables and macros to
	the WITH_TCB scope.
	* src/vipw.c: Avoid assignment in comparisons.
	* src/vipw.c: Replace PASSWD_FILE (resp. GROUP_FILE and
	SGROUP_FILE) by pw_dbname () (resp. gr_dbname () and sgr_dbname ()).
	This is more consistent with the shadow file handling and may be
	useful to allow edition of another partition's files.


2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Re-indent.
	* src/usermod.c: Avoid implicit conversion of pointers to
	booleans.
	* src/usermod.c: Added parenthesis.

2010-03-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Only check USE_TCB if configured WITH_TCB.

2010-03-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Re-indent.
	* src/userdel.c: Avoid implicit conversion of pointers to
	booleans.
	* src/userdel.c: Document the sections closed by #endif

2010-03-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwconv.c: Only check USE_TCB if configured WITH_TCB.

2010-03-10  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Added parenthesis.

2010-02-14  Michael Bunk  <mb@computer-leipzig.com>

	* NEWS, lib/gshadow.c: Fix parsing of gshadow entries.

2010-01-30  Paweł Hajdan, Jr.  <phajdan.jr@gentoo.org>

	* NEWS: Add support for TCB.
	* lib/tcbfuncs.h, lib/tcbfuncs.c, lib/Makefile.am: New library to
	support TCB.
	* lib/prototypes, libmisc/copydir.c (remove_tree): Add boolean
	parameter remove_root.
	* configure.in: Add conditional WITH_TCB.
	* src/userdel.c, src/usermod.c: Add support for TCB. Update call to
	remove_tree().
	* src/pwconv.c, src/pwunconv.c: Should not be used with TCB enabled.
	* src/vipw.c: Add support for TCB. Update call to remove_tree().
	* src/useradd.c: Add support for TCB. Open the shadow file outside
	of open_files().
	* src/chage.c: Add support for TCB.
	* src/Makefile.am: Install passwd sgid shadow when TCB is enabled.
	* lib/getdefs.c, man/vipw.8.xml, man/login.defs.5.xml,
	man/login.defs/TCB_AUTH_GROUP.xml, man/login.defs/USE_TCB.xml,
	man/login.defs/TCB_SYMLINKS.xml, man/generate_mans.mak,
	man/generate_mans.deps, man/Makefile.am: New configuration
	parameters: TCB_AUTH_GROUP, TCB_SYMLINKS, USE_TCB.
	* lib/shadowio.c, lib/commonio.c: Add support for TCB.

2010-01-24  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/env.c: Fix sanitize_env() noslash support. This fixes
	Alioth#311740.

2010-01-24  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Do not sanitize the environment. This breaks
	--preserve-environment. This sanitation was disabled on Debian
	since quite some time with no reported issues, and sanitize_env()
	documentation agrees that it should be useless as all modern
	Unixes will handle setuid executables properly. This fixes
	Alioth#312287.

2010-01-24  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setupenv.c: Fix typo from 2009-11-01.

2010-01-24  Paweł Hajdan, Jr.  <phajdan.jr@gentoo.org>

	* configure.in: Add support for TCB in configure.in. Actual TCB
	support will follow.

2009-11-05  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmod.c: Fixed groupmod when configured with
	--enable-account-tools-setuid.

2009-11-01  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, man/login.defs.d/ENV_SUPATH.xml, libmisc/setupenv.c:
	Harmonize other paths and documentation with previous
	change.

2009-11-01  Michel Hermier  <michel.hermier@gmail.com>

	* src/su.c: Set the default ENV_SUPATH to
	/sbin:/bin:/usr/sbin:/usr/bin (i.e. PATH when no ENV_SUPATH is
	specified).

2009-10-15  Thorsten Kukuk  <kukuk@suse.de>

	* src/faillog.c, man/faillog.8.xml: Harmonize long option in code
	and documentation. Use --lock-secs instead of --lock-time.

2009-10-05  Miroslav Kure  <kurem@upcase.inf.upol.cz>

	* po/cs.po: updated to 412t

2009-09-29  Clytie Siddall  <clytie@riverland.net.au>

	* po/vi.po: updated to 412t

2009-09-27  Miroslav Kure  <kurem@upcase.inf.upol.cz>

	* po/cs.po: updated to 411t1f

2009-09-24  Christian Perrier  <bubulle@debian.org>

	* man/po/fr.po: Updated French translation to 835t99f165

2009-09-24  Clytie Siddall  <clytie@riverland.net.au>

	* po/vi.po: updated to 348t30f34u

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Avoid pre-decrement operator (--n). Add some
	comments.
	* libmisc/cleanup.c: Fix off by one in an assertion.

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Fix indentation.
	* src/su.c: Add more messages for translation.
	* src/su.c: Ignore kill() return value when sending the TERM
	signal. If it fails, a KILL should be sent anyway.

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/su.c: When su receives a signal, wait for the child to
	terminate (after sending a SIGTERM), and kill it only if it did
	not terminate by itself. No delay will be enforced if the child
	cooperates. See http://bugs.gentoo.org/282094
	* NEWS, man/su.1.xml: Document su's exit values.

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: The default value for the CREATE_MAIL_SPOOL
	variable (i.e. if CREATE_MAIL_SPOOL= is specified without any
	values) is "no", not DCREATE_MAIL_SPOOL ("CREATE_MAIL_SPOOL=").

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Avoid redefinition of SHELL. Use DSHELL instead.
	For consistency, change HOME, INACT, EXPIRE, SKEL, and
	CREATE_MAIL_SPOOL to DHOME, DINACT, DEXPIRE, DSKEL, and
	DCREATE_MAIL_SPOOL.

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Prefer #ifdef over #if.

2009-09-08  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: We do not use SETPGRP_VOID, and already assume
	that setpgrp has a void argument. Remove AC_FUNC_SETPGRP to ease
	cross compiling.

2009-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	* man/generate_translations.mak, man/generate_mans.mak,
	po/Makefile.in.in: Removing and restoring the config.xml file
	broke parallel builds. Build the manpages based on *.xml-config
	files instead of *.xml files.  The *.xml do not include config.xml
	anymore, which permits to run xml2po without needing to remove
	config.xml. The config.xml is restored in the *.xml-config files.
	* man/groupadd.8.xml: Implementation of the above.
	* man/generate_mans.deps: Updated dependencies

2009-09-07  Steve Grubb  <sgrubb@redhat.com>

	* libmisc/limits.c: Fix the format to match the unsigned long
	variable in argument.
	* libmisc/utmp.c: Fix tests. tmptty is a variable stack. ut_host
	is an array of the ut structure. None of them can be NULL.

2009-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadowmem.c: Only copy the required fields of the struct
	spwd. (start with the primitive types)
	* lib/shadowmem.c: Avoid memzero() on a possibly NULL pointer.
	* lib/groupmem.c: Only copy the required fields of the struct
	group. (start with the primitive types)
	* lib/groupmem.c: Avoid memzero() on a possibly NULL pointer.
	* lib/groupmem.c: Free gr_mem in addition to its elements.
	* lib/sgroupio.c: The struct sgrp has no primitive types to be
	copied initially.
	* lib/sgroupio.c: Avoid memzero() on a possibly NULL pointer.
	* lib/sgroupio.c: Free sg_mem and sg_add in addition to their
	elements.
	* lib/pwmem.c: Only copy the required fields of the struct
	passwd. (start with the primitive types)

2009-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgroupio.h: Harmonize splint annotations of sgr_locate()
	prototype with the one used in its definition.

2009-09-07  Steve Grubb  <sgrubb@redhat.com>

	* libmisc/copydir.c, lib/shadowmem.c, lib/groupmem.c, lib/pwmem.c:
	Fix some memory leaks.

2009-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, src/lastlog.c, src/gpasswd.c, src/newusers.c,
	src/chpasswd.c, src/groupmems.c, src/usermod.c, src/chgpasswd.c,
	src/vipw.c, src/su.c, src/useradd.c, src/groupmod.c, src/passwd.c,
	src/groupadd.c, src/chage.c, src/faillog.c, src/chsh.c: Use
	booleans for tests.
	* src/userdel.c, src/gpasswd.c, src/groupmems.c, src/usermod.c,
	src/groupmod.c, src/passwd.c: Use a break even after usage().

2009-09-05  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c, src/groupmems.c: Split the groupmems and gpasswd
	Usage string. It was changed anyway to add the --help option.

2009-09-05  Mike Frysinger  <vapier@gentoo.org>

	* NEWS, src/userdel.c, src/lastlog.c, src/gpasswd.c,
	src/newusers.c, src/chpasswd.c, src/groupmems.c, src/usermod.c,
	src/chgpasswd.c, src/vipw.c, src/su.c, src/useradd.c,
	src/groupmod.c, src/passwd.c, src/groupadd.c, src/chage.c,
	src/faillog.c, src/chsh.c: If someone uses the -h/--help options,
	the usage should not go to stderr nor should the utility exit with
	non-zero status. All of the shadow utils do just this
	unfortunately, so convert them over to sanity.
	* man/groupmems.8.xml, man/gpasswd.1.xml: Added option -h/--help.

2009-09-05  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Fixed wrong format string.
	* lib/gshadow.c: Removed declaration of unused variable.

2009-08-30  Mike Frysinger  <vapier@gentoo.org>

	* man/generate_mans.mak, man/generate_translations.mak: Provide an
	useful error message when --enable-man is not enabled and the
	translated manpages are not generated.

2009-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/ENCRYPT_METHOD.xml: Avoid using sub-lists. They
	break the groff formatting.

2009-07-24  Nicolas François  <nicolas.francois@centraliens.net>

	* po/fr.po: Fix typos, based on reviews by the Debian French
	translation team.

2009-07-24  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Prepare for the next release 4.1.4.2.
	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2009-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Fixed definition of the SHELL configuration.

2009-07-23  Nicolas François  <nicolas.francois@centraliens.net>

	* etc/login.defs: SYS_GID_MIN /SYS_UID_MIN changed from 100 to
	101. GID 100 seems to be used statically.

2009-07-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/shell.c, src/su.c: Execute the scripts with "sh -"
	rather than "sh".

2009-07-22  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in, libmisc/shell.c, libmisc/setupenv.c, src/newgrp.c,
	src/su.c: Let the system shell be configurable.

2009-07-20  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/su.c, libmisc/shell.c: Added support for shells being a
	shell script without a shebang.

2009-07-19  Jean-Louis Dupond  <info@dupondje.be>

	* po/nl.po: Fix obvious mistake in Dutch translation.

2009-07-18  Peter Vrabec  <pvrabec@redhat.com>

	* NEWS, libmisc/find_new_gid.c, libmisc/find_new_uid.c: Do not use
	getpwent / getgrent for system accounts. Trying the low-IDs with
	getpwuid / getgrgid should be more efficient on LDAP configured
	systems with many accounts.
	* NEWS, libmisc/find_new_gid.c, libmisc/find_new_uid.c: Since
	system accounts are allocated from SYS_?ID_MIN to SYS_?ID_MAX in
	reverse order, accounts are packed close to SYS_?ID_MAX if
	SYS_?ID_MIN is already used but there are still dome gaps.

2009-07-05  Piarres Beobide  <pi+debian@beobide.net>

	* po/eu.po: Updated Basque translation.

2009-06-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/fi/Makefile.am: Stop distributing the Finnish translation of
	passwd.1 (outdated).

2009-06-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pwck.8.xml: The shadow file is optional.
	* man/pwck.8.xml: Updated description of the checks. Added
	description of the shadow checks.
	* man/pwck.8.xml: Updated description of the checks.

2009-06-12  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fixed typo (forunis)

2009-06-12  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/fputsx.c: Compare the result of fgets() with the provided
	buffer instead of NULL.

2009-06-12  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/gshadow.c: Removed limitation on the length of the gshadow
	lines.
	* lib/gshadow.c: Compare the result of fgetsx() with the provided
	buffer instead of NULL.

2009-06-11  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/xgetXXbyYY.c, libmisc/xgetpwnam.c, libmisc/xgetgrnam.c,
	libmisc/xgetpwuid.c, libmisc/xgetgrgid.c, libmisc/xgetspnam.c: Do
	not limit the size of the buffer to hold the group or user
	structure. It used to be limited to 16k, which caused issues with
	groups having many users.

2009-06-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c, man/su.1.xml: The default behavior (without -p or
	--login) is to copy most of the environment variables. Revert a
	previous change and update the documentation.

2009-06-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.5.xml, man/shadow.5.xml: Document the passwd- and
	shadow- files.

2009-06-06  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/su.c: Preserve the DISPLAY and XAUTHORITY environment
	variables, even with --login. This was not the case before in the
	PAM version.

2009-06-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c, src/groupmod.c, src/groupadd.c, src/faillog.c:
	Fix typos. Take this opportunity to split the usage messages into
	smaller messages (one per option).
	* src/pwck.c: Fix typo.

2009-06-05  Petri Koistinen  <petri.koistinen@iki.fi>

	* man/passwd.1.xml: The short option for --mindays is -n, not -m.

2009-06-04  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore, man/.gitignore, src/.gitignore: Added .gitignore
	files.

2009-06-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/su.1.xml: Use <option> for the login.defs options.
	* man/su.1.xml: Improve the documentation of the su behavior
	regarding environment variables.
	* man/su.1.xml: Document that the login.defs file is used.

2009-06-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.1.xml: Document that the login.defs file is used.

2009-06-04  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/ENVIRON_FILE.xml: Document the format for
	comments.

2009-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gpasswd.1.xml: Ease the translation of the refpurpose.
	* man/gpasswd.1.xml: Fix typo, shorten sentences.

2009-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pwck.8.xml, man/grpck.8.xml: Move the SEE ALSO section at
	the end.

2009-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Make sure opened files are closed.

2009-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chpasswd.8.xml, man/grpck.8.xml, man/newgrp.1.xml,
	man/passwd.1.xml, man/sg.1.xml: Avoid a spurious comma.

2009-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: New placeholder for the next release.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* po/fr.po: Updated French translation.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Prepare the next release.
	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.1.xml: passwd -u does not reset the expiry field.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Updated some strings.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Return the exit status of the child. Thanks
	to Lionel Elie Mamane.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Added warnings for absolute symlinks which could
	be broken by rename().

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/userdel.c: Report errors to remove the user's mailbox.
	* NEWS, src/userdel.c: When USERGROUPS_ENAB is enabled, remove the
	user's group when the user was the only member. This is still not
	complete, as the user could have been specified twice in the
	members.
	* NEWS, src/userdel.c: Do not fail when -r is used and the home
	directory does not exist.

2009-05-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Added warning for relative symlinks.
	* libmisc/copydir.c (remove_tree): There is no need to check if
	the root argument exist. opendir() will report this.

2009-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/faillog.8.xml: Minor updates.

2009-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/faillog.5.xml: Split a long paragraph. Typo fixes.

2009-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gpasswd.1.xml: Minor updates.

2009-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gshadow.5.xml: Updated documentation.

2009-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml, man/userdel.8.xml, man/useradd.8.xml:
	Harmonize formatting of login.defs and default/useradd variables.
	Use an <option> tag.
	* man/usermod.8.xml: Added reference to gshadow(5).
	* man/login.defs.d/USERDEL_CMD.xml: Shorten the lines of the
	USERDEL_CMD example.

2009-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Use a boolean instead of 0.

2009-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Fixed typos.

2009-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Next version will be 4.1.4.1.

2009-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml: Added notes regarding the ownership of
	files.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupmod.8.xml: Split the -g option description into smaller
	paragraphs.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Ownership of the mailbox is also changed with
	the -u option.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml: When no passwords are provided, the password
	is disabled, not the account.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml, man/chpasswd.8.xml, man/useradd.8.xml,
	man/groupadd.8.xml, man/usermod.8.xml, man/chgpasswd.8.xml,
	man/groupmod.8.xml: Added warning: passwords set with these tools
	may not respect the password policy.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml: Fixed formatting issue.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/userdel.8.xml: Added warning for files that could remain
	owner by the removed user.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml: Fix formatting typo.

2009-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupdel.8.xml: Move the warning on filesystems checks to
	the CAVEAT section.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/GID_MAX.xml: Fixed typo. useradd was specified
	twice.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml, man/useradd.8.xml: names may also contain
	digits.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/shadow.5.xml: What is important in shadow is not the
	encryption, but that the file is not world readable.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Updated French translation. Thanks to ABBAS
	Belkacem for the login.defs update.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Split the CAVEAT section in paragraphs.
	Updated information on the user_busy check.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/userdel.8.xml: Document that -f may force the deletion of a
	busy user.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/usermod.c: Check if the user is busy when the user's
	UID, name or home directory is changed.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, libmisc/user_busy.c, libmisc/Makefile.am,
	lib/prototypes.h: Move user_busy() to libmisc/user_busy.c.
	* NEWS, libmisc/user_busy.c: On Linux, do not check if an user is
	logged in with utmp, but check if the user is running some
	processes. If not on Linux, continue to search for an utmp record,
	but make sure the process recorded in the utmp entry is still
	running.

2009-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Document the -m/--move-home option.

2009-05-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c (user_busy): Check if the process registered in
	utmp is still running. This avoids rejecting the removal of an
	user when UTMP was not updated and indicate that the user is still
	logged in.

2009-05-16  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/console.c (console): Remove the leading /dev/ from
	the tty before comparing with the lines specified by CONSOLE.
	* src/su.c: Do not remove the /dev/ prefix since it is done by
	console().

2009-05-16  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/CONSOLE.xml: Document the format of the CONSOLE
	file.

2009-05-16  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/login.c: Fix failure of non PAM enabled versions when
	an empty username is entered after a first prompt.

2009-05-16  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Added missing end of line at the end of success
	messages.

2009-05-16  sacha  <sachall@infonie.fr>

	* po/fr.po: Fixed typo in the vipw usage string.

2009-05-12  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/shell.c: Removed invalid code that executed the user's
	shell as a shell script when the direct execution of the user's
	shell failed with ENOEXEC and the user's shell has a shebang. The
	interpreter might not be the right one.  Executing the user's
	shell with sh -c might be better, but I'm not sure we should try
	harder when there is a failure. Note: the removed code was only
	included #ifndef __linux__.

2009-05-12  Nicolas François  <nicolas.francois@centraliens.net>

	* man/userdel.8.xml: The USERGROUPS_ENAB group may not be removed
	when the group is used by other users, not the user.

2009-05-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, man/login.defs.d/USERDEL_CMD.xml: Move the
	USERDEL_CMD script example from the source code to the
	documentation.

2009-05-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml: PAM enabled version: describe how passwords
	are updated and how newusers behave in case of error.

2009-05-10  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: New release will be 4.1.4.
	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2009-05-10  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Added prototype of readlink_malloc(), and
	readlink_malloc() changed to static.

2009-05-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Avoid redeclaration of root_pw.

2009-05-10  NAKANO Takeo  <nakano@webmasters.gr.jp>

	* po/ja.po: Updated Japanese translation.

2009-05-10  Jean-Luc Coulon (f5ibh)  <jean-luc.coulon@wanadoo.fr>

	* po/fr.po: Updated French translation.

2009-05-10  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Avoid PATH_MAX. On glibc, we can use realpath
	with a NULL argument.
	* src/useradd.c: Replace PATH_MAX by a fixed constant. The buffer
	was not meant as a storage for a path.
	* src/useradd.c, src/newusers.c, src/chpasswd.c: Better detection
	of fgets errors. Lines shall end with a \n, unless we reached the
	end of file.
	* libmisc/copydir.c: Avoid PATH_MAX. Support file paths with any
	length. Added readlink_malloc().

2009-05-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Warn if an user has an entry in passwd and shadow,
	and the password field in passwd is not 'x'.
	* src/grpck.c: Warn if a group has an entry in group and gshadow,
	and the password field in group is not 'x'.

2009-05-09  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/ENCRYPT_METHOD.xml,
	man/login.defs.d/MD5_CRYPT_ENAB.xml,
	man/login.defs.d/SHA_CRYPT_MIN_ROUNDS.xml: Updated note for PAM
	enabled versions. These variables are only used for group
	passwords in this case.

2009-05-09  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chpasswd.8.xml: Sorted options alphabetically.

2009-05-09  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c, src/Makefile.am: Added support for
	changing the passwords with PAM.
	* src/newusers.c: Split the usage string in smaller parts to
	allow enabling single parts.
	* man/newusers.8.xml: Indicate the options and configuration
	variables valid for PAM and non-PAM versions.
	* man/newusers.8.xml: Added pointer to /etc/pam.d/chpasswd.

2009-05-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Remove duplicate definitions of exit codes.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/non_interactive_pam_conv.c,
	libmisc/pam_pass_non_interractive.c, libmisc/Makefile.am: Renamed.
	* libmisc/pam_pass_non_interractive.c, lib/prototypes.h:
	non_interactive_password and non_interactive_pam_conv do not need
	to be externally visible.
	* libmisc/pam_pass_non_interractive.c: Added declaration of
	ni_conv.
	* libmisc/pam_pass_non_interractive.c: Only compile ifdef USE_PAM.
	* libmisc/pam_pass_non_interractive.c, lib/prototypes.h:
	Added do_pam_passwd_non_interractive().
	* src/chpasswd.c: Use do_pam_passwd_non_interractive().

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pam_pass.c: Removed comment regarding pam_misc. This is
	checked by configure.in.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.5.xml: PAM enabled chpasswd do not use any
	configuration variable from login.defs.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.1.xml: Differentiate the files used for PAM and
	non-PAM versions.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chpasswd.8.xml: Describe how chpasswd behaves in case of error.
	* man/chpasswd.8.xml: Describe the PAM enabled chpasswd behavior.
	* man/chpasswd.8.xml: Differentiate the files and configurations
	used for PAM and non-PAM versions.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: failcount does not need to be signed.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/Makefile.am: PAM enabled chpasswd now needs to be linked to
	the PAM library, even if --enable-account-tools-setuid is not
	used.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c: Added the line number when an error is reported
	instead of only the username.
	* src/chpasswd.c: PAM enabled chpasswd may change the password
	database (for the user where the password update succeeded) even
	if there were a failure for one user. Do not indicate that changes
	were ignored.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Exit immediately when unlocking a password would
	result in a passwordless account. This avoid printing a success
	message after the warning.

2009-05-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/nologin.c: Include <stdlib.h> to get EXIT_FAILURE.

2009-05-04  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Fix build failure on non-PAM enabled system
	when --without-pam is not specified.

2009-04-30  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Ignore the return values of fclose() and
	unlink() in case of failure of fopen_set_perms() or
	create_backup().
	* lib/commonio.c: Should the backup file be unlink'ed in case of
	failure of create_backup()?

2009-04-30  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getulong.c: Added splint annotations.

2009-04-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c, src/chfn.c, src/groupmems.c, src/usermod.c,
	src/userdel.c, src/chpasswd.c, src/grpck.c, src/gpasswd.c,
	src/groupdel.c, src/chgpasswd.c, src/vipw.c, src/useradd.c,
	src/su.c, src/groupmod.c, src/passwd.c, src/pwck.c,
	src/groupadd.c, src/chage.c, src/login.c, src/faillog.c,
	src/sulogin.c, src/chsh.c, src/pwconv.c: Added splint annotations.
	* src/userdel.c, src/pwconv.c, src/lastlog.c, src/grpck.c,
	src/vipw.c, src/groupmod.c, src/passwd.c, src/pwck.c, src/login.c,
	src/sulogin.c, src/usermod.c: Use return instead of exit at the
	end of main().
	* src/gpasswd.c, src/passwd.c, src/faillog.c: Use the exitcodes.h
	exit codes.
	* src/chpasswd.c: Added missing ||.
	* src/nologin.c: Do not include exitcodes.h.
	* src/nologin.c: Added brackets.
	* src/nologin.c: Avoid assignments in comparisons.

2009-04-30  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getgr_nam_gid.c, lib/get_gid.c, lib/get_pid.c,
	lib/get_uid.c: Added splint annotations.

2009-04-30  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/exitcodes.h: Define E_SUCCESS as EXIT_SUCCESS. Added FIXMEs.
	* libmisc/chowntty.c, libmisc/rlogin.c, libmisc/sub.c,
	src/newusers.c, libmisc/sulog.c, libmisc/system.c, src/logoutd.c,
	src/groups.c, src/id.c, lib/encrypt.c, libmisc/audit_help.c,
	libmisc/limits.c: Return EXIT_FAILURE instead of 1, and
	EXIT_SUCCESS instead of 0.
	* libmisc/audit_help.c: Replace an fprintf() by fputs().
	* libmisc/audit_help.c: Remove documentation of the audit_logger
	returned values. The function returns void.
	* libmisc/system.c: Only return status if waitpid succeeded.
	Return -1 otherwise.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chpasswd.c: Added support for changing the passwords
	with PAM.
	* src/chpasswd.c: Split the usage string in smaller parts to
	allow enabling single parts.
	* src/chpasswd.c: Do not set a global lock on the password files.
	This is done by PAM each time a password is updated.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Include <utmpx.h> and <utmp.h> to define
	USER_NAME_MAX_LENGTH.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Change a snprintf() to strncpy(). There are no
	format.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Harmonize status report at the end of passwd.
	Prefix the messages with "passwd: ", only indicate a password
	change if the password was actually changed, and password
	properties changed otherwise.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c, src/newusers.c: There is no need to test for 0
	after getopt_long. No options have flag != NULL.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Replace #if by #ifdef
	* libmisc/Makefile.am, lib/prototypes.h,
	libmisc/non_interactive_pam_conv.c: Added
	non_interactive_pam_conv() and non_interactive_password.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c, src/userdel.c, src/logoutd.c: Replace #if by #ifdef

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Harmonize messages.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Replace atoi() by getulong().

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.h: Replace HAVE_UTMPX_H by USE_UTMPX.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/rlogin.c: Replace atoi() by getulong().

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.c: Replace HAVE_UTMPX_H by USE_UTMPX.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chkname.c: Do not include <utmp.h> and <utmpx.h>. There
	are no more needed.

2009-04-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c: Replace strtol() by getlong().
	* libmisc/limits.c: Replace HAVE_UTMPX_H by USE_UTMPX.

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupmod.8.xml, man/usermod.8.xml, man/groupadd.8.xml,
	man/useradd.8.xml: Added note to warn about insecurity in using
	--password.
	* man/groupmod.8.xml: Removed not regarding default if --password
	is not used. This was a cut&paste from groupadd.8.xml.
	* man/passwd.1.xml: Split some paragraphs.
	* man/passwd.1.xml: Recommend other encryption methods than DES.

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Move update_utmp() after the PID or session ID
	changed in order to get more accurate data in UTMP. This also
	fixes "exec login" when login in installed setuid.

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Reuse a string and avoid an untranslated message
	"Login incorrect".

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Replace HAVE_UTMPX_H by USE_UTMPX.
	* src/login.c: Avoid name clash between global variables and the
	update_utmp() arguments.

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c, lib/commonio.c, lib/groupio.c: Added missing
	include of <assert.h>

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Replace HAVE_UTMPX_H by USE_UTMPX.
	* lib/prototypes.h, libmisc/log.c: Added splint annotations.
	* libmisc/log.c: Added SYSLOG warning when lseek fails (should not
	happen).

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/mail.c, libmisc/copydir.c: Added missing include of
	<assert.h>

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/env.c: Added assertions on the snprintf results.

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Added configure option --enable-utmpx,
	disabled by default. This defines USE_UTMPX, which should be used
	instead of HAVE_UTMPX_H.
	* libmisc/utmp.c: Replace HAVE_UTMPX_H by USE_UTMPX.
	* libmisc/utmp.c: Removed old comment on HAVE_STRUCT_UTMP_UT_ID
	and UTMPX support.

2009-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fix typo.

2009-04-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Close the databases before changing the UDI and
	GID.

2009-04-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/myname.c: Updated splint annotations.

2009-04-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Added splint annotations.
	* lib/commonio.c: old_context should be local to commonio_close(),
	not global.

2009-04-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Do not freecon strings duplicated with strdup.
	Also avoid allocation of memory.
	* src/passwd.c: Use SYSLOG instead of syslog.

2009-04-25  Miroslav Kure  <kurem@upcase.inf.upol.cz>

	* po/cs.po: Updated to 352T7f8u

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.h, lib/commonio.c: Added splint annotations.
	* lib/commonio.c: Do not assumes eptr is always notnull.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, po/pt.po: Updated Portuguese translation.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Added splint annotations.
	* libmisc/copydir.c: Added assert to help splint.
	* libmisc/copydir.c: Free allocated structures in cas of failure.
	* libmisc/copydir.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/copydir.c: Use buffers of size PATH_MAX instead of 1024
	for filenames.
	* libmisc/copydir.c: Use fchmod and fchown to change the mode of
	the opened file.
	* libmisc/copydir.c: Indicate the mode to open(), even if we chmod
	later.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Added prototypes of getulong() and get_pid().
	* lib/prototypes.h: Added splint annotations.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Use get_pid() instead of strtol.
	* lib/commonio.c: Replace an int by a size_t.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.h: Added splint annotations.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgroupio.c: Free allocated structures on failure.
	* lib/sgroupio.c: Added splint annotations.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/Makefile.am, lib/get_pid.c, lib/getulong.c: Added get_pid()
	and getulong().

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getlong.c: Do not check for NULL string but empty string.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Updated splint annotations.
	* lib/groupio.c: Added assert to help splint.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Check assumptions on snprintf().
	* src/useradd.c: Replace peror by an strerror and avoid an
	intermediate buffer.
	* src/useradd.c: Save errno between the failure and the report by
	perror/strerror.
	* src/useradd.c: Prefer xmalloc to malloc.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Remove function calls from within assert().

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/obscure.c: Change some int to size_t.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/console.c: Use a less disturbing construct for splint.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c: Parse the limits, umask, nice, maxlogin, file
	limit with getlog() / getulong(). This also means, in case of
	non-PAM enabled systems, that the umask specified on the GECOS
	fields should start with a 0 if specified in octal. (it used to be
	force to octal). Do the appropriate cast and range checking.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: In case gettimeofday() fails, get some entropy
	from the PID.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setupenv.c: Prefer snprintf to sprintf, even if a small
	context indicates no issues.
	* libmisc/setupenv.c: Avoid implicit conversion of pointers to
	booleans.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/loginprompt.c: Prefer snprintf to sprintf, even if a
	small context indicates no issues.

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Remove function calls from within assert().

2009-04-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/mail.c: Ignore the return value of puts().
	* libmisc/mail.c: Prefer snprintf to sprintf, even if a small
	context indicates no issues.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c, lib/commonio.h, lib/groupio.c, lib/groupio.h,
	lib/pwio.c, lib/pwio.h, lib/shadowio.c, lib/shadowio.h: Added
	splint annotations. The *_locate() and *_next() functions
	currently return an observer. As the structure are often modified
	by the caller, it could maybe be changed to exposed later. (and
	non-const)

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/pwauth.c: Use a boolean for wipe_clear_pass and use_skey.
	* lib/pwauth.c: Added splint annotations.
	* lib/pwauth.c: Added brackets and parenthesis.
	* lib/pwauth.c: Avoid assignments in comparisons.
	* lib/pwauth.c: Avoid implicit conversion of pointers or
	characters to booleans.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmod.c: Cast ID to ulongs and use ulong formats for IDs.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Added splint annotations.
	* src/newgrp.c: audit_buf is only used in newgrp. Make it static.
	* src/newgrp.c: Ignore the return value of fputs().
	* src/newgrp.c: Use exit(EXIT_FAILURE) instead of exit(1).

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pwdcheck.c (passwd_check): The progname is not used.
	* libmisc/pwdcheck.c: Ignore the return value of sleep().
	* libmisc/pwdcheck.c: Use exit(EXIT_FAILURE) instead of exit(1).

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setupenv.c: Avoid assignments in comparisons.
	* libmisc/setupenv.c: Added brackets and parenthesis.
	* libmisc/setupenv.c: Ignore the return value of fclose (file
	opened read-only)
	* libmisc/setupenv.c: Ignore the return value of puts().
	* libmisc/setupenv.c: Avoid implicit conversion of pointers to
	booleans.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_gid.c, libmisc/find_new_uid.c,
	libmisc/isexpired.c, src/groupadd.c, lib/pwauth.h, lib/groupmem.c,
	lib/shadowmem.c, lib/pwmem.c, lib/prototypes.h: Added splint
	annotations.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/loginprompt.c: Use exit(EXIT_FAILURE) instead of
	exit(1).
	* libmisc/loginprompt.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/loginprompt.c: Ignore return value of putc().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/env.c, libmisc/age.c: Added splint annotations.
	* libmisc/age.c: Added brackets and parenthesis.
	* libmisc/age.c: Ignore the return value of fclose (file opened
	read-only)
	* libmisc/age.c: Ignore puts() return value.
	* libmisc/age.c: Use exit(EXIT_FAILURE) instead of exit(1).
	* libmisc/age.c: Avoid assignments in comparisons.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/fputsx.c, lib/gshadow.c, lib/commonio.h: Added splint
	annotations.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/get_gid.c: gidstr should not be NULL, but the check was
	meant to make sure it is not empty.
	* lib/get_uid.c: Likewise.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.c: Added splint annotations.
	* lib/getdef.c: Ignore fputs() return value.
	* lib/getdef.c: Use EXIT_FAILURE / EXIT_SUCCESS for exit()

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Added splint annotations.
	* src/faillog.c: Cast ID to ulongs and use ulong formats for IDs.
	* src/faillog.c: Ignore fflush() return value.
	* src/faillog.c: Added parenthesis.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Ignore puts return value.
	* src/grpck.c: Avoid variable format string.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Use EXIT_FAILURE / EXIT_SUCCESS for exit()
	* src/lastlog.c: Added splint annotations.
	* src/lastlog.c: Avoid global pwent.
	* src/lastlog.c: Cast ID to ulongs and use ulong formats for IDs.
	* src/lastlog.c: Avoid assignment in comparisons.
	* src/lastlog.c: Ignore fclose() return value since the file is
	only opened for reading.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Added assertion to guide splint (and me).

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_gid.c: Use booleans instead of char fo
	used_gids.
	* libmisc/find_new_gid.c: Use getdef_ulong and cast to git_t to
	get GID values.
	* libmisc/find_new_gid.c: Use UL as a prefix for ulong values.
	* libmisc/find_new_uid.c: Likewise.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/yesno.c: Ignore the return value of puts.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/age.c: Use exit(EXIT_FAILURE) instead of exit(1).
	* libmisc/age.c: The return value of execl() is not used.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/xgetXXbyYY.c, libmisc/myname.c, libmisc/getgr_nam_gid.c,
	libmisc/salt.c, libmisc/list.c, libmisc/cleanup.c, src/login.c,
	lib/getdef.h, lib/groupio.c, lib/getlong.c, lib/gshadow_.h,
	lib/sgroupio.c, lib/shadowio.c, lib/pwio.c, lib/commonio.h,
	lib/fputsx.c, lib/prototypes.h: Added splint annotations.
	* lib/groupio.c: Avoid implicit conversion of pointers to
	booleans.
	* lib/groupio.c: Free allocated buffers in case of failure.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Added splint definitions to replace <locale.h>

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c, libmisc/age.c, libmisc/shell.c, lib/groupio.c,
	lib/groupio.h, lib/sgroupio.c, lib/sgroupio.h, lib/shadowio.c,
	lib/pwio.c, lib/commonio.c, lib/shadowio.h, lib/pwio.h,
	lib/commonio.h, lib/prototypes.h: Added splint annotations.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Only set ut_time and ut_tv if gettimeofday()
	succeeds.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Fix the check for empty host in prepare_utmp()
	and prepare_utmpx().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: The ut argument of prepare_utmp() and
	prepare_utmpx () might be NULL. ut_id needs to be forged in that
	case.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Removed old documentation of setutmp().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Use xmalloc() rather than malloc().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: The name returned by ttyame() needs to be copied
	locally.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Added assert()s for NULL (or ! NULL) username, and
	pwd. This helps splint.
	* src/login.c: Added splint annotations.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: After login_prompt(), do not check for unset
	username, but for empty username.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Define USER_NAME_MAX_LENGTH, based on utmp and
	default to 32.
	* libmisc/chkname.c: Use USER_NAME_MAX_LENGTH.
	* src/login.c: Use USER_NAME_MAX_LENGTH instead of the default 32.
	username also needs to be bigger than USER_NAME_MAX_LENGTH because
	it has to be nul-terminated.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Use xmalloc() instead of malloc().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Ignore the return value of puts(), fputs(),
	strftime().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: timeout, delay, and retries should be unsigned.
	* src/login.c: Ignore the return value of alarm() and sleep().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: If we cannot get the terminal configuration, do not
	change the terminal configuration. setup_tty() is just a best
	effort configuration of the terminal.
	* src/login.c: Ignore failures when setting the terminal
	configuration.
	* src/login.c: Fail if the ERASECHAR or KILLCHAR configurations
	are not compatible with a cc_t type.

2009-04-22  Paul Szabo  <psz@maths.usyd.edu.au>

	* src/login.c: utent might be NULL after get_current_utmp().

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Removed temp_shell. No more used.
	* src/login.c: lastlog is only used #ifndef USE_PAM
	* src/login.c: Rename lastlog to ll to avoid name clash with the
	lastlog type.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Added update_utmp() to group the prepare_utmp and
	setutmp (and the utmpx versions).

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Do not include netdb.h. gethostbyname() is no more
	called from within login.c. Also UT_ADDR does not exist anymore.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Check if login is run with effective root
	privileges. This should be more helpful to users than a failure to
	find an utmp entry or failure to access a file.

2009-04-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Reworked. Get rid of Linux specific stuff. Get rid
	of global utent/utxent variables. Only reuse the ut_id and maybe
	the ut_host fields from utmp.
	* lib/prototypes.h, libmisc/utmp.c: Removed checkutmp(),
	setutmp(), setutmpx().
	* lib/prototypes.h, libmisc/utmp.c: Added get_current_utmp(),
	prepare_utmp(), prepare_utmpx(), setutmp(), setutmpx().
	* libmisc/utmp.c (is_my_tty): Only compare the name of the utmp
	line with ttyname(). (No stat of the two terminals to compare the
	devices).
	* libmisc/utmp.c: Use getaddrinfo() to get the address of the
	host.
	* configure.in: Check for getaddrinfo().
	* configure.in: Use AC_CHECK_MEMBERS to check for the existence of
	fields in the utmp/utmpx structures.
	* configure.in: Reject systems with utmpx support but no ut_id
	field in utmp. This could be fixed later if needed.
	* src/login.c: Use the new utmp functions. This also simplifies
	the failtmp() handling.
	* src/login.c: passwd_free() renamed to pw_free() and
	shadow_free() renamed to spw_free()

2009-04-21  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Enable --enable-account-tools-setuid by
	default for PAM builds, as it used to be before the introduction
	of this option.

2009-04-21  Nicolas François  <nicolas.francois@centraliens.net>

	* etc/pam.d/Makefile.am: Distribute all pam.d files, even if
	ACCT_TOOLS_SETUID is not enabled.

2009-04-21  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadowmem.c: Added spw_free().
	* lib/shadowio.c: Use spw_free() for shadow_free().
	* lib/groupmem.c: Added gr_free().
	* lib/groupio.c: Use gr_free() for group_free().
	* lib/pwmem.c: Include define.h before prototypes.h
	* lib/pwmem.c: Added pw_free().
	* lib/pwio.c: Use pw_free() for passwd_free().
	* lib/sgroupio.c: Added sgr_free().
	* lib/sgroupio.c: Use sgr_free() for gshadow_free().
	* lib/prototypes.h: Added gr_free(), pw_free(), sgr_free(),
	spw_free().

2009-04-21  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/shell.c: Add brackets and parenthesis.
	* libmisc/shell.c: Avoid assignments in comparisons.
	* libmisc/shell.c: Re-indent.

2009-04-21  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Added MIN and MAX macros.
	* libmisc/salt.c: Removed MIN and MAX macros.

2009-04-20  Sven Joachim  <svenjoac@gmx.de>

	* NEWS, src/lastlog.c: Fix regression causing empty reports.
	Get the size of the file before printing the entries.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Get rid of pwent. pwd is sufficient as long as it
	is always coming from xgetpwnam. There is no need to copy pwd to
	pwent, this was not a good idea anyway as the strings from pwd
	were not duplicated.
	* src/login.c: Always free the pwd and spwd structure when we
	retrieve a new one. This will clear the password of the previous
	user from the memory.
	* src/login.c: user_passwd is used to keep point to the password
	of the user being authenticated.
	* src/login.c: (non PAM) Fail if the user's entry cannot be found
	after the user updated her password (if expire() requested an
	update).
	* src/login.c: If the user does not exist on the system, there is
	no need to build a pwd structure (with shell).

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: ttytype already checks for TTYTYPE_FILE and TERM.
	Just call ttytype.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Open the PAM session before pam_setcred and before
	initgroups. This is more consistent with rfc86.0.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Added helper functions get_pam_user() and
	get_failent_user().

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Added parameter to check_nologin. This will help
	getting rid of the global pwent variable.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Added comments.
	* src/login.c: Close the user and group files before dropping root
	privileges.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: We do not need to keep the old umask. Discard the
	umask() return value.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/hushed.c, lib/prototypes.h, src/login.c: Change the
	hushed() prototype to take a username instead of a passwd
	structure in argument. The passwd entry is retrieved withing
	hushed().

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setugid.c: Updated comments.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.h, libmisc/failure.c, src/login.c: Added
	username as first parameter of failtmp to avoid issues with
	non-null terminated ut_user, unavailability of ut_user, incomplete
	username (that should not happen currently).

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/ttytype.c: Add brackets and parenthesis.
	* libmisc/ttytype.c: Avoid assignments in comparisons.

2009-04-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/pwio.c, lib/shadowio.c, lib/groupio.c, lib/sgroupio.c: Fill
	the password fields with zeros before they are freed.

2009-04-19  Changwoo Ryu  <cwryu@debian.org>

	* po/ko.po: Updated Korean translation.

2009-04-19  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/login.c: Also check if the authentication token of the
	user has to be updated in case the user was already authenticated.

2009-04-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: fflg is already restricted to root. Move
	pam_acct_mgmt(), in case of fflg, earlier. This is equivalent and
	simplifies the code.

2009-04-19  Paul Szabo  <psz@maths.usyd.edu.au>

	* libmisc/utmp.c: Always call endutent or endutxent when setutent
	or setutxent were used.

2009-04-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Added comment to make sure PAM_RHOST or PAM_TTY do
	not get set to unsanitized values.

2009-04-17  Paul Szabo  <psz@maths.usyd.edu.au>

	* NEWS, src/login.c: Do not trust the current utmp entry's ut_line
	to set PAM_TTY.
	* libmisc/utmp.c: Do not trust the current utmp entry's ut_line.
	Always set ut_line based on ttyname(0).

2009-04-15  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.
	* configure.in: Updated version number.

2009-04-15  Peter Vrabec  <pvrabec@redhat.com>

	* NEWS, src/userdel.c: Fixed SE Linux support. semanage should be
	called at the end.
	* src/useradd.c: Always call selinux_update_mapping() (i.e.
	semanage), not only when -Z is used.

2009-04-15  Peter Vrabec  <pvrabec@redhat.com>

	* NEWS, srclib/getlong.c: Fix parsing of octal numbers.

2009-04-15  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/login.c: Fix segfault when no user is provided on the
	command line.

2009-04-15  Nicolas François  <nicolas.francois@centraliens.net>

	* README, libmisc/system.c: Was contributed by Dan Walsh.

2009-04-15  Nicolas François  <nicolas.francois@centraliens.net>

	* NEW, src/vipw.c: SE Linux: Set the default context to the
	context of the file being edited. This ensures that the backup
	file inherit from the file's context.

2009-04-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: There are no default values for --inactive
	and --gid. If the options are no provided, the original values are
	not changed.

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* po/shadow.pot, man/po/shadow-man-pages.pot: Regenerated.
	* po/*.po, man/po/*.po: Updated PO files.

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: If there are no root account, or if the root account
	has an UID != 0, default to the first UID 0 account.

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Restore the echoctl, echoke, onclr flags to the
	terminal termio flags. Reset echoprt, noflsh, tostop. This
	behavior seems to have change by mistake in earlier releases
	(4.0.8, for no obvious reason).

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Fix the count of failures before login exits in
	case of PAM enabled configurations.

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.1.xml: Document that passwd uses PAM to authenticate
	and change passwords on PAM-enabled builds.

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Add more information to the mkdir and chown
	failure messages.

2009-04-12  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Updated some login.defs entries. Thanks to
	Belkacem Abbas.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/MAX_MEMBERS_PER_GROUP.xml,
	man/login.defs.d/CONSOLE_GROUPS.xml: Fix typos.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/es/Makefile.am: Disable the distribution of Spanish
	manpages. They are outdated. Please contact
	pkg-shadow-devel@lists.alioth.debian.org if you wish to provide
	updates.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c, src/useraddd.c: Fix the usage string so that it
	does not change depending on the configure option. Use a format.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Fix the usage of the unused macro.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/age.c, src/expiry.c, src/login.c: A
	shadow entry is now sufficient for agecheck. Remove the first
	passwd entry parameter.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c, src/usermod.c: Only call selinux_update_mapping()
	if Zflg is set.
	* src/userdel.c: Rename argv to args to avoid nameclash with the
	main() parameters.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getgr_nam_gid.c: Added support for NULL argument.
	* libmisc/chowntty.c: Reuse getgr_nam_gid(), and get rid of atol().

2009-04-11  Peter Vrabec  <pvrabec@redhat.com>

	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: For system
	accounts, return the first unused ID, starting from the max value.
	This could be useful later to increase the static IDs range.

2009-04-11  Peter Vrabec  <pvrabec@redhat.com>

	* NEWS, src/useradd.c, man/useradd.8.xml: add -Z option to map
	SELinux user for user's login.
	* NEWS, src/usermod.c, man/usermod.8.xml: Likewise.
	* libmisc/system.c, libmisc/Makefile.am, lib/prototypes.h: Added
	safe_system(). Used to run semanage.
	* lib/prototypes.h, libmisc/copydir.c: Make a
	selinux_file_context() an extern function.
	* libmisc/copydir.c: Reset SELinux to create files with default
	contexts at the end of copy_tree().
	* NEWS, src/userdel.c: Delete the SELinux user mapping for user's
	login.

2009-04-11  Peter Vrabec  <pvrabec@redhat.com>

	* src/useradd.c (get_defaults): Close the default file after the
	default values were read.

2009-04-11  Christian Perrier  <bubulle@debian.org>

	* po/sk.po: Slovak translation updated. Thanks to Ivan Masár

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/Makefile.am, lib/prototypes.h: Added sgetspent.c.

2009-04-11  Nicolas François  <nicolas.francois@centraliens.net>

	* po/POTFILES.in: Added missing files. Sorted.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.c: Use getlong instead of strtol/strtoul.
	* libmisc/getlong, lib/getlong.c, libmisc/Makefile.am,
	lib/Makefile.am: getlong.c moved from libmisc/ to lib/.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadow.c: Replace strtol() by getlong(). Also detect more
	issues in a numerical shadow entry field.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetspent.c: Only compile ifndef HAVE_SGETSPENT

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetspent.c: Replace strtol() by getlong(). Also detect more
	issues in a numerical shadow entry field.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: More strtol() replaced by getlong().
	* src/chage.c: expdays renamed to expdate. It is a date, even if
	expressed in a number of days since Jan 1, 1970.
	* src/chage.c: Likewise: lastday renamed to lstchgdate. Also fix
	the --lastday documentation.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: pwd_to_spwd() should be declared if USE_PAM is
	NOT defined.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Replace getnumber() by getlong(). This permits to
	get rid of another strtol().

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getlong.c: Include both <stdlib.h> and <errno.h> needed
	for strtol and errno, and do not include "defines.h" (not needed).

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c, src/usermod.c, libmisc/getgr_nam_gid.c,
	libmisc/Makefile.am, lib/prototypes.h: Moved getgr_nam_gid() from
	src/useradd.c and src/usermod.c to libmisc/getgr_nam_gid.c.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Re-indent.
	* src/useradd.c: Use getlong instead of get_number.
	* src/useradd.c: Get rid of strtol.
	* src/useradd.c: Provide better warning in case a default GROUP or
	INACTIVE value is not valid in /etc/default/useradd.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Re-indent.
	* src/usermod.c: Specifying a inactivity value < -1 is not valid.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Prepare the next 4.1.3 release.
	* po/*.po, man/po/*.po: Updated PO files.

2009-04-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/addgrps.c: restrict add_groups() to
	ifndef USE_PAM.
	* lib/prototypes.h: Remove the declaration of add_cons_grps(). The
	function does not exist.
	* libmisc/setugid.c libmisc/age.c (setup_uid_gid): is_console is
	never set ifndef USE_PAM. Change the prototype of setup_uid_gid()
	when USE_PAM is not defined. This permits to remove add_groups
	from PAM builds.  setup_uid_gid is already subject to
	HAVE_INITGROUPS.
	* libmisc/pwd2spwd.c (pwd_to_spwd): pwd_to_spwd() is not used in
	PAM builds.

2009-04-05  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: do_update_age is only used ifndef USE_PAM. Make it
	more explicit.

2009-04-05  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Set errno to 0 before calling strtol.

2009-04-05  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/isexpired.c: If there are no shadow entry, there is no
	need to convert the password entry to a shadow entry. The password
	is valid.

2009-04-05  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Split some paragraphs into smaller units.

2009-04-05  Nicolas François  <nicolas.francois@centraliens.net>

	* man/shadow.5.xml: Rewrote to mention the meaning of special
	values.

2009-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pwd2spwd.c, src/chpasswd.c, src/newusers.c,
	src/passwd.c, src/pwck.c, src/pwconv.c, src/useradd.c,
	src/usermod.c: On Jan 01, 1970, do not set the sp_lstchg field to
	0 (which means that the password shall be changed during the next
	login), but use -1 (password aging disabled).
	* src/passwd.c: Do not check sp_min if sp_lstchg is null or -1.

2009-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: When no shadow entry exist, the default sp_lstchg
	value should be -1 (no aging) rather than 0 (password must be
	changed).
	* src/chage.c: For password expiration and inactivity, indicate
	that the password must be changed when sp_lstchg is null rather
	than indicating that expiration and inactivity are not enabled.

2009-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/isexpired.c: Document the isexpired return value.

2009-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/age.c: Return a specific message when sp_lstchg is null.

2009-03-21  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetpwent.c, lib/sgetgrent.c: Use get_uid and get_gid to
	validate the UIDs or GIDs instead of atoi/strtol.

2009-03-21  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/get_gid.c, libmisc/get_uid.c, libmisc/Makefile.am,
	lib/get_gid.c, lib/get_uid.c, lib/Makefile.am: get_uid.c and
	get_gid.c moved from libmisc/ to lib/.

2009-03-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c (check_members): When a member is removed, do not
	increase the index.
	* src/grpck.c: Fix typo in messages and comments.

2009-03-21  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Call fsync before closing the backup file. This
	ensures that the backup file is flushed to the storage medium.
	* src/useradd.c: Likewise for the default file, faillog, lastlog,
	and mail spool.
	* src/usermod.c: Likewise for the faillog and lastlog file.
	* src/vipw.c: Likewise for the backup file.
	* libmisc/sulog.c: Likewise for the su log.

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmod.c: Embed gshadow related cleanup in #ifdef
	SHADOWGRP.

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: get_number() replaced by getlong().
	* src/usermod.c: When the user is renamed, make sure we do not
	override an user with the same name (in passwd or shadow).

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: log_gpasswd_success_gshadow is in the cleanup
	stack only when the shadow group file is present.

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/userdel.c: Make sure the user exists in the shadow
	database before calling spw_remove().
	* NEWS, src/userdel.c: When the user's group is removed, make sure
	the group is in the gshadow database before calling sgr_remove().
	* src/userdel.c: Improve warning's wording.

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/cleanup.c: Fix del_cleanup. The arguments were not
	desynchronized with the cleanup functions.
	* libmisc/cleanup.c: cleanup_function_args is an array of void
	pointer, not strings.

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_gid.c: Fix find_new_gid() the current group
	database was not taken into account.

2009-03-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/addgrps.c: Fix compilation warnings.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/Makefile.in.in: xml2po cannot exclude one entity for
	expansion. Make sure config.xml does not exist when the POT file
	is created in order to keep the configurations in the POT file
	* man/generate_translations.mak: make sure config.xml does not
	exist neither when the translated XML is generated. Add the
	missing %config; (strip out by xml2po). and make sure config.xml
	is present when the translated manpage is generated.
	* man/generate_mans.mak: config.xml is needed for the generation
	of manpages (already in the .deps for the English manpages, but
	needed for the translations).
	* man/Makefile.am: Added missing CREATE_HOME.xml.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* etc/login.defs: Added note for PAM enabled configurations.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/Makefile.am: Compute the dependencies for building the
	manpages.
	* man/generate_mans.deps: Added Makefile dependency rules.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/addgrps.c: Fix warnings.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Added missing space.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/lastlog.8.xml: Document that there might be entries, for
	deleted users, that are not displayed.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chgpasswd.8.xml, man/chpasswd.8.xml: Fix the man page in
	case SHA crypt is not supported.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/vipw.8.xml: MAX_MEMBERS_PER_GROUP is not used by vipw and
	vigr.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.5.xml: Indicate that sg uses the same variables
	as newgrp.
	* man/login.defs.5.xml: vipw does not use any variable.
	* man/login.defs.5.xml: In PAM enabled configurations, login still
	uses some login.defs variables.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: use a <replaceable> instead of a
	<emphasis remap='I'>.

2009-03-14  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml: Document the behavior of newusers for each
	field.
	* man/newusers.8.xml: Do not add the note on PAM on non-PAM
	enabled configurations.

2009-03-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Make sure the SHA related variables are not
	compiled when disabled at configuration time.
	* src/newusers.c: Added FIXME
	* src/chpasswd.c: Make sure the SHA related variables is not
	compiled when disabled at configuration time.
	* src/chgpasswd.c: Make sure the SHA related variables is not
	compiled when disabled at configuration time.
	* src/chgpasswd.c: Fix the test for getlong() failure.
	* src/useradd.c, man/useradd.8.xml: Added long name for the -l
	option: --no-log-init.
	* src/faillog.c: Added support for the specification of a range of
	users with -u.
	* src/faillog.c: Do not call print_one() for users which do not
	exist.
	* src/faillog.c: Make sure the user's entry is not outside the
	faillog file and initialize the faillog structure in that case.
	* src/faillog.c: Move print_one() closer to print().
	* src/faillog.c: reset(), setmax(), set_locktime() can also change
	entries of user which do not exist.
	* src/faillog.c: reset(), setmax() and set_locktime() shall not
	create entries for users which have no entries if the value has to
	be set to 0.
	* src/faillog.c: reset(), setmax() and set_locktime(): better
	handling of users whose entry is outside the faillog file.
	* src/faillog.c: Improved option handling. Options can now be
	specified in any order.
	* src/faillog.c: Improved warnings when options are not
	compatible or when the faillog cannot be open with the right mode.
	* src/faillog.c: Only fstat the faillog file once.
	* man/faillog.8.xml: Improved documentation.

2009-03-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Remove the documentation of options from the
	main() documentation. It will always be outdated here.

2009-03-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: lastlog variable renamed to ll to avoid name
	clash with the structure.
	* src/lastlog.c: check the offset in print_one() so that it is
	used for the display of one entry or a set of entries.
	* src/lastlog.c: Do not loop over the whole user database when -u
	is used with a single user.
	* src/lastlog.c: Check the size of the lastlog file so that we
	can identify failures to read.

2009-03-13  Mike Frysinger  <vapier@gentoo.org>

	* libmisc/salt.c: Removed l64a prototype. The libc declaration is
	non static, but the internal definition is static.

2009-03-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: log_gpasswd_success_gshadow only exists ifdef
	SHADOWGRP.

2009-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getlong.c: Make sure the getlong argument is not empty.
	* libmisc/get_gid.c, libmisc/get_uid.c, libmisc/Makefile.am,
	lib/prototypes.h: Added get_uid() and get_gid() to parse user and
	group IDs.
	* NEWS, src/grpck.c, src/pwck.c: Issue a warning if an ID is set
	to -1.
	* NEWS, src/newusers.c, src/usermod.c, src/useradd.c,
	src/groupmod.c, src/groupadd.c: Make sure no user or group are
	created with an ID set to -1.

2009-03-07  Nicolas François  <nicolas.francois@centraliens.net>

	* contrib/adduser-old.c, contrib/adduser.c: Do not use the target
	of snprintf in one of the format's parameters.

2009-03-07  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupmems.8.xml: groupmems does not create new user.

2009-03-03  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, po/LINGUAS, po/kk.po: Added Kazakh translation. Thanks to
	Timur Birsh <taem@linukz.org>.

2009-02-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Avoid calling
	getgrent()/getpwent() after they return NULL. This caused LDAP to
	return at the beginning of the group/user entries.

2009-01-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/nologin.8.xml: Fix typo (HYSTORY -> HISTORY).

2009-01-26  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/gpasswd.c: Only report success to audit and syslog
	when the changes are committed to the system. Do not log failure
	for on-memory changes to audit or syslog. Make sure failures and
	inconsistencies will be reported in case of unexpected failures
	(e.g. malloc failures). Only specify an audit message if it is not
	implicitly implied by the type argument. Removed fail_exit
	(replaced by atexit(do_cleanups)). Log failures in case of
	permission denied.

2009-01-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/UMASK.xml: Indicate how UMASK is used and
	limitations.
	* man/limits.5.xml: Remove space before an end of tag.
	* man/useradd.8.xml, man/login.defs.d/CREATE_HOME.xml,
	man/login.defs.5.xml: Document the CREATE_HOME variable.
	* etc/login.defs: Improve the documentation of UMASK.

2009-01-06  Sebastian Rick Rijkers  <srrijkers@gmail.com>

	* NEWS, src/su.c: Preserve COLORTERM in addition to TERM when su
	is called with the -l option.

2008-12-23  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chkname.c: Use a bool when possible instead of integers.
	* libmisc/chkname.c: Add brackets and parenthesis.

2008-12-23  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml, configure.in, man/config.xml.in: Use the
	real group name length limit in the documentation.

2008-12-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/Makefile.am: Only link with the needed library. When
	compiled with PAM support, chfn, chsh, login, newgrp, passwd, and
	su do not need the libcrypt library.

2008-12-23  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/cleanup_group.c: Fix compilation when compiled without
	shadow group support.

2008-12-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupdel.c: Remove the fail_exit () declaration.

2008-12-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Fix the support for usernames with arbitrary
	length.

2008-12-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c, src/groupdel.c, src/groupmod.c: Re-indent.
	* src/groupmod.c: Do not add the command synopsis to the main ()
	documentation. This avoids outdated information.
	* libmisc/chkname.c: Remove outdated comments.

2008-12-22  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/audit_help.c: Added audit_logger_message() to log
	messages not related to an account.
	* lib/prototypes.h, libmisc/cleanup.c, libmisc/cleanup_group.c,
	libmisc/cleanup_user.c, libmisc/Makefile.am: Added stack of
	cleanup functions to be executed on exit.
	* NEWS, src/groupadd.c, src/groupdel.c, src/groupmod.c: Only
	report success to audit and syslog when the changes are committed
	to the system. Do not log failure for on-memory changes to audit
	or syslog. Make sure failures and inconsistencies will be reported
	in case of unexpected failures (e.g. malloc failures). Only
	specify an audit message if it is not implicitly implied by the
	type argument. Removed fail_exit (replaced by atexit(do_cleanups)).

2008-12-15  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/gpasswd.c: Added support usernames with arbitrary
	length.

2008-11-27  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Fix the "$enable_acct_tools_setuid" = "yes" test.

2008-11-27  Mike Frysinger  <vapier@gentoo.org>

	* NEWS, configure.in, libmisc/chkname.c: make group max length a
	configure option.  The configure behavior encoded is:
	<no option> -> default of 16 (like today);
	--with-group-name-max-length -> default of 16;
	--without-group-name-max-length -> no max length;
	--with-group-name-max-length=n > max is set to n.

2008-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: (!USE_PAM) Provide visible information indicating that
	su was denied.

2008-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* man/su.1.xml: Fix the su synopsis. username is referenced in the
	manpage, not LOGIN.
	* man/ja/login.1: Fix the path of the utmp and wtmp files.

2008-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowntty.c: Improve the logs for fchown and fchmod
	failures.
	* libmisc/chowntty.c: Only closelog() when failure cause an exit.

2008-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/chowntty.c: Fix a race condition that could lead to
	gaining ownership or changing mode of arbitrary files.
	* NEWS, libmisc/chowntty.c, libmisc/utmp.c: is_my_tty() moved from
	utmp.c to chowntty.c. checkutmp() now only uses an existing utmp
	entry if the pid matches and ut_line matches with the current tty.
	This fixes a possible DOS when entries can be forged in the utmp
	file.
	* libmisc/chowntty.c, src/login.c, lib/prototypes.h: Remove the
	tty argument from chown_tty. chown_tty always changes stdin and
	does not need this argument anymore.

2008-10-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gshadow.5.xml, man/shadow.5.xml, man/passwd.5.xml,
	man/grpck.8.xml: Sorted SEE ALSO references.
	* man/gshadow.5.xml: Added reference to grpck(8) and grpconv(8).
	* man/pwck.8.xml: Added reference to grpck(8).
	* man/shadow.5.xml: Added reference to pwck(8).
	* man/passwd.5.xml: Added reference to pwck(8).
	* man/grpck.8.xml: Added reference to pwck(8).

2008-10-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/*.xml, man/login.defs.d/*.xml: Added copyright and licence
	header.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Always check the return value of the pam_* APIs.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Use a dynamic buffer for usernames.
	* src/login.c: Copy the name of the user authenticated by PAM to
	username. This simplify later logging (avoid USE_PAM
	conditional).
	* src/login.c: Check that no username is specified with -r.
	* src/login.c: Make sure a username is specified with -f.
	* src/login.c: Explicitly tag the end of the #ifdef RLOGIN
	sections.
	* src/login.c: Erase the username later since it it used for the
	fake password check (in case of empty password).
	* src/login.c, man/login.1.xml: the username is not an optional
	parameter of -f. Fix the getopt optstring, remove the parsing of
	username in the -f processing block, and remove unnecessary checks
	(username cannot be parsed twice anymore), better documentation of
	the synopsis.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Existence of pam_user was already checked. pwd was
	already copied to pwent. Remove duplicated code.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: check_flags() renamed process_flags(). All flag
	processing blocs moved to process_flags().

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/logoutd.c, src/userdel.c: Re-indent. This helps pmccabe.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Add missing closing }. This was probably never
	noticed because UT_ADDR is never defined.
	* src/login.c: Re-indent.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Do not mix USE_PAM and !USE_PAM code.

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Use failent_user to log to audit. username is the
	caller, not the user login tries to authenticate.
	* src/login.c: Use pwd->pw_name instead of pwd->pw_uid. This might
	be more precise (name must be unique, uid might not be).

2008-09-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.1.xml: passwd cannot change the full name of the
	user, the user's login shell; but it can change the account or
	password validity period. Thanks to Reuben Thomas.

2008-09-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Added missing declaration of Mflg.
	* src/pwck.c: Only unlock files if they were locked before (e.g.
	not in read-only mode).
	* src/pwck.c: Quote the username in error messages (harmonization
	with other messages).
	* libmisc/find_new_gid.c: Fixed typo (s/grp->gr_gid/group_id/).
	* libmisc/find_new_gid.c: Likewise.

2008-09-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setugid.c, src/login_nopam.c, src/suauth.c,
	lib/getdef.c: Replace the %m format string by strerror(). This
	avoids errno to be reset between the system call error and the
	report function.

2008-09-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Ignore the return value of umask() when the mask
	is set to the old value.

2008-09-11  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, etc/login.defs: New CREATE_HOME variable to tell useradd
	to create a home directory for new users.
	* src/useradd.c, man/useradd.8.xml: New -M/--no-create-home option
	and CREATE_HOME usage. System accounts are not impacted by
	CREATE_HOME.
	* man/useradd.8.xml: Indicate that a new group is created by
	default.
	* src/useradd.c: Removed TODO item (moved to the TODO file).

2008-09-11  Miroslav Kuře  <kurem@debian.cz>

	* po/cs.po: Updated Czech translation.

2008-09-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/USERGROUPS_ENAB.xml: Fix typo: new <para> tag
	before the previous one is closed. This caused a missng
	explanation for USERGROUPS_ENAB.

2008-09-11  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml: Remove the list of (short) options from the
	SYNOPSIS. Replaced with [options] for consistency with other tools
	and maintainability.

2008-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	From RedHat's patch shadow-4.1.2-sysAccountDownhill.patch
	Thanks to Peter Vrabec.
	* NEWS, libmisc/find_new_gid.c, libmisc/find_new_uid.c: Build an
	index of used IDs to avoid a database request for each id in the
	allowed range (when the highest allowed ID is already used).
	This speedups the addition of users or groups when the highest
	allowed ID is already used. The additional memory usage of the
	tools should be acceptable when UID_MAX/SYS_UID_MAX are set to a
	reasonable number.

2008-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Fix the dependency of ACCT_TOOLS_SETUID on
	USE_PAM. Build failed with --without-libpam.

2008-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c, configure.in: Check for the presence of
	st_mtim and st_mtimensec, as for st_atim and st_atimensec.
	* libmisc/copydir.c: Call utimes() after closing the file.

2008-09-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Document the long options in the usage.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Added configure --enable-account-tools-setuid (default) /
	--disable-account-tools-setuid options. This permits to disable
	the PAM authentication of the caller for chage, chgpasswd,
	chpasswd, groupadd, groupdel, groupmod, newusers, useradd,
	userdel, and usermod.  This authentication is not necessary when
	these tools are not installed setuid root.
	* configure.in: Added option --enable-account-tools-setuid to
	enable/disable the usage of PAM to authenticate the callers of
	account management tools: chage, chgpasswd, chpasswd, groupadd,
	groupdel, groupmod, useradd, userdel, usermod.
	* src/Makefile.am: Do not link the above tools with libpam if
	account-tools-setuid is disabled.
	* src/userdel.c, src/newusers.c, src/chpasswd.c, src/usermod.c,
	src/groupdel.c, src/chgpasswd.c, src/useradd.c, src/groupmod.c,
	src/groupadd.c, src/chage.c: Implement ACCT_TOOLS_SETUID
	(--enable-account-tools-setuid).
	* etc/pam.d/Makefile.am: Install the pam service file for the
	above tools only when needed.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/tz.c: tz() is only used when USE_PAM is not defined.
	* lib/prototypes.h: Indicate functions whose presence depends on
	the USE_PAM flag.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Call open_files() and close_files().
	* src/groupmems.c: Always call check_perms(), which takes care of
	checking if --list is used.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/obscure.c: Compare characters to '\0', not NULL.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Do not include <config.h>. This complicate
	undefining some configuration macros when the file is included
	multiple times.
	* libmisc/xgetXXbyYY.c, libmisc/xgetpwnam.c, libmisc/xgetpwuid.c,
	libmisc/xgetgrgid.c, libmisc/xgetgrnam.c, libmisc/xgetspnam.c:
	Include <config.h> from teh compiled C file, not the included
	getXXbyYY.c.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, src/newusers.c, src/chpasswd.c, src/chfn.c,
	src/groupmems.c, src/usermod.c, src/groupdel.c, src/chgpasswd.c,
	src/useradd.c, src/groupmod.c, src/groupadd.c, src/chage.c,
	src/chsh.c: Simplify the PAM error handling. Do not keep the pamh
	handle, but terminate the PAM transaction as soon as possible if
	there are no PAM session opened. If the username cannot be
	determined, report it as such (not a PAM authentication failure).
	* src/useradd.c, src/userdel.c, src/usermod.c: It is no more
	needed to initialize retval to PAM_SUCCESS.

2008-09-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c, src/userdel.c, src/grpck.c, src/gpasswd.c,
	src/newusers.c, src/pwconv.c, src/chpasswd.c, src/logoutd.c,
	src/chfn.c, src/groupmems.c, src/usermod.c, src/pwunconv.c,
	src/expiry.c, src/groupdel.c, src/chgpasswd.c, src/useradd.c,
	src/su.c, src/groupmod.c, src/passwd.c, src/pwck.c,
	src/groupadd.c, src/chage.c, src/login.c, src/grpconv.c,
	src/groups.c, src/grpunconv.c, src/chsh.c: Prog is now global (not
	static to the file) so that it can be used by the helper functions
	of libmisc.
	* lib/prototypes.h: Added extern char *Prog.
	* libmisc/find_new_gid.c, libmisc/find_new_uid.c: Indicate the
	program name with the warning.

2008-09-05  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Check if AUDIT_ADD_USER, AUDIT_DEL_USER,
	AUDIT_ADD_GROUP, and AUDIT_DEL_GROUP are defined in <libaudit.h>.

2008-09-04  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Fix comment of lflg: it is also used for faillog.

2008-09-04  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmems.c, man/groupmems.8.xml: Document the long
	options.

2008-09-03  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/audit_help.c: Define new type
	shadow_audit_result for the result argument of audit_logger().
	This permits stronger type checking and a better readability of
	the results (SHADOW_AUDIT_FAILURE/SHADOW_AUDIT_SUCCESS constants).
	* src/groupadd.c, src/groupdel.c, src/useradd.c, src/userdel.c:
	Use the SHADOW_AUDIT_FAILURE/SHADOW_AUDIT_SUCCESS results instead
	of 0 or 1 in audit_logger().

2008-09-03  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Log failures to remove the mailbox to syslog and
	audit.
	* src/userdel.c: Log successful removal of home directory to audit
	only in case of success.
	* src/userdel.c: Move the audit log of failure to remove the home
	directory before the call to function that may exit.
	* src/userdel.c: Document that errors is only used to count errors
	during the removal of the home directory.

2008-09-03  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Log errors to syslog in grp_update() since
	changes have started to be reported to syslog.
	* src/userdel.c: Fix some result parameters sent to
	audit_logger().

2008-09-02  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Following changes from a patch contributed by Steve Grubb
	<sgrubb@redhat.com>
	* src/groupadd.c: Log to audit with type AUDIT_ADD_GROUP instead
	of AUDIT_USER_CHAUTHTOK.
	* src/groupdel.c: Log to audit with type AUDIT_DEL_GROUP instead
	of AUDIT_USER_CHAUTHTOK.
	* src/useradd.c: Log to audit with type AUDIT_ADD_USER /
	AUDIT_ADD_GROUP / AUDIT_USYS_CONFIG instead of
	AUDIT_USER_CHAUTHTOK.
	* src/useradd.c: Add missing logs to audit.
	* src/userdel.c: Log to audit with type AUDIT_DEL_USER /
	AUDIT_DEL_GROUP instead of AUDIT_USER_CHAUTHTOK.
	* src/userdel.c: Add missing logs to audit.

2008-08-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Remove duplicated gr_open().

2008-08-30  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml: Document the /etc/default/useradd variables.
	* man/useradd.8.xml: Fix the documentation of the GROUP variable
	(and -g/--gid option).
	* man/useradd.8.xml: Document that -o is only valid with -u

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* shadow.spec.in: Fix the source (new FTP).

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Add brackets and parenthesis.
	* src/su.c: Avoid implicit conversion of pointers to booleans.

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/list.c: Remove historical comment.
	* libmisc/list.c: Added assertions for non NULL parameters.

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwconv.c, src/pwunconv.c: Fail if unexpected parameters are
	provided.

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Add brackets and parenthesis.
	* src/passwd.c: Avoid implicit conversion of pointers to booleans.
	* src/passwd.c: Avoid assignments in comparisons.

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmems.c, man/groupmems.8.xml: Added support for
	shadow groups.
	* src/groupmems.c: Use fail_exit() instead of exit().

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: The grp structure returned by gr_locate is a
	const. Duplicate this structure before working on it.
	* src/groupmems.c: Do not fail and do not display warnings if a
	close failure happens with the --list option. (Files are opened
	read-only).
	* src/groupmems.c: Avoid mixed declarations and code.

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Replace the 'valid' variable by is_valid to avoid
	clashes with the valid() function.

2008-08-29  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/obscure.c: Add brackets and parenthesis.
	* libmisc/obscure.c: Avoid implicit conversion of pointers / chars to
	booleans.
	* libmisc/obscure.c: Simplify the list of if.

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Fix a typo in the Usage string.

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpconv.c, src/groups.c: Name the parameters in the
	prototypes of the static functions.
	* src/grpconv.c, src/grpunconv.c, src/logoutd.c: Fail if
	unexpected parameters are provided.
	* src/grpconv.c, src/grpunconv.c: Indicate that argc is not used
	in the no SHADOWGRP version.

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c, src/chpasswd.c: Removed variable ok, which is
	no more used.

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: Fix the format for long integers (from %ul to %lu).

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Mark the line and host arguments of setutmp() as
	not used in the __linux__ version.

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/nscd.c: Avoid redefinition of _GNU_SOURCE.

2008-08-28  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Indentation fix.
	* configure.in, src/login.c: Do not use HAVE_PAM_FAIL_DELAY, but
	HAS_PAM_FAIL_DELAY, to avoid a redefinition with Linux PAM.

2008-08-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Added functions add_user(), remove_user(), and
	purge_members() to ease the support of gshadow.

2008-08-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/expiry.c: Use Basename for Prog.
	* src/expiry.c: Added missing OPENLOG.

2008-08-27  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/nscd.c: Make sure the file is not empty when configured
	without nscd support.

2008-08-27  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Remove the USE_NSCD AM_CONDITIONAL (USE_NSCD is
	not used in any Makefile.am).
	* configure.in: Make sure posix_spawn is present when configured
	with nscd support.

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupmem.c, lib/pwmem.c, lib/shadowmem.c: Added brackets and
	parenthesis.
	* lib/groupmem.c, lib/pwmem.c, lib/shadowmem.c: Avoid assignments
	in comparisons.

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/mail.c: Added brackets and parenthesis.
	* libmisc/mail.c: Avoid assignments in comparisons.

2008-08-26  Tobias Poschwatta  <tp@fonz.de>

	* NEWS: Added support for uclibc.
	* configure.in, libmisc/copydir.c: futimes() and lutimes() are not
	standard. Check if they are implemented before using them. Do not
	set the time of links if lutimes() does not exist, and use
	utimes() as a replacement for futimes().
	* configure.in, lib/nscd.h, lib/nscd.c: Added --with-nscd and
	--without-nscd flags to support systems without nscd.
	* lib/groupio.h, lib/prototypes.h, lib/pwio.h, lib/sgetgrent.c:
	Include <sys/types.h> before <pwd.h> and <grp.h>. It is necessary
	for the definition of uid_t and gid_t.
	* lib/pwmem.c: do not include <pwd.h>, "pwio.h" is sufficient
	here.
	* configure.in: Check if the stat structure has a st_atim or
	st_atimensec field.
	* libmisc/copydir.c: Conditionally use the stat's st_atim and
	st_atimensec fields.

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Handle the options alphabetically.

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: When removing an user, check if deluser is on
	the list, not adduser. This fixes a segmentation fault for every
	call of groupmems -d.
	* libmisc/list.c: Add assertions to help identifying these issues.
	* libmisc/list.c: Avoid implicit conversion of pointers to
	booleans.

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmems.c: Use the "groupmems" PAM service name
	instead of "groupmod".

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c: Merge some translated messages.
	* src/groupmems.c, src/groupadd.c, src/gpasswd.c, src/chsh.c,
	src/chfn.c: Harmonize *_update() failure messages.
	* src/groupmems.c: Harmonize gr_close() failure messages.
	* src/newgrp.c: Harmonize "unknown GID" messages.
	* src/newusers.c: Move the pwd declaration to a inner block scope.

2008-08-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Harmonize some error messages.
	* src/userdel.c: Add log to syslog when the mail file could not be
	removed.
	* src/userdel.c: Give more context an error message (merge with
	perror()).
	* src/usermod.c: Harmonize some error messages.

2008-08-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Check the return value of gr_update().
	* src/chage.c, src/chfn.c, src/chgpasswd.c, src/chpasswd.c,
	src/chsh.c, src/gpasswd.c, src/groupadd.c, src/groupmems.c,
	src/groupmod.c, src/grpck.c, src/grpconv.c, src/grpunconv.c,
	src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c,
	src/useradd.c, src/userdel.c, src/usermod.c: Harmonize the error
	message sent to stderr in case of *_update () failure.
	* src/chage.c, src/chsh.c, src/groupadd.c, src/passwd.c: Do not
	log to syslog when pw_update() or spw_update() fail.
	* src/newusers.c: Do not log specific error message to stderr when
	sgr_update() fails.
	* src/pwconv.c: Remove duplicated definition of Prog.

2008-08-25  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c, src/chsh.c, src/expiry.c, src/gpasswd.c,
	src/newgrp.c, src/passwd.c, src/su.c: Use the same stderr and
	syslog warnings when the username cannot be determined.
	* src/newgrp.c: Reuse the same stderr message for groups which do
	not exist in the system.

2008-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Log errors while *_close to syslog.

2008-08-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpconv.c: Use Basename for the definition of Prog. Prog
	needs a file visibility.
	* src/grpunconv.c: Likewise.

2008-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c: Do not exit on pw_unlock failures.
	* src/grpconv.c, src/grpunconv.c, src/pwconv.c, src/pwunconv.c,
	src/vipw.c: Open syslog with the right identification name.
	* src/vipw.c: Log unlock errors to syslog.
	* src/vipw.c: Log edits to syslog.
	* src/chage.c, src/chfn.c, src/chsh.c, src/gpasswd.c,
	src/groupadd.c, src/groupdel.c, src/groupmod.c, src/grpconv.c,
	src/grpunconv.c, src/passwd.c, src/pwck.c, src/pwunconv.c,
	src/useradd.c, src/usermod.c: Harmonize the syslog levels. Failure
	to close or unlock are errors. Failure to open files are warnings.

2008-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Open syslog with the right identification name.
	* src/newusers.c: Mark the files as locked only if they are really
	locked (i.e. if shadow is not enabled, the files are not locked).

2008-08-20  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/gpasswd.c: Use getopt_long instead of getopt. Added
	support for long options --add (-a), --delete (-d),
	--remove-password (-r), --restrict (-R), --administrators (-A),
	and --members (-M)
	* man/gpasswd.1.xml: Document the new long options.
	* src/gpasswd.c: The sgrp structure is only used if SHADOWGRP is
	defined.

2008-08-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Added function fail_exit(). Check failure to unlock
	files. Report errors to stderr and syslog, but continue.
	* src/grpconv.c: Check failure to unlock files. Report errors to
	stderr and syslog, but continue.

2008-08-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Check failure to unlock files. Report errors to
	stderr and syslog, but continue.

2008-08-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c, src/chgpasswd.c, src/chpasswd.c, src/gpasswd.c,
	src/groupadd.c, src/groupdel.c, src/groupmems.c, src/groupmod.c,
	src/grpconv.c, src/grpunconv.c, src/newusers.c, src/pwconv.c,
	src/pwunconv.c, src/useradd.c, src/userdel.c: Harmonize the name
	of the variables keeping the lock status, to match the shadow
	library prefixes.

2008-08-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c, src/chgpasswd.c, src/chpasswd.c, src/chsh.c,
	src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmems.c,
	src/groupmod.c, src/grpck.c, src/grpconv.c, src/grpunconv.c,
	src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c,
	src/pwunconv.c, src/useradd.c, src/userdel.c, src/usermod.c: In
	case of a lock failure, indicate to the user that she can try
	again later. Do not log to syslog.

2008-08-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/passwd.c: For compatibility with other passwd version,
	the --lock an --unlock options do not lock or unlock the user
	account anymore.  They only lock or unlock the user's password.
	* man/passwd.1.xml: Document above change. Document how an account
	can be locked and what a password lock means.

2008-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml: Fix the regular expression for group policy.
	The final $ character is optional.
	* man/groupadd.8.xml: Likewise.
	* man/groupadd.8.xml: Indicate the maximum size of usernames.

2008-08-15  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/pl.po: Fix typo in the Polish translation (see
	http://bugs.debian.org/491460)

2008-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pl/Makefile.am: Do not build the Polish translation of
	login.1 and su.1 (not enough translated). See
	http://bugs.debian.org/491460

2008-08-13  Nicolas François  <nicolas.francois@centraliens.net>

	* man/shadow.5.xml: Fix typo. The password must be changed before
	the maximum number of days, not after.

2008-08-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Harmonize the unlock failure messages.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Added fail_exit().
	* src/pwck.c: Report failure to unlock files to stderr and
	syslog.
	* src/pwck.c: Report failure to sort to stderr, and exit with
	E_CANTSORT.
	* man/pwck.8.xml: Document return code 6 (E_CANTSORT).

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Report failures to remove files to stderr.
	* src/vipw.c: Report failures to unlock files to stderr.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmems.c: Added syslog support.
	* src/groupmems.c: members() renamed display_members() to
	avoid name clash with its members argument.
	* src/groupmems.c: Report failure to unlock to syslog.
	* src/groupmems.c: Harmonize error messages.
	* src/groupmems.c: Report failures to write the new group file to
	syslog (gr_close() failure).
	* src/groupmems.c: Don't use fail_exit for non-failure exit.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chsh.c: Added fail_exit().
	* src/chsh.c: Use fail_exit() instead of exit(), this avoid
	calling closelog() every times.
	* src/chsh.c: Ignore the return value or pam_end().
	* src/chsh.c: Simplify the PAM error handling.
	* src/chsh.c: Report failure to unlock files to stderr and
	syslog.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c: Added fail_exit().
	* src/chpasswd.c: Added support for syslog.
	* src/chpasswd.c: Report failure to unlock files to stderr and
	syslog.
	* src/chpasswd.c: Simplify the PAM error handling.
	* src/chpasswd.c: Report failure during *_close() to syslog.
	* src/chpasswd.c: Ignore the return value or pam_end().

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c: Added fail_exit().
	* src/chgpasswd.c: Added support for syslog.
	* src/chgpasswd.c: Report failure to unlock files to stderr and
	syslog.
	* src/chgpasswd.c: Simplify the PAM error handling.
	* src/chgpasswd.c: Report failure during *_close() to syslog.
	* src/chgpasswd.c: Ignore the return value or pam_end().

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Report failure to remove entries from group or
	gshadow to stderr.
	* src/userdel.c: Fail in case of failure during the write of a
	user or group database. Report errors to syslog.
	* src/userdel.c: Do not unlock non locked files.
	* src/userdel.c: Report failure to unlock the passwd or shadow
	file to stderr and syslog.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Report failure to unlock the passwd or shadow
	file to stderr and syslog.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Report failure to unlock files to stderr and
	syslog.

2008-08-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Report failure to unlock files to stderr and
	syslog.
	* src/newusers.c: In case of error when files are open or closed,
	indicate the failing file.
	* src/newusers.c: Do not try to unlock the files manually since
	this is done in fail_exit.

2008-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: Report failure to unlock the passwd or shadow file
	to stderr and syslog.

2008-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwconv.c: Report failure to unlock the passwd or shadow file
	to stderr and syslog.
	* src/pwconv.c: Report failure to chmod the backup file.

2008-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpunconv.c: Report failure to unlock the group or gshadow
	files to stderr and syslog.

2008-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c: Added fail_exit(). Check if the passwd file is
	locked. Report failures to unlock to stderr and syslog.
	* src/chfn.c: Is case of failure, use fail_exit() rather than
	exit().
	* src/chfn.c: Ignore the return value of pam_end().

2008-08-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c, lib/groupio.h, lib/pwio.c, lib/pwio.h,
	lib/sgroupio.c, lib/sgroupio.h, lib/shadowio.c, lib/shadowio.h:
	Added *_dbname() functions to retrieve the name of the databases.
	* lib/groupio.c, lib/groupio.h, lib/pwio.c, lib/pwio.h,
	lib/sgroupio.c, lib/sgroupio.h, lib/shadowio.c, lib/shadowio.h:
	*_name() functions renamed *setname().
	* src/grpck.c, src/pwck.c: Likewise.
	* lib/groupio.h, lib/pwio.h, lib/sgroupio.h, lib/shadowio.h: Added
	the name of the arguments to the prototypes.
	* src/chage, src/chfn.c, src/chgpasswd.c, src/chpasswd.c,
	src/chsh.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c,
	src/groupmod.c, src/grpck.c, src/grpconv.c, src/grpunconv.c,
	src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c,
	src/pwunconv.c, src/useradd.c, src/userdel.c, src/usermod.c:
	Harmonize the error & syslog messages in case of failure of the
	*_lock(), *_open(), *_close(), *_unlock(), *_remove() functions.
	* src/chgpasswd.c, src/chpasswd.c, src/usermod.c: Avoid
	capitalized messages.
	* src/chpasswd.c, src/useradd.c, src/usermod.c: Harmonize messages
	in case of inexistent entries.
	* src/usermod.c:  Harmonize messages in case of already existing
	entries.
	* src/newusers.c, src/useradd.c: Simplify PAM error handling.
	* src/useradd.c: Report failures to unlock files (stderr, syslog,
	and audit). But do not fail (continue).
	* src/useradd.c (open_files): Do not report to syslog & audit
	failures to lock or open the databases. This might be harmless,
	and the logs were not already informed that a change was
	requested.
	* src/usermod.c: It's not the account which is unlocked, but its
	password.

2008-08-02  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: Harmonize error & syslog messages.
	* src/groupadd.c: Add logging to syslog & audit on lock/unlock
	failures.
	* src/groupadd.c: Only call gr_unlock() and sgr_unlock() in the
	group or gshadow files were previously locked.
	* src/groupadd.c: Make sure failures are reported to syslog/audit
	after the change is mentioned.
	* src/groupmod.c: Harmonize error & syslog messages.
	* src/groupmod.c: Add logging to syslog & audit on lock/unlock
	failures.
	* src/groupmod.c: Make sure issues are reported to syslog or audit
	after the change is mentioned.
	* src/groupdel.c: Harmonize error & syslog messages.
	* src/groupdel.c: Add logging to syslog & audit on lock/unlock
	failures.
	* src/groupdel.c: Only call gr_unlock() and sgr_unlock() in the
	group or gshadow files were previously locked.
	* src/groupdel.c: Simplify the handling of PAM errors.

2008-08-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Harmonize error & syslog messages.
	* src/gpasswd.c: Warn and log to syslog and audit when group or
	gshadow cannot be unlocked, but do not fail.

2008-08-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c, src/chsh.c, src/groupdel.c, src/groupmems.c,
	src/groupmod.c, src/grpck.c, src/login.c, src/logoutd.c,
	src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c,
	src/suauth.c, src/useradd.c, src/userdel.c, src/usermod.c,
	src/vipw.c: Complete the switch from the `' quotation style to ''.
	Do it also in SYSLOG messages. Quote some parameters. All this
	permits to merge some messages.

2008-07-30  Lukáš Kuklínek  <lkukline@redhat.com>

	* src/groupmems.c: Only check if the adduser user exists when an
	user is specified with -a.

2008-07-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Fix the groupmems' usage message. The -D option
	is in fact -p.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Replace an if test by an else.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Ignore the return value of fputs().

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c (whoami): Make sure usr and grp are not NULL
	before dereferencing them.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Use xstrdup() rather than strdup().

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Add parenthesis.
	* src/groupmems.c: Avoid implicit conversion of pointers / chars to
	booleans.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmems.c: Allow everybody to list the users of a group.
	This information is publicly available in /etc/group.
	* NEWS, src/groupmems.c: Open /etc/group read only for the -l option.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupmems.8.xml: Sort options alphabetically.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c (check_perms): Simplify. Always call pam_end()
	at the end of the authentication.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Add fail_exit() to remove the group lock file
	in case of failure. Replace the calls to exit() by fail_exit().

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Reduce the number of checks. Isolate the
	parameters setting and permissions checking.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Add functions process_flags() and check_perms()
	from code of main().
	* src/groupmems.c: Harmonize the failure message in case of PAM
	failure with the other programs.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Remove isgroup(), which always returns TRUE.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Reuse the functions from libmisc/list.c to deal
	with user lists. addtogroup() was broken when realloc() move the
	memory area.
	* src/groupmems.c: Report failures with the name of the program.

2008-07-27  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: EXIT_READ_GROUP changed to EXIT_INVALID_GROUP.
	* src/groupmems.c: EXIT_INVALID_USERNAME changed to EXIT_INVALID_USER.

2008-07-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Really use booleans.
	* src/groupmems.c: Change isroot() to a macro that returns a
	boolean.

2008-07-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Make sure the booleans are defined before using
	them.

2008-07-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Added Prog global variable to indicate the name
	of the program in error messages.

2008-07-22  Lukáš Kuklínek  <lkukline@redhat.com>

	* NEWS, src/groupmems.c: Check if the user added to group actually
	exist. RedHat bug #455603
	* NEWS, src/groupmems.c: Check if the group exists in the group
	local database (/etc/group). RedHat bug #456088

2008-07-22  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Fix getrange prototype.

2008-07-21  Seraphim Mellos  <mellos@ceid.upatras.gr>

	* README, NEWS, configure.in, lib/pam_defs.h, src/login.c: Add
	support for OpenPAM.

2008-07-12  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: Ignore the return value of pam_end() before exiting.
	* src/chage.c: Ignore return values of strftime(), snprintf(),
	puts(), printf(), and fputs().
	* src/chage.c: Check the return value of asctime().

2008-07-12  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/gshadow.c: Avoid assignments in comparison.

2008-07-12  Nicolas François  <nicolas.francois@centraliens.net>

	* ChangeLog, NEWS, src/login.c: Re-inject the changes from 4.1.2.1.

2008-07-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Do not call usr_update() if it will have no
	effects. This avoid checking if the user exists in the local passwd
	file if not necessary, and thus allow to add LDAP users to local
	groups. (The user is already checked against the system
	configuration with getpwnam()). Thanks to Dan Kopecek.

2008-07-11  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Split update_files() into update_lastlog() and
	update_faillog(). Report errors (but don't fail) if the file
	exist, but open(), lseek(), read(), write(), or close() fails.
	* src/usermod.c: Add brackets and parenthesis.
	* src/usermod.c: Ignore the return value of pam_end() before
	exiting.
	* src/usermod.c: Ignore the return value of strftime(),
	snprintf(), and puts().
	* src/usermod.c: Check the return value of gmtime() and asctime(),
	and output the raw time_t on failures.

2008-07-11  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setugid.c: Add brackets.

2008-06-17  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/env.c: Avoid implicit conversion of pointers / chars to
	booleans.
	* libmisc/env.c: Add brackets and parenthesis.
	* libmisc/env.c: Ignore the return value of puts() and fputs().
	* libmisc/env.c: Avoid multi-statements lines.

2008-06-17  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Avoid implicit conversion of pointers / chars to
	booleans.
	* libmisc/utmp.c: Add brackets and parenthesis.
	* libmisc/utmp.c: Exit with the EXIT_FAILURE status code in case
	of failure.
	* libmisc/utmp.c: Avoid assignments in comparisons.
	* lib/prototypes.h, libmisc/utmp.c: Change setutmp()'s prototype
	to return an int because pututline() and pututxline() may fail.

2008-06-17  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/audit_help.c: Added one string for translation.
	* po/POTFILES.in: Added libmisc/audit_help.c,
	libmisc/find_new_gid.c, libmisc/find_new_uid.c, libmisc/getlong.c,
	libmisc/getrange.c, libmisc/xgetXXbyYY.c, and libmisc/yesno.c.
	Removed libmisc/find_new_ids.c

2008-06-16  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: If the faillog file exist, warn in case of
	failure when open(), lssek(), write() or close() fails when the
	new user's faillog entry is reset.
	* src/useradd.c: Ditto for the lastlog entry.

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c: Add brackets and parenthesis.
	* libmisc/limits.c: Avoid implicit conversion of pointers /
	integers to booleans.
	* libmisc/limits.c: Ignore the return value of umask(). We will
	never return to the original umask.
	* libmisc/limits.c: Avoid multi-statements lines.
	* libmisc/limits.c: Added default to a switch(). Report invalid
	limit strings to syslog.
	* libmisc/limits.c: Ignore the return value of fclose().
	/etc/limits is open read-only.
	* libmisc/limits.c: Ignore the return value of fputs() and
	sleep().
	* libmisc/limits.c: Check the return value of nice() and
	set_filesize_limit(), and report errors to syslog.

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/ulimit.c, lib/prototypes.h: Return failures of
	set_filesize_limit(). Change the prototype to return an int
	instead of void.

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.c: Try to close the open file if a failure
	occured during lseek(), read() or write().

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/log.c: Check return values. If lseek() failed, avoid
	reading or writing at an unspecified location. Log to syslog in
	case of failure.
	* libmisc/log.c: Use the right casts.

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_ids.c, libmisc/find_new_gid.c,
	libmisc/find_new_uid.c, libmisc/Makefile.am, lib/prototypes.h:
	Split find_new_ids.c into find_new_gid.c and find_new_uid.c to
	ease the description of login.defs variables in the different
	tools.

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.c: Ignore the return value of strftime() and
	printf().
	* libmisc/failure.c: Fix syslog call. The UID is not available.
	User the username specified in the utmp/utmpx entry.

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Avoid implicit conversion of pointers to
	booleans.
	* lib/defines.h: Ignore return values of setlocale() except the
	first call.
	* lib/defines.h: Fix a splint observer warning by using an
	intermediate variable (old_locale).

2008-06-15  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.c: Check return values. If lseek() failed, avoid
	reading or writing at an unspecified location. Log to syslog in
	case of failure when reading a faillog entry or writing in
	faillog or btmp.
	* libmisc/failure.c: Check if the file exist before opening it.
	* libmisc/failure.c: Log failures of open() and close() when
	necessary.

2008-06-14  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Add the getrange() prototype.
	* lib/prototypes.h: Fix the valid_field() prototype (does not
	return an bool).
	* lib/prototypes.h: Fix the valid() prototype (it does return a
	bool).

2008-06-14  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.c: Fix the getdef_ulong() prototype.
	* lib/getdef.h: Fix the getdef_ulong() prototype.

2008-06-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Use getrange to parse the range of users.
	* src/lastlog.c: umin and umax do not need to be signed long. Use
	an unsigned long which might be needed to parse a GID or UID. Add
	the has_umin and has_umax to replace the -1 values.
	* src/lastlog.c: Cast dates to time_t.
	* src/lastlog.c: Prefix lastlog errors with "lastlog: ".

2008-06-14  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getlong.c: Reset errno before calling strtol().
	Otherwise, errno could be already set to ERANGE.

2008-06-14  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/Makefile.am, libmisc/getrange.c: Added function to parse
	a range (useful for lastlog).

2008-06-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chsh.c: <signal.h> is not needed.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Define AUDIT_NO_ID to (unsigned int) -1. This
	value should be used when the ID should not be considered.
	* lib/prototypes.h: Fix the prototype of do_rlogin() according to
	earlier changes.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadow.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of spwd.sp_flag.
	* lib/shadow.c: Add brackets.
	* lib/shadow.c: Avoid implicit conversion of pointers to
	booleans.
	* lib/shadow.c: The size argument of fgets is an int, not a
	size_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: len should be typed ssize_t as it is the return
	of read(), and is compared to 0. Cast to size_t when necessary.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_ids.c: Use getdef_ulong to retrieve UIDs/GIDs
	from login.defs. Type constants to long integers.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/gshadow.c: Use a bool when possible instead of int integers.
	* lib/gshadow.c: Remove __setsgNIS() -never used).
	* lib/gshadow.c: Avoid multi-statements lines.
	* lib/gshadow.c: Avoid assignments in comparisons.
	* lib/gshadow.c: ptr[nelem] is a string. Initialize it to NULL
	instead of '\0'.
	* lib/gshadow.c: Add brackets and parenthesis.
	* lib/gshadow.c: The size argument of strncpy is a size_t and the
	size argument of fgets is an int.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Add brackets.
	* lib/groupio.c: Make sure malloc receives a size_t.
	* lib/groupio.c: Avoid multi-statements lines.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetspent.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of spwd.sp_flag.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.h, lib/getdef.c: Add getdef_ulong().
	* lib/getdef.c: Added TODOs because of lack of error checking.
	* lib/getdef.c: The size argument of fgets is an int, not a
	size_t.
	* lib/getdef.c: Avoid multi-statements lines.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/id.c: Make sure malloc receives a size_t.
	* src/id.c: Use a %lu format and cast group and user IDs to
	unsigned long integers.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/sulogin.c: Ignore the return value of signal().

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groups.c: sys_ngroups is only used when HAVE_GETGROUPS is
	defined.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Ignore return value of time() when use with a
	non NULL argument.
	* src/faillog.c: Use a %lu format and cast number of days to
	unsigned long integers.
	* src/faillog.c: Cast dates to time_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Ignore the return value of signal().
	* src/login.c: Use a %lu format and cast group and user IDs to
	unsigned long integers.
	* src/login.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: Add the arguments' names in the functions
	prototypes.
	* src/chage.c: The ID argument of audit_logger is an unsigned
	int. Use AUDIT_NO_ID instead of -1.
	* src/chage.c: print_date() received a time_t.
	* src/chage.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of spwent.sp_flag.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: The ID argument of audit_logger is an unsigned
	int. Use AUDIT_NO_ID instead of -1.
	* src/groupadd.c: Cast the parsed GID/UID to a gid_t/uid_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Use a %lu format and cast group and user IDs to
	unsigned long integers.
	* src/pwck.c: Cast number of days to a long integer.
	* src/pwck.c: Use the SCALE macro instead of (24L * 3600L)
	for the values to be set in /etc/shadow.
	* src/pwck.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of spent.sp_flag.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Ignore return value of time() when use with a
	non NULL argument.
	* src/passwd.c: Cast number of days to a long integer.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmod.c: The ID argument of audit_logger is an unsigned
	int. Use AUDIT_NO_ID instead of -1.
	* src/groupmod.c:  Use a %lu format and cast group and user IDs to
	unsigned long integers.
	* src/groupmod.c: Cast the parsed GID/UID to a gid_t/uid_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: The ID argument of audit_logger is an unsigned
	int. Use AUDIT_NO_ID instead of -1.
	* src/useradd.c: Cast the parsed GID/UID to a gid_t/uid_t.
	* src/useradd.c: The size argument of fgets is an int, not a
	size_t.
	* src/useradd.c: Cast number of days to a long integer.
	* src/useradd.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of spent.sp_flag.
	* src/useradd.c: Use a %lu format and cast group and user IDs to
	unsigned long integers.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: fork() and waitpid() return a pid_t, not an int.
	* src/su.c: Add brackets and parenthesis.
	* src/su.c: Ignore the return value of signal().

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupdel.c: The ID argument of audit_logger is an unsigned
	int. Use AUDIT_NO_ID instead of -1.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/expiry.c: Ignore the return value of signal().

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Fix the check for GID/UID validity.
	* src/newusers.c: Comment why we use both getgrgid() and
	gr_locate_gid().
	* src/newusers.c: Cast the parsed GID/UID to a gid_t/uid_t.
	* src/newusers.c: Cast the number of days to a long integer.
	* src/newusers.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of spent.sp_flag.
	* src/newusers.c: The size argument of fgets is an int, not a
	size_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Cast dates to time_t, and number of days to a
	long integer.
	* src/usermod.c: Cast UIDs and GIDs to uid_t and gid_t after
	checking the ranges.
	* src/usermod.c: The ID argument of audit_logger is an unsigned
	int.
	* src/usermod.c: read() returns a ssize_t.
	* src/usermod.c: Cast the return value of malloc and make sure it
	receives a size_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/logoutd.c: Ignore return value of time() when use with a
	non NULL argument.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwconv.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of sp.sp_flag.
	* src/pwconv.c: Cast number of days to a long integer.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: The ID argument of audit_logger is an unsigned
	int.
	* src/gpasswd.c: Ignore the return value of signal(). The signal
	handlers are only changed for the last steps of gpasswd, and there
	is no need to restore them.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: The ID argument of audit_logger is an unsigned
	int.
	* src/userdel.c: fork() and wait() return a pid_t, not an int.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Use a %lu format and cast group and user IDs to
	unsigned long integers.
	* src/newgrp.c: The ID argument of audit_logger is an unsigned
	int.
	* src/newgrp.c: Ignore the return value of signal() (the signal
	handlers are assumed to be the default one and are restored
	later).
	* src/newgrp.c: Do not checl if a pid_t is < 0, check if equal
	to (pid_t)-1.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/isexpired.c: Cast number of days to a long integer.
	* libmisc/isexpired.c: Add brackets and parenthesis.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Do not specify a size of arrays in the
	prototypes.
	* libmisc/copydir.c: Use a size_t for the length of strings.
	* libmisc/copydir.c: Cast the return value of malloc().
	* libmisc/copydir.c: The size argument of write() is a size_t.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pwd2spwd.c: Cast number of days to a long integer.
	* libmisc/pwd2spwd.c: Use SHADOW_SP_FLAG_UNSET for the initial
	value of sp.sp_flag.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Include <config.h> since it uses the macro that
	might be defined in this header file.
	* lib/defines.h: Prefer checking if HAVE_LOCALE_H or ENABLE_NLS
	are defined (rather than set to non 0).
	* lib/defines.h: The dummy implementations of bindtextdomain() and
	textdomain() should return a pointer. Return NULL instead of
	/* empty */
	* lib/defines.h: Define SHADOW_SP_FLAG_UNSET, to be used for the
	initialization of sp_flag field of the shadow structures.
	* lib/defines.h: Define LC_ALL, needed even if HAVE_LOCALE_H is
	not defined.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/sulog.c: Ignore the return value of umask() when the
	mask is restored.
	* libmisc/sulog.c: Add brackets.
	* libmisc/sulog.c: Ignore return value of time() when use with a
	non NULL argument.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/log.c: Avoid assignments in comparisons.
	* libmisc/log.c: Add brackets and parenthesis.
	* libmisc/log.c: read() returns a ssize_t (note size_t).
	* libmisc/log.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/log.c: Ignore return value of time() when use with a
	non NULL argument.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/strtoday.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/strtoday.c: Add brackets and parenthesis.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Use a size_t for the size of strings instead of
	unsigned int.
	* libmisc/salt.c: Add brackets and parenthesis.
	* libmisc/salt.c: Avoid assignments in comparisons.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/age.c: fork() and wait() return a pid_t, not an int.
	* libmisc/age.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/age.c: Avoid assignments in comparisons.
	* libmisc/age.c: Ignore the return value of printf(), puts(),
	fputs() and fflush().
	* libmisc/age.c: Add brackets and parenthesis.
	* libmisc/age.c: Cast the return value of time() to long and
	converted to a date.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/rlogin.c: The size argument of read() is a size_t.
	Propagate this time to the callers (the get_remote_string() and
	do_rlogin() functions).
	* libmisc/rlogin.c: Add brackets and parenthesis.
	* libmisc/rlogin.c: Avoid multi-statements lines.
	* libmisc/rlogin.c: Avoid assignments in comparisons.
	* libmisc/rlogin.c: Avoid implicit conversion of pointers to
	booleans.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.c: Avoid assignments in comparisons.
	* libmisc/failure.c: read() returns a ssize_t.
	* libmisc/failure.c: Add brackets and parenthesis.
	* libmisc/failure.c: Ignore return value of time() when use with a
	non NULL argument.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowntty.c: Avoid assignments in comparisons.
	* libmisc/chowntty.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/chowntty.c: Add brackets and parenthesis.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/audit_help.c: Add brackets.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/addgrps.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/addgrps.c: Add brackets.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c: Avoid implicit conversion of pointers to
	booleans.

2008-06-13  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/console.c, libmisc/hushed.c, libmisc/yesno.c,
	libmisc/loginprompt.c, libmisc/ttytype.c, libmisc/tz.c,
	src/login_nopam.c, src/chpasswd.c, src/chgpasswd.c, lib/port.c:
	The size argument of fgets is an int, not a size_t.
	* libmisc/loginprompt.c: Ignore the return value from signal()
	when the signal handlers are restored.
	* src/chpasswd.c: Cast the return value of time() to a long
	integer.
	* src/chpasswd.c: Use the SCALE macro instead of (24L * 3600L)
	for the values to be set in /etc/shadow.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Use a bool when possible instead of int integers.
	* src/pwck.c: Avoid implicit conversion of integers to booleans.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Use a bool when possible instead of int integers.
	* src/su.c: Add brackets and parenthesis.
	* src/su.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/su.c: Ignore the return value of pam_end() before
	exiting.
	* src/su.c: Avoid assignments in comparisons.
	* src/su.c: Avoid multi-statements lines.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/valid.c: Change the prototype of
	valid() to return a bool.
	* libmisc/valid.c: Add parenthesis.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Add brackets and parenthesis.
	* lib/commonio.c: Check the result of fgets().
	* lib/commonio.c: Avoid implicit conversion of pointers to
	booleans.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Fix the prototypes to match earlier changes.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/nscd.c: Include defines.h.
	* lib/nscd.c: Always warn when the nscd cache cannot be flushed.
	* lib/nscd.c: Avoid assignments in comparisons.
	* lib/nscd.c: Ignore the return value of fputs() when printing
	errors.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/port.c: Add brackets and parenthesis.
	* lib/port.c: Change isttytime() prototype to return a bool.
	* lib/port.c: Ignore the return value of fclose () (file open
	read-only).
	* lib/port.c: Avoid multi-statements lines.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/id.c: Ignore the return value of fputs(), puts(), putchar(),
	and printf().
	* src/id.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/id.c: Add brackets and parenthesis.
	* src/id.c: Avoid implicit conversion of pointers / integers
	to booleans.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chsh.c: Use a bool when possible instead of int integers.
	* src/chsh.c: restricted_shell() renamed is_restricted_shell().
	check_shell() renamed shell_is_listed().
	* src/chsh.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/chsh.c: Avoid implicit conversion of pointers / integers
	to booleans.
	* src/chsh.c: Ignore the return value of pam_end() before
	exiting.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpunconv.c: Use a bool when possible instead of int
	integers.
	* src/grpunconv.c: Add brackets and parenthesis.
	* src/grpunconv.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/grpunconv.c: Avoid implicit conversion of pointers / integers
	to booleans.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/sulogin.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/sulogin.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/sulogin.c: Avoid assignments in comparisons.
	* src/sulogin.c: Ignore the return value of alarm().

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groups.c: Use a bool when possible instead of int integers.
	* src/groups.c: Add brackets and parenthesis.
	* src/groups.c: Avoid implicit conversion of pointers / integers
	to booleans.
	* src/groups.c: Avoid assignments in comparisons.
	* src/groups.c: Ignore the return value of putchar(), printf()
	* src/groups.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpconv.c: Use a bool when possible instead of int integers.
	* src/grpconv.c: Add brackets and parenthesis.
	* src/grpconv.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/grpconv.c: Avoid implicit conversion of pointers / integers
	to booleans.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Use a bool when possible instead of int integers.
	* src/faillog.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/faillog.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/faillog.c: Add brackets and parenthesis.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Avoid multi-statements lines.
	* src/login.c: Ignore the return value of pam_end() before
	exiting.
	* src/login.c: Use a bool when possible instead of int integers.
	* src/login.c: Add brackets and parenthesis.
	* src/login.c: Ignore the return values of fflush(), putchar(), puts().
	* src/login.c: Ignore the return value of fclose() for read-only
	files.
	* src/login.c: Avoid assignments in comparisons.
	* src/login.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/login.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: Use a bool when possible instead of int integers.
	* src/chage.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: Use a bool when possible instead of int
	integers.
	* src/groupadd.c: Add brackets and parenthesis.
	* src/groupadd.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/groupadd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/groupadd.c: Ignore the return value of pam_end() before
	exiting.

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Use a bool when possible instead of int integers.
	* src/pwck.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Use a bool when possible instead of int integers.
	* src/passwd.c: Avoid assignments in comparisons.
	* src/passwd.c: Add brackets and parenthesis.
	* src/passwd.c: Avoid implicit conversion of pointers / integers /
	chars to booleans.
	* src/passwd.c: Move the "context_t c" declaration at the
	beginning check_selinux_access.
	* src/passwd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmod.c: Use a bool when possible instead of int
	integers.
	* src/groupmod.c: Avoid assignments in comparisons.
	* src/groupmod.c: Add brackets and parenthesis.
	* src/groupmod.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/groupmod.c: Use a %lu format to print GIDs, and cast the GID
	to (unsigned long int).
	* src/groupmod.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/groupmod.c: Ignore the return value of pam_end() before
	exiting.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/su.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Use a bool when possible instead of int integers.
	* src/useradd.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/useradd.c: Add brackets and parenthesis.
	* src/useradd.c: Avoid assignments in comparisons.
	* src/useradd.c: Ignore the return value of fclose() for read-only
	files.
	* src/useradd.c: Ignore the return value of fflush() before
	closing the files.
	* src/useradd.c: Avoid multi-statements lines.
	* src/useradd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/useradd.c: Ignore the return value of pam_end() before
	exiting.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Use a bool when possible instead of int integers.
	* src/vipw.c: Ignore the return value of umask(), when the mask is
	set again to the old value.
	* src/vipw.c: Avoid implicit conversion of pointers / integers to
	booleans.
	* src/vipw.c: Add brackets and parenthesis.
	* src/vipw.c: Avoid assignments in comparisons.
	* src/vipw.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/vipw.c: Add missing termination of the longopts parameter
	for getopt_long().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c: Use a bool when possible instead of int
	integers.
	* src/chgpasswd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/chgpasswd.c: Avoid implicit conversion of integers to
	booleans.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupdel.c: Use a bool when possible instead of int
	integers.
	* src/groupdel.c: Avoid implicit conversion of pointers / integers to
	booleans.
	* src/groupdel.c: Avoid assignments in comparisons.
	* src/groupdel.c: Ignore the return value of pam_end() before
	exiting.
	* src/groupdel.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/expiry.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/expiry.c: Add brackets and parenthesis.
	* src/expiry.c: Avoid assignments in comparisons.
	* src/expiry.c: Avoid implicit conversion of pointers to booleans.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Use a bool when possible instead of int
	integers.
	* src/pwunconv.c: Add brackets and parenthesis.
	* src/pwunconv.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/pwunconv.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/pwunconv.c: Avoid assignments in comparisons.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Use a bool when possible instead of int integers.
	* src/usermod.c: Add brackets and parenthesis.
	* src/usermod.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/usermod.c: Avoid assignments in comparisons.
	* src/usermod.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/usermod.c: Ignore the return value of pam_end() before
	exiting.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmems.c: Move the declaration of option_index and
	long_options before the blocks of code.
	* src/groupmems.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/groupmems.c: Ignore the return value of pam_end() before
	exiting.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c: Use a bool when possible instead of int integers.
	* src/chfn.c: Avoid implicit conversion of integers / chars to
	booleans.
	* src/chfn.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/logoutd.c: Use a bool when possible instead of int integers.
	* src/logoutd.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/logoutd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/logoutd.c: Add brackets and parenthesis.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c: Use a bool when possible instead of int
	integers.
	* src/chpasswd.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/chpasswd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwconv.c: Use a bool when possible instead of int integers.
	* src/pwconv.c: Add brackets and parenthesis.
	* src/pwconv.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/pwconv.c: Avoid implicit conversion of pointers / integers /
	chars to booleans.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c: Implement the -r, --system option.
	* src/newusers.c: Use a bool when possible instead of int
	integers.
	* src/newusers.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/newusers.c: Ignore the return value of pam_end() before
	exiting.
	* src/newusers.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/newusers.c: Avoid multi-statements lines.
	* src/newusers.c: Add brackets and parenthesis.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Use a bool when possible instead of int integers.
	* src/gpasswd.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/gpasswd.c: Ignore the return value of putchar() and fflush()
	before exiting.
	* src/gpasswd.c: check_list() renamed is_valid_user_list(), and
	return a bool.
	* src/gpasswd.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Use a bool when possible instead of int integers.
	* src/grpck.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Use a bool when possible instead of int integers.
	* src/lastlog.c: Avoid implicit conversion of pointers / integers
	/ chars to booleans.
	* src/lastlog.c: Add brackets and parenthesis.
	* src/lastlog.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Use a bool for the is_shadow_pwd, is_shadow_grp,
	deleted_user_group, was_member, was_admin, and the
	options' flags.
	* src/userdel.c: Change path_prefix() prototype to return a bool.
	* src/userdel.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/userdel.c: Ignore the return value from pam_end() since we
	are exiting anyway just afterwards.
	* src/userdel.c: Avoid implicit conversion of pointers /
	integers / chars to booleans.
	* src/userdel.c: Add brackets and parenthesis.
	* src/userdel.c: Avoid assignments in comparisons.
	* src/userdel.c: Do not ignore the return value of the *_unlock()
	functions.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login_nopam.c: Do not use the YES and NO macros. Use the
	booleans true and false instead. Change the prototypes of
	list_match(), user_match(), from_match(), and string_match()
	accordingly. Also use booleans internally.
	* src/login_nopam.c: Add brackets and parenthesis.
	* src/login_nopam.c: Avoid implicit conversion of pointers /
	integers / chars to booleans.
	* src/login_nopam.c: Avoid assignments in comparisons.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Use a bool for is_newgrp, notfound, needspasswd,
	initflag, and cflag.
	* src/newgrp.c: Add brackets and parenthesis.
	* src/newgrp.c: Avoid implicit conversion of pointers / integers /
	chars to booleans.
	* src/newgrp.c: Avoid multi-statements lines.
	* src/newgrp.c: Ignore return value of setlocale(),
	bindtextdomain(), and textdomain().
	* src/newgrp.c: Avoid assignments in comparisons.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/list.c: Change is_on_list() prototype to return a bool.

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/find_new_ids.c: Change find_new_uid() and find_new_gid()
	prototypes to use a bool for their first argument (sys_user /
	sys_group).

2008-06-09  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/console.c: Change is_listed() prototype to return a bool.
	The default parameter should also be a bool.
	* libmisc/console.c: Add brackets and parenthesis.
	* libmisc/console.c: Avoid assignments in comparisons.
	* libmisc/console.c: Change console() prototype to return a bool.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetspent.c: Add brackets and parenthesis.
	* lib/sgetspent.c: Avoid assignments in comparisons.
	* lib/sgetspent.c: Avoid implicit conversion of pointers / chars
	to booleans.
	* lib/sgetspent.c: Avoid multi-statements lines.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetpwent.c: Avoid implicit conversion of pointers / chars to
	booleans.
	* lib/sgetpwent.c: Add brackets and parenthesis.
	* lib/sgetpwent.c: Return NULL instead of 0.
	* lib/sgetpwent.c: Do not check twice if fields[2] and fields[3]
	are not empty.
	* lib/sgetpwent.c: Avoid assignments in comparisons.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getdate.y: abbrev is a bool.
	* libmisc/getdate.y: Avoid implicit conversion of pointers / chars /
	integers to booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Fix prototypes according to earlier changes
	(usage of the bool type).
	* lib/prototypes.h: Add the arguments' name to the prototypes.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.h: Add protection against multiple inclusions.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/pwio.h: Add protection against multiple inclusions.
	* lib/pwio.c: The changed, isopen, locked, and readonly fields
	of the db are booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadowio.h, lib/shadowio.c: spw_file_present returns a bool.
	* lib/shadowio.h: Add protection against multiple inclusions.
	* lib/shadowio.c: The changed, isopen, locked, and readonly fields
	of the db are booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgroupio.c: Avoid assignments in comparisons.
	* lib/sgroupio.c: Add brackets.
	* lib/sgroupio.c: Avoid implicit conversion of pointers / integers
	to booleans.
	* lib/sgroupio.c: The changed, isopen, locked, and readonly fields
	of the db are booleans.
	* lib/sgroupio.h, lib/sgroupio.c: sgr_file_present returns a bool.
	* lib/sgroupio.h: Add protection against multiple inclusions.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/gshadow.c: nis_used and nis_bound are booleans.
	* lib/gshadow.c: Avoid implicit conversion of pointers / integers
	to booleans.
	* lib/gshadow.c: Avoid assignments in comparisons.
	* lib/gshadow.c: Add brackets.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: The changed, isopen, locked, and readonly fields
	of the db are booleans.
	* lib/groupio.h: Add protection against multiple inclusion.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/sgetgrent.c: Avoid implicit conversion of pointers / chars
	to booleans.
	* lib/sgetgrent.c: Avoid assignments in comparisons.
	* lib/sgetgrent.c: Add brackets.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/encrypt.c: Avoid implicit conversion of pointers to
	booleans.
	* lib/encrypt.c: Add parenthesis.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/port.c: Avoid implicit conversion of pointers / integers /
	chars to booleans.
	* lib/port.c: Avoid multiple statement on the same line.
	* lib/port.c: Add brackets and parenthesis.
	* lib/port.c: Avoid assignments in comparisons.
	* lib/port.c: Fix typo comparision -> comparison (in comment).

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/fputsx.c: Add brackets.
	* lib/fputsx.c: Avoid assignments in comparisons.
	* lib/fputsx.c: Avoid implicit conversion of pointers / integers /
	chars to booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.h: commonio_entry.changed, commonio_db.changed,
	commonio_db.isopen, commonio_db.locked, and commonio_db.readonly
	are no booleans.
	* lib/commonio.h: Include defines.h to get the definition of bool.
	* lib/commonio.h: commonio_present returns a bool
	* lib/commonio.c: Implement above changes.
	* lib/commonio.c: add argument names in prototypes.
	* lib/commonio.c: name_is_nis returns a bool.
	* lib/commonio.c: nscd_need_reload is a bool.
	* lib/commonio.c: Improve types (use size_t / pid_t when needed
	instead of int).
	* lib/commonio.c: Avoid assignments in comparisons.
	* lib/commonio.c: Add brackets and parenthesis.
	* lib/commonio.c: Avoid implicit conversion of pointers / integers
	to booleans
	* lib/commonio.c: The return values of utime is not checked on
	purpose.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/isexpired.c: ARGSUSED is no more needed (shadow is
	always supported).
	* libmisc/isexpired.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/isexpired.c: Add brackets and parenthesis.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/sulog.c (sulog): The success argument is a bool.
	* libmisc/sulog.c: The return values of fflush is not checked on
	purpose.
	* libmisc/sulog.c: Indicate that some return values should be
	checked.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/ttytype.c: Avoid implicit conversion of pointers /
	integers to booleans.
	* libmisc/ttytype.c: Avoid assignments in comparisons.
	* libmisc/ttytype.c: Add brackets and parenthesis.
	* libmisc/ttytype.c: The return values of fclose is not checked on
	purpose.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/mail.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/mail.c: Avoid assignments in comparisons.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/loginprompt.c: Avoid implicit conversion of pointers /
	chars to booleans.
	* libmisc/loginprompt.c: Add brackets.
	* libmisc/loginprompt.c: Avoid assignments in comparisons.
	* libmisc/loginprompt.c: The return values of fclose and fflush
	are not checked on purpose.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setupenv.c: Avoid implicit conversion of chars to
	booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: selinux_checked, selinux_enabled, and set_orig
	are now booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/setugid.c (setup_uid_gid): The is_console argument is now
	a bool.
	* libmisc/setugid.c: Avoid implicit conversion of integers /
	pointers to booleans.
	* libmisc/setugid.c: Add brackets.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pam_pass.c (do_pam_passwd): The silent and
	change_expired are no booleans instead of int.
	* libmisc/pam_pass.c: The return value of pam_end is not checked
	on purpose.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/getlong.c: Avoid implicit conversion of pointers / chars
	to booleans.
	* libmisc/getlong.c: Add brackets.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/valid.c: Avoid implicit conversion of pointers / chars
	to booleans.
	* libmisc/valid.c: Add brackets.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/yesno.c: yes_or_no returns a bool instead of int.
	* libmisc/yesno.c: Avoid implicit conversion of pointers to
	booleans.
	* libmisc/yesno.c: The return value of fflush is not checked
	on purpose.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/age.c: Avoid implicit conversion of integers to
	booleans.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/rlogin.c: Avoid assignments in comparisons.
	* libmisc/rlogin.c: Avoid implicit conversion of integers to
	booleans.
	* libmisc/rlogin.c: Add brackets.

2008-05-26  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/failure.c (failcheck): The failed argument is a bool.
	* libmisc/failure.h: Likewise.
	* libmisc/failure.c (too_many_failures): too_many_failures returns
	a bool.
	* libmisc/failure.c: Add notes about unchecked return values.
	* libmisc/failure.c: Avoid assignments in comparisons.
	* libmisc/failure.c: Add brackets.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/myname.c: Avoid assignments in comparisons.
	* libmisc/myname.c: Avoid implicit conversion of pointers / chars
	to booleans.
	* libmisc/myname.c: Add brackets.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/utmp.c (checkutmp): Change picky argument's type to
	bool.
	* libmisc/utmp.c: Use bool when possible (found_utmpx,
	found_utmp).
	* libmisc/utmp.c: Add note about unchecked return values.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/addgrps.c: Change type of added to bool.
	* libmisc/addgrps.c: Avoid implicit conversion of pointers to
	booleans.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/hushed.c: hushed returns a bool instead of int.
	* libmisc/hushed.c: Avoid assignments in comparisons.
	* libmisc/hushed.c (hushed): Change type of found to bool.
	* libmisc/hushed.c: Add brackets.
	* libmisc/hushed.c: Always check if the user or the shell is in
	the file. Do not check the first character of the line first. This
	is simpler and match better with the HUSHLOGIN_FILE documentation.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.h, lib/getdef.c: getdef_bool returns a bool instead
	of int.
	* lib/getdef.c: Change typo of def_loaded to bool.
	* lib/getdef.c: Add brackets.
	* lib/getdef.c: Avoid assignments in comparisons.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowntty.c: is_my_tty returns a bool.
	* libmisc/chowntty.c: Avoid implicit conversion of integers to
	booleans.
	* libmisc/chowntty.c: Add brackets.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chowndir.c: Avoid assignment in comparisons, implicit
	comparison of integers to booleans.
	* libmisc/chowndir.c: The return value of closedir is not checked
	on purpose.
	* libmisc/chowndir.c: Add brackets.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/chkname.h, libmisc/chkname.c: check_group_name (resp.
	check_user_name) renamed to is_valid_user_name (resp.
	is_valid_group_name). is_valid_user_name and is_valid_group_name
	return a bool.
	* src/grpck.c, src/newusers.c, src/usermod.c, src/useradd.c,
	src/groupmod.c, src/pwck.c, src/groupadd.c: Use is_valid_user_name
	and is_valid_group_name, following above change.
	* libmisc/chkname.c: Avoid implicit conversion of chars to
	booleans. Add brackets and parenthesis.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/xmalloc.c: Avoid implicit conversion of integers /
	pointers to booleans.
	* libmisc/xgetXXbyYY.c: Likewise.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in, lib/defines.h: Allow usage of booleans in the
	source.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Allow --disable-man and --enable-man=no.

2008-06-26  Nicolas François  <nicolas.francois@centraliens.net>

	Prepare the 4.1.2.1 release
	* NEWS: set the release date.
	* man/po/*.po, po/*.po: Updated PO files.
	* configure.in: Set the version to 4.1.2.1.

2008-06-26  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/login.c: Fix an "audit log injection" vulnerability in
	login. This is similar to CVE-2008-1926 (util-linux-ng's login).
	This vulnerability makes it easier for attackers to hide
	activities by modifying portions of log events, e.g. by appending
	an addr= statement to the login name.
	* lib/prototypes.h: Added definition of AUDIT_NO_ID.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	Prepare the 4.1.2 release
	* NEWS: set the release date.
	* man/po/*.po, po/*.po: Updated PO files.
	* configure.in: Set the version to 4.1.2.

2008-05-25  Nicolas François  <nicolas.francois@centraliens.net>

	* po/Makevars, man/po/Makefile.in.in: Run msgmerge with
	--previous. (This requires gettext >= 0.16)

2008-05-24  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c (remove_tree): As we always use remove_tree
	followed by rmdir to remove the directory itself, delete also the
	root directory in remove_tree.
	* src/userdel.c, src/usermod.c: Do not call rmdir after
	remove_tree.

2008-05-24  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c (remove_tree): Make sure unlink is successful
	when removing files.

2008-05-24  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pwdcheck.c: Simply passwd_check since it's never used
	when configured with PAM support.

2008-05-24  Nicolas François  <nicolas.francois@centraliens.net>

	Fix compiler warnings:
	* libmisc/audit_help.c: Include prototypes.h to get the prototype
	of audit_help_open.
	* libmisc/salt.c: Use booleans instead of negating integers.
	* src/passwd.c: Declare the check_selinux_access prototype and
	avoid name clashes (change_user -> changed_user; change_uid ->
	changed_uid; access -> requested_access)
	* libmisc/list.c: Avoid assignments in comparisons, assignments
	with post increments (x++), use of integers as booleans, and
	explicitly mark blocks with brackets.
	* libmisc/fields.c: Likewise.
	* libmisc/copydir.c: Likewise.
	* libmisc/fields.c: Add comments.
	* libmisc/copydir.c: Mark function whose return value is not
	checked as such.

2008-05-23  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pam_pass.c: Use fputs rather than fprintf for constant
	strings.

2008-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.1.xml: Indicate that login should be executed with
	"exec login" if called from a shell.

2008-05-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/passwd.1.xml: Remove the advices for the choice of a good
	password (they are debatable). Point to
	http://en.wikipedia.org/wiki/Password_strength instead.

2008-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/salt.c (SHA_salt_size): Seed the RNG, and fix a
	overflow. These caused the SHA salt size to always be 8 bytes,
	instead of being in the 8-16 range. Thanks to Peter Vrabec
	pvrabec@redhat.com for noticing.
	* NEWS, libmisc/salt.c (SHA_salt_rounds): Seed the RNG with
	seedRNG instead of srand, and fix the same overflow. This caused
	the number of rounds to always be the smallest one.

2008-05-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml man/groupmems.8.xml man/groupdel.8.xml
	man/useradd.8.xml man/groupadd.8.xml man/newgrp.1.xml man/sg.1.xml
	man/chgpasswd.8.xml man/groupmod.8.xml: Tag the section which
	require --enable-shadowgrp accordingly.

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.5.xml: SHA_CRYPT_MAX_ROUNDS and
	SHA_CRYPT_MIN_ROUNDS can only exist if configured with
	--with-sha-crypt.

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, man/useradd.8.xml: Document the -k, --skel option, and
	update the -m, --create-home documentation.

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml: Sort options.

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.c: SHA_CRYPT_MAX_ROUNDS and SHA_CRYPT_MIN_ROUNDS can
	only exist if configured with --with-sha-crypt.
	* man/login.defs.d/SHA_CRYPT_MIN_ROUNDS.xml: Likewise.

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Document the section closed by #endif

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Fix formatting.

2008-05-19  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, man/useradd.8.xml: Document the -r, --system option.
	* NEWS, man/groupadd.8.xml: Document the -r, --system option.
	* NEWS, man/newusers.8.xml: Document the -r, --system option.
	* NEWS, man/newusers.8.xml: Document the -c, --crypt-method and
	-s, --sha-rounds options.

2008-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	Import Debian patch 487_passwd_chauthtok_failed_message
	* libmisc/pam_pass.c: Be more verbose and indicate that the
	password was not changed when pam_chauthtok fails (in addition to
	the PAM error, which may not be comprehensible for the users).

2008-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	Import Debian patch 434_login_stop_checking_args_after--
	* NEWS, src/login.c (check_flags): Stop checking the arguments
	after --. The later options will be sent to the shell, and do not
	need to be checked.

2008-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c, src/su.c, src/newgrp.c: Harmonize the children's
	SIGSTOP handling. Raise the signal which stopped the child instead
	of always SIGSTOP.

2008-05-18  Nicolas François  <nicolas.francois@centraliens.net>

	Import Debian patch 406_vipw_resume_properly.
	Thanks to Dean Gaudet.
	* NEWS, src/vipw.c: Resume properly after ^Z.

2008-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.c, lib/lockpw.c, lib/utent.c, lib/sgetgrent.c,
	lib/getdef.h, lib/pwauth.c, lib/sgetspent.c, lib/pwauth.h,
	lib/port.c, lib/encrypt.c, lib/groupio.c, lib/shadowmem.c,
	lib/port.h, lib/groupio.h, lib/groupmem.c, lib/exitcodes.h,
	lib/gshadow.c, lib/gshadow_.h, lib/sgroupio.c, lib/sgroupio.h,
	lib/shadowio.c, lib/pwio.c, lib/sgetpwent.c, lib/commonio.c,
	lib/faillog.h, lib/shadowio.h, lib/pwio.h, lib/pam_defs.h,
	lib/pwmem.c, lib/commonio.h, lib/shadow.c, lib/fputsx.c,
	lib/prototypes.h, libmisc/xmalloc.c, libmisc/limits.c,
	libmisc/entry.c, libmisc/console.c, libmisc/ulimit.c,
	libmisc/xgetXXbyYY.c, libmisc/chkname.c, libmisc/pwd2spwd.c,
	libmisc/xgetpwnam.c, libmisc/basename.c, libmisc/chkname.h,
	libmisc/chowndir.c, libmisc/audit_help.c, libmisc/chowntty.c,
	libmisc/hushed.c, libmisc/xgetpwuid.c, libmisc/getdate.h,
	libmisc/addgrps.c, libmisc/xgetgrgid.c, libmisc/utmp.c,
	libmisc/myname.c, libmisc/failure.c, libmisc/find_new_ids.c,
	libmisc/env.c, libmisc/rlogin.c, libmisc/age.c, libmisc/failure.h,
	libmisc/xgetgrnam.c, libmisc/yesno.c, libmisc/valid.c,
	libmisc/getlong.c, libmisc/obscure.c, libmisc/pam_pass.c,
	libmisc/motd.c, libmisc/salt.c, libmisc/setugid.c,
	libmisc/fields.c, libmisc/xgetspnam.c, libmisc/shell.c,
	libmisc/copydir.c, libmisc/setupenv.c, libmisc/strtoday.c,
	libmisc/loginprompt.c, libmisc/list.c, libmisc/pwd_init.c,
	libmisc/log.c, libmisc/mail.c, libmisc/ttytype.c,
	libmisc/pwdcheck.c, libmisc/sub.c, libmisc/sulog.c,
	libmisc/isexpired.c, libmisc/tz.c, src/newgrp.c, src/userdel.c,
	src/lastlog.c, src/grpck.c, src/gpasswd.c, src/newusers.c,
	src/pwconv.c, src/chpasswd.c, src/logoutd.c, src/chfn.c,
	src/groupmems.c, src/usermod.c, src/pwunconv.c, src/expiry.c,
	src/groupdel.c, src/chgpasswd.c, src/vipw.c, src/useradd.c,
	src/su.c, src/groupmod.c, src/passwd.c, src/pwck.c,
	src/groupadd.c, src/nologin.c, src/chage.c, src/login.c,
	src/suauth.c, src/faillog.c, src/grpconv.c, src/groups.c,
	src/sulogin.c, src/grpunconv.c, src/chsh.c, src/id.c: Make sure
	every source files are distributed with a copyright and license.
	Files with no license use the default 3-clauses BSD license. The
	copyright were mostly not recorded; they were updated according to
	the Changelog. "Julianne Frances Haugh and contributors" changed
	to "copyright holders and contributors".

2008-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/sulog.c: If the SULOG_FILE does not exist when an
	su session is logged, make sure the file is created with group
	root, instead of using the group of the caller.

2008-04-27  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/fields.c, src/chfn.c, man/chfn.1.xml: Allow
	non-US-ASCII characters in the GECOS fields ("name", "room
	number", and "other info" fields).

2008-04-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Fix compilation failure when compiled with
	audit support. Thanks to Mike Frysinger for reporting it.

2008-04-16  Nicolas François  <nicolas.francois@centraliens.net>

	Ensure that getpwent() is used in setpwent(), getpwent(),
	endpwend() sequences (ditto for getgrent(), getspent(), and
	getsgent()). The only real (minor) issue was in login, which kept
	the passwd file open.
	* libmisc/entry.c: Remove unneeded setspent() and endspent() (only
	getspnam is called in the middle).
	* libmisc/find_new_ids.c: Make sure to close the password and
	group files with endpwent() and endgrent().
	* libmisc/pwdcheck.c: Remove unneeded endspent() (only getspnam()
	is called before).
	* src/lastlog.c, src/passwd.c, src/groupmod.c, src/faillog.c,
	src/groups.c: Make sure to close
	the password file with endpwent().
	* src/login.c: Remove unneeded setpwent() (only xgetpwnam is
	called before).
	* src/login.c, src/newgrp.c: Fix typos in comments.

2008-04-16  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Fix the detection of the audit, pam, and
	selinux. Fail if the feature is requested but the library (or
	header file) could not be found. If nothing is specified, enable
	the feature only if we can find the library (or header file).
	* configure.in: Document --with-selinux as "yes if found" rather
	than "autodetected" for consistency with other options.

2008-04-04  Mark Rosenstand  <mark@borkware.net>

	* NEWS, etc/pam.d/Makefile.am: Add chfn, chsh, and userdel to
	$(pamd_files). Remove the duplicate useradd. And sort
	alphabetically.

2008-04-04  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Prepare next release, 4.1.2.

2008-04-02  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Prepare release 4.1.1
	* NEWS: Fix the release date of 4.1.0. Was in 2007, not 2008.

2008-04-02  Nicolas François  <nicolas.francois@centraliens.net>

	* po/fr.po: Update according to the file under review.
	Thanks to Jean-Luc Coulon.

2008-04-01  Holger Wansing  <linux@wansing-online.de>

	* po/de.po: updated to 431t

2008-03-31  Piarres Beobide  <pi+debian@beobide.net>

	* po/eu.po: updated to 431t

2008-03-30  Leandro Azevedo  <leorock182@gmail.com>

	* po/pt_BR.po: updated to 360t71f

2008-03-30  Mehmet Türker <mturker@innova.com.tr>

	* po/tr.po: updated to 431t

2008-03-30  Clytie Siddall  <clytie@riverland.net.au>

	* po/vi.po: updated to 431t

2008-03-30  Daniel Nylander  <yeager@ubuntu.com>

	* po/sv.po: updated to 431t

2008-03-29  helix84 <helix84@centrum.sk>

	* po/sk.po: updated to 431t

2008-03-27  Danilo Piazzalunga  <danilopiazza@gmail.com>

	* po/it.po: updated to 431t

2008-03-26  Nicolas François  <nicolas.francois@centraliens.net>

	* TODO: Added entries regarding SE Linux.

2008-03-26  Russell Coker  <russell@coker.com.au>

	* src/passwd.c, NEWS: Make SE Linux tests more strict, when the
	real UID is 0 SE Linux checks will be performed.

2008-03-24  Yuri Kozlov  <kozlov.y@gmail.com>

	* po/ru.po: updated to 431t

2008-03-23  Miguel Figueiredo  <elmig@debianpt.org>

	* po/pt.po: updated to 431t

2008-03-21  Changwoo Ryu  <cwryu@debian.org>

	* po/ko.po: updated to 431t

2008-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.5.xml: Fix manpages generation. The SYS_GID_MAX
	and SYS_UID_MAX entities were not defined.

2008-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/faillog.c: Fix minor compilation warning (assignment used as
	a comparison).

2008-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, src/login.c: login_access() is used in
	src/login.c, and defined in src/login_nopam.c (which lacks a
	prototype). Move its prototype from src/login.c to
	lib/prototypes.h.

2008-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c, src/groupmod.c: Compilation fix. gshadow_locked
	should only be used if SHADOWGRP is defined.

2008-03-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Fix some warnings. compare_members_lists() is only
	used if SHADOWGRP is defined.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmod.c: Make sure the passwd, group, and gshadow
	files are unlocked on exit. Unlock locked files in fail_exit().
	Prefer fail_exit() over exit().
	* NEWS, src/groupmod.c: When the GID of a group is changed, update
	also the GID of the passwd entries of the users whose primary
	group is the group being modified.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c (commonio_remove): Fail when the name to be
	removed is used by different entries (like commonio_update does).
	* NEWS: This fix the behavior of groupdel when the system is not
	configured to support split group but different group entries
	have the name of the group to be deleted.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/useradd.c: Make sure the passwd, group, shadow, and
	gshadow files are unlocked on exit. Unlock locked files in
	fail_exit(). Prefer fail_exit() over exit().

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupdel.c: Make sure the group, and gshadow files are
	unlocked on exit. Add function fail_exit(). Use fail_exit()
	instead of exit().
	* src/groupdel.c: Fail immediately instead of increasing errors.
	Better handling of error cases, like locked group or gshadow file.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c: Make sure the passwd, group, shadow, and
	gshadow files are unlocked on exit. Add function fail_exit(). Use
	fail_exit() instead of exit().

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/gpasswd.c: Make sure the group and gshadow files are
	unlocked on exit. Add function fail_exit(). Use fail_exit()
	instead of exit().

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupdel.c: Do not rewrite the group and gshadow file
	in case of error.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupdel.c: Do not log that the group was deleted if an
	error occurred.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupdel.c: Do not raise an error if the group does
	not exist in the gshadow file.

2008-03-08  Nicolas François  <nicolas.francois@centraliens.net>

	* etc/login.defs: Document MAX_MEMBERS_PER_GROUP.

2008-03-07  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Add missing end of line in message.
	* src/newgrp.c: Add audit events for the authentication
	(AUDIT_GRP_AUTH). Thansk to Peter Vrabec.

2008-03-05  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/faillog.c: Only reset the entries of existing users
	with faillog -r (not all numeric IDs starting from 0). Thanks to
	Peter Vrabec.

2008-03-05  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Fix typo. One "can't open" message is a "can't
	lock".

2008-02-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: When a password is moved to the gshadow file, use
	"x" instead of "!" to indicate that the password is shadowed
	(consistency with grpconv).

2008-02-26  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Fix failures when the gshadow file is not present. Thanks
	to Christian Henz (http://bugs.debian.org/467488)
	* src/gpasswd.c (get_group): Do not fail if gshadow is not present. Just use
	the group file and set the grent structure
	* src/gpasswd.c (check_perms): The permissions should be checked
	using both the gshadow and group file. Add a <struct group *>
	parameter, and check if the gshadow file exists (is_shadowgrp).
	* src/gpasswd.c (main): Do not use sgent.sg_mem or sgent.sg_adm if
	the gshadow file is not present (sgent is not initialized in that
	case). The fields of sgent can be set, but not used.

2008-02-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c: Fix typo in comment.
	* src/gpasswd.c: Move comment regarding FIRST_MEMBER_IS_ADMIN to
	where it belongs.
	* src/gpasswd.c: Indicate the end of the #ifdef FIRST_MEMBER_IS_ADMIN
	section.

2008-02-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/Makefile.in.in: Use --previous when merging PO files of
	the manpages.

2008-02-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/SYS_UID_MAX.xml, man/login.defs.d/SYS_GID_MAX.xml:
	Document new variables.
	* man/newusers.8.xml, man/login.defs.5.xml,
	man/login.defs.d/GID_MAX.xml, man/login.defs.d/UID_MAX.xml:
	newusers uses now the GID_MAX, GID_MIN, UID_MAX, UID_MIN,
	SYS_GID_MAX, SYS_GID_MIN, SYS_UID_MAX, and SYS_UID_MIN variables.
	* man/groupadd.8.xml, man/login.defs.5.xml: groupadd uses now the
	SYS_GID_MAX, and SYS_GID_MIN variables.
	* man/login.defs.5.xml: useradd uses now the SYS_GID_MAX,
	SYS_GID_MIN, SYS_UID_MAX, and SYS_UID_MIN variables.
	* man/Makefile.am: Add the new XML documentation files to EXTRA_DIST.

2008-02-25  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/getdef.c: Added missing SYS_GID_MAX, SYS_GID_MIN,
	SYS_UID_MAX, and SYS_UID_MIN.

2008-02-25  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/useradd.c, man/useradd.8.xml: Added options
	--user-group (-U, Uflg) and --no-user-group (-N, Nflg) to replace
	nflg.
	* man/login.defs.d/USERGROUPS_ENAB.xml: useradd now also uses
	USERGROUPS_ENAB.

2008-02-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupmod.c: Add missing 'p' to the getopt_long's optstring.

2008-02-19  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: Add missing 'p' to the getopt_long's optstring.
	* src/groupadd.c: Fix --non-unique's has_arg field to no_argument
	instead of required_argument.
	* src/groupadd.c: Add missing -p, --password description to the
	Usage message.

2008-02-19  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, etc/login.defs: Set GID_MIN to the same value as UID_MIN
	by default (1000).
	* NEWS, etc/login.defs: Added variables SYS_UID_MIN (100),
	SYS_UID_MAX (999), SYS_GID_MIN (100), SYS_GID_MAX (999) for system
	accounts.
	* libmisc/find_new_ids.c: Added support for system accounts in
	find_new_uid() and find_new_gid().
	* NEWS, src/newusers.c, src/useradd.c, src/groupadd.c: Added new
	option -r, --system for system accounts in useradd, groupadd, and
	newusers.

2008-02-18  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmems.c: Fix buffer overflow when adding an user
	to a group. Thanks to Peter Vrabec.

2008-02-14  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, etc/useradd: Change the default HOME directory in
	/etc/default/useradd according FHS (/home instead of /home/users).
	This fixes Alioth's bug #310559. Thanks to Dale E. Edmons.

2008-02-14  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Use the correct AUDIT_CHGRP_ID event instead of
	AUDIT_USER_START, when changing the user space group ID with
	newgrp or sg. Thanks to sgrubb@redhat.com for the patch.

2008-02-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Reset oflg with uflg if the new UID is equal to
	the old one.
	* src/usermod.c: Reset mflg with dflg if the new home directory is
	the same as the old one.

2008-02-10  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/usermod.c: Fix the handling of -a when a user is being
	renamed (with -l). The new name of the user was used for the new
	supplementary groups, but not in the existing ones.

2008-02-10  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Set the shadow's password instead of the
	passwd's password. Fix wrong cut&paste.

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Use a function to convert the dates from
	/etc/shadow to human readable dates.
	* src/usermod.c: Really log the expiration date change as human
	readable strings instead of integers.
	* src/usermod.c: No need to check audit_fd, audit_logger() will
	take care of this.

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Do not translate the fromhost variable. It is
	always used for syslog messages.

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, lib/defines.h: Switch to the C locale before sending
	messages to syslog. The messages sent by shadow were not
	translated, but error messages from PAM returned by pam_strerror()
	were translated in the users's locale.

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: newusers will behave more like useradd.
	* src/newusers.c: The user's ID must be found before the group ID
	to mimic useradd's behavior choices of UID and GID.
	* src/newusers.c: Reuse the generic find_new_uid() and
	find_new_gid() functions. This permits to respect the
	UID_MIN/UID_MAX and GID_MIN/GID_MAX variables, should
	* src/newusers.c: Check if the user or group exist using the
	external databases (with the libc getpwnam/getgrnam functions).
	Refuse to update an user which exist in an external database but
	does not exist in the local database.
	* src/newusers.c: Check the usernames and groupnames with
	check_user_name() and check_group_name()
	* src/newusers.c: Use isdigit() for readability.
	* src/newusers.c: Check if numerical IDs are valid (no remaining
	chars).

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c: Fix the support for the NONE crypt method.

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Fix shadow group support (the list of admins was
	not defined; it is now set to an empty list).

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/salt.c: Do not seed the random number generator
	each time, and use the time in microseconds to avoid having the
	same salt for different passwords generated in the same second.
	This permits to avoid using the same salt for different passwords
	in newusers.

2008-02-03  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/pwio.c, lib/pwio.h: New function to find an user by
	its UID on the local database.
	* lib/groupio.c, lib/groupio.h: New function to find a group by
	its GID on the local database.
	* libmisc/find_new_ids.c, lib/prototypes.h: Add new generic
	functions to find the next user or group ID available:
	find_new_uid() and find_new_gid(). They work the same way as the
	functions with the same name of useradd or groupadd, except that
	they check in the local database to make sure an ID was not
	reserved in an uncommitted change (this is needed to be used in
	newusers), they report a status instead of calling exit(), and
	they can receive a preferred ID. They should later support system
	IDs. This should be a little bit slower, but not too much (if the
	database is not open the checks against the local database will
	exit immediately, and if it is already open, all the checks will be
	done regarding the data in memory).
	* po/POTFILES.in: The new libmisc/find_new_ids.c file contains
	translatable strings.
	* libmisc/Makefile.am: Add libmisc/find_new_ids.c to the sources
	of the libmisc library.
	* src/useradd.c, src/groupadd.c: Use the find_new_uid() and
	find_new_gid() from the library instead of the local functions.

2008-02-02  Nicolas François  <nicolas.francois@centraliens.net>

	* po/*.po: Updated PO files.
	* libmisc/age.c, libmisc/yesno.c, src/lastlog.c, src/grpck.c,
	src/chfn.c, src/passwd.c, src/chage.c, src/login.c, src/sulogin.c,
	src/chsh.c: Fix call to puts (remove end of line, or use fputs).
	* po/*.po: Unfuzzy PO files according to above change.

2008-01-26  Nicolas François  <nicolas.francois@centraliens.net>

	Fix build failures with --disable-shadowgrp. Thanks to Jürgen
	Daubert for the patch.
	* libmisc/salt.c: Include <stdio.h>, needed for stderr and printf
	functions.
	* lib/encrypt.c: Include <stdio.h>, needed for perror, stderr and
	printf functions
	* src/usermod.c: sgr_locked exists only if SHADOWGRP is defined.
	* src/chgpasswd.c: Only check is the gshadow file exists if
	SHADOWGRP is defined.

2008-01-24  Nicolas François  <nicolas.francois@centraliens.net>

	* src/gpasswd.c, src/chfn.c, src/chage.c, src/chsh.c, src/grpck.c,
	src/vipw.c, src/pwck.c, src/sulogin.c, src/newgrp.c,
	src/userdel.c, src/lastlog.c, src/groupmems.c, src/usermod.c,
	src/expiry.c, src/groupdel.c, src/useradd.c, src/su.c,
	src/groupmod.c, src/passwd.c, src/groupadd.c, src/login.c,
	src/suauth.c, src/faillog.c, src/id.c, libmisc/limits.c,
	libmisc/addgrps.c, libmisc/env.c, libmisc/age.c, libmisc/yesno.c,
	lib/getdef.c: Replace printf by puts for fixed strings. This would
	avoid issues caused by formats introduced in translated strings.

2008-01-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Strings improvement s/can't get unique/no more
	available/.

2008-01-23  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/usermod.c: Check that the new fields set with -u, -s,
	-l, -g, -f, -e, -d, and -c differ from the old ones. If a
	requested new value is equal to the old one, no changes will
	be performed for that field. If no fields are changed, usermod
	will exist successfully with a warning. This avoids logging
	changes to syslog when there are actually no changes.

2008-01-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Always define user_newcomment, user_newshell,
	user_newexpire, and user_newinactive. It is more simple to always
	have user_<x> as the old field, and user_new<x> as the new field
	(even if the field did not change) instead of changing the
	algorithm depending on WITH_AUDIT.

2008-01-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: user_newname can only be used in WITH_AUDIT code
	or when lflg is set. This issue was introduced in the code
	refactoring of usermod.

2008-01-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: Fix typo in comment: s/find_new_uid/find_new_gid/

2008-01-22  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: s/gid/GID/ in message string.
	* src/useradd.c: Set this string for translation.

2008-01-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/grpck.8.xml: Fix typo. Remove "the" from "All entries in the
	<filename></filename> are checked [...]"
	* man/grpck.8.xml: Conditionally include the parts mentioning the
	gshadow file (based on SHADOWGRP).
	* man/grpck.8.xml: Add reference to the gshadow(5) manpage
	(conditionally included).

2008-01-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/grpck.8.xml, man/pwck.8.xml: Indicate that the shadow
	parameter is optional (i.e. a passwd file can be specified without
	a shadow file, and the group file can be specified without the
	gshadow file).

2008-01-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/grpck.8.xml: Document the options with a list of options,
	as in the pwck(8) manpage.

2008-01-22  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Fix segfault when an user returns to an
	unknown GID (either the user was deleted during the user's newgrp
	session or the user's passwd entry referenced an invalid group).
	Add a syslog warning in that case.
	* src/newgrp.c: Add an end of line when reporting an invalid
	password.

2008-01-12  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/useradd.c: Fix the handling of the --defaults option
	(it required an argument, but should behave as -D)
	* NEWS, man/useradd.8.xml: Document the --defaults option, which
	was already described in the useradd's Usage information.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Avoid setting the password to a const empty
	string, but set the first char to \0. This avoids a warning.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Add prototype for l64a(), gensalt(),
	SHA_salt_size(), and SHA_salt_rounds().
	* libmisc/salt.c: l64a() and gensalt() are static.
	* libmisc/salt.c: The `meth' parameter of crypt_make_salt() is a
	const. (ditto for the method variable).
	* libmisc/salt.c: SHA_salt_rounds returns a const string.
	* libmisc/salt.c: Avoid warnings with cast of random() to double.
	* libmisc/salt.c: Replace rand() by random().

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/Makefile.am: Do not link libshadow.la with the intl, crypt,
	skey and md libraries...
	* src/Makefile.am: ...Specify for each binary which library is
	required. skey and md are required for the binaries with
	authentication of the user (chfn, chsh, login, passwd, su). intl
	is required for all. mcrypt is required for user (chfn, chsh,
	login, passwd, su, sulogin) and group (newgrp, gpasswd)
	authentication and for the creation of passwords (chpasswd,
	chgpasswd, gpasswd, newusers, passwd).

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/nscd.c, lib/nscd.h: Set the service parameter of
	nscd_flush_cache() to const. This avoids a lot of warnings.
	* lib/nscd.c: Include "nscd.h" to avoid inconsistent prototypes.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/encrypt.c: Set the method string as a constant string.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/port.c: Assume <errno.h> declares errno.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/fr.po: Fix typo: s/rend compte indiqué/rend le compte
	indiqué/

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/suauth.c: Remove prototype of check_su_auth(). It is
	redundant with prototypes.h.
	* src/suauth.c: isgrp() is static.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/obscure.c: Tag the `old' parameter of palindrome(),
	similar(), and simple() as unused.
	* libmisc/loginprompt.c: Tag the `sig' parameter of login_exit()
	as unused.
	* src/expiry.c: Tag the `sig' parameter of catch_signals() as
	unused.
	* src/su.c: Tag the `sig' parameter of catch_signals() as unused.
	* src/su.c: Add int parameter to the prototype of oldsig().
	* src/login.c: Tag the `sig' parameter of alarm_handler() as
	unused.
	* src/sulogin.c: Tag the `sig' parameter of catch_signals() as
	unused.
	* libmisc/getdate.y: Tag the `string' parameter of yyerror() as
	unused.
	* libmisc/getdate.y: The string provided to yyerror() is const.
	* libmisc/getdate.y: Fix the prototypes of yylex() and yyerror().

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/defines.h: Remove teh macro definition of SETXXENT_TYPE,
	SETXXENT_RET, and SETXXENT_TEST. They were used by the now
	removed pwent.c and grent.c.
	* lib/defines.h: Remove the definition of PASSWD_PAG_FILE,
	GROUP_PAG_FILE, SHADOW_PAG_FILE, and SGROUP_PAG_FILE. They are
	never used.
	* lib/defines.h: Don't include "snprintf.h". The file does not
	exist in shadow.
	* lib/defines.h: Add new macro unused to tag unused parameters.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c, src/groupmems.c: Assume optarg and optind are
	declared in <getopt.h>.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Remove the pw_name argument of new_pw_passwd. Use
	the user_newname global variable instead. This avoid using a
	parameter with the same name as a function.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Removed unused gid parameter of syslog_sg().
	* src/newgrp.c: The loginname and tty buffers are never changed.
	Add the const qualifier.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c, src/chgpasswd.c: The crypt_method string always
	points to a constant string. Add the const qualifier.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwunconv.c: Remove prototype of l64a() (not used in
	pwunconv).

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login_nopam.c: Use an ANSI prototype for resolve_hostname()
	instead of K&R prototype.
	* src/login_nopam.c: Fix the prototypes of list_match(),
	user_match(), from_match(), string_match(). There were no
	parameters in the prototypes.
	* src/login_nopam.c: Fix the prototypes of the function parameter
	match_fn of list_match().

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c: Remove the src parameter of copy_special().
	The entry's information are taken from the stat structure.

2008-01-06  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/console.c, libmisc/ulimit.c, lib/sgetgrent.c,
	lib/sgetpwent.c: Include "prototypes.h" to make
	sure the exported prototypes are the ones used for the definition
	of functions.
	* lib/prototypes.h: Added prototypes for __gr_del_entry(),
	__gr_get_db(), __gr_get_head(), __gr_set_changed(), __gr_dup(),
	__pw_del_entry(), __pw_get_db(), __pw_get_head(), __pw_dup(),
	sgetgrent(), sgetpwent(), __sgr_del_entry(), __sgr_dup(),
	__sgr_get_head(), __sgr_set_changed(), __spw_get_head(),
	__spw_del_entry(), __spw_dup().
	* lib/prototypes.h: Removed prototype for is_listed().
	* lib/prototypes.h: Added name of the check_su_auth()'s parameters.
	* lib/groupio.h: Removed prototypes for __gr_dup() and
	__gr_set_changed().
	* lib/sgroupio.c: Removed prototypes for putsgent(), sgetsgent(),
	and __gr_get_db().
	* lib/sgroupio.h: Removed prototypes for __sgr_dup() and
	__sgr_set_changed().
	* lib/shadowio.c: Removed prototype for __pw_get_db().
	* lib/pwio.c: Removed prototype for sgetpwent() and putpwent().
	* lib/shadowio.h: Removed prototypes for __spw_dup() and
	__spw_set_changed().
	* lib/pwio.h: Removed prototypes for __pw_dup() and
	__pw_set_changed().
	* lib/commonio.h: Add protection against multiple inclusions.
	* lib/prototypes.h: Include commonio.h (needed for the
	__xx_del_entry() functions).
	* src/grpck.c: Remove prototypes for __gr_del_entry(),
	__gr_get_head(), __sgr_del_entry(), and __sgr_get_head().
	* src/pwck.c: Remove prototypes for __pw_del_entry(),
	__pw_get_head(), __spw_del_entry(), and __spw_get_head().
	* lib/groupio.c: Remove prototype for sgetgrent().
	* lib/groupio.c: Add the name of the parameters for
	merge_group_entries() and split_groups().
	* lib/groupio.h: Remove prototypes for __gr_dup() and
	__gr_set_changed().

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml, man/groupmod.8.xml: Add documentation for
	the new --password options.

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Fix find_new_gid() prototype. Add a void
	parameter.

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: Add the dolastlog() prototype.
	* lib/prototypes.h: Typo: login.c -> loginprompt.c
	* src/login.c: Remove declaration of dolastlog().
	* lib/prototypes.h: Include <lastlog.h> for the declaration of
	struct lastlog.
	* lib/prototypes.h: Remove old comments in the header.

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pwdcheck.c: Do not include <pwd.h>. Include <shadow.h>
	and "pwauth.h" only when compiled without PAM support.
	* src/chfn.c, src/chsh.c: Do not include <shadow.h>
	* lib/commonio.c: Do not include <shadow.h>. Do not include
	<pwd.h>. Include "nscd.h" instead of <nscd.h>.

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Do not check if shadow.h exist, but make sure it
	exists.
	* libmisc/pwdcheck.c, src/chfn.c, src/chsh.c, lib/defines.h,
	lib/shadowmem.c, lib/shadowio.c, lib/commonio.c:
	HAVE_SHADOW_H is no more needed (shadow.h should always exist).

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Remove prototype of putgrent(), add parameter's
	name of sgetgrent().
	* lib/prototypes.h: Fix the do_pam_passwd() prototype (it returns
	void).

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/groupmod.c, src/groupadd.c: Add option --password to
	groupadd and groupmod (similar to useradd and usermod).

2008-01-05  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h: grent.c does not exist anymore. Remove the
	putgrent prototype.
	* lib/prototypes.h: "shadowio.h" was included for the definition
	of the spwd structure. Replace this include by <shadow.h>
	* libmisc/xmalloc.c, libmisc/utmp.c, libmisc/strtoday.c,
	libmisc/pwd_init.c, libmisc/tz.c, lib/port.c, lib/fputsx.c,
	libmisc/pam_pass.c, libmisc/log.c: Include "prototypes.h" to make
	sure the exported prototypes are the ones used for the definition
	of functions.
	* libmisc/console.c: Define is_listed() as static and add its
	prototype.
	* libmisc/xgetXXbyYY.c, libmisc/yesno.c: Include config.h as a
	system include, as recommended by the autoconf documentation.
	* src/chage.c: Define isnum() as static and add its prototype.
	* libmisc/xgetspnam.c: Add missing include "shadowio.h". (This was
	OK as long as prototypes.h included this file.)
	* src/nologin.c: Make a proper prototype for the main() function
	declaration. (add void)
	* src/login.c: login_prompt is the name of a function, use
	loginprompt for the internal variable.
	* src/chsh.c: loginsh is a global variable, use newshell for the
	update_shell()'s parameter.
	* lib/gshadow.c: The prototypes of fgetsx() and fputsx() are
	already defined in prototypes.h. Remove the declaration of these
	functions.
	* lib/gshdow.c: list() is an external function. DO not shadow it
	with a static function. The internal list() was renamed
	build_list().
	* lib/commonio.c: stat shadows another stat variable. Remove this
	variable, and directly check the result of getfscreatecon().
	* libmisc/utmp.c: Remove the declaration of getutent(),
	getutline(), setutent(), and endutent() which are declared in
	<utmp.h>

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Remove duplicate logging to syslog.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c: Avoid assignments in conditionals.
	* src/newgrp.c: Split check_perms(), syslog_sg() out of main().

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadow.c: Avoid assignments in conditionals.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c (split_groups): Test the pointer returned by malloc.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c: Document add_one_entry_nis(), write_all(),
	commonio_remove(), commonio_locate(), and commonio_rewind().

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Avoid implicit brackets.
	* src/pwck.c: Avoid implicit conversions to booleans.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Avoid implicit brackets.
	* src/grpck.c: Avoid implicit conversions to booleans.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: No functional changes were introduced by the previous pwck
	and grpck changes, except for the following bug fix: no syslog
	logging if a passwd or group file was specified on the command
	line without a shadowed database file, even if the system shadowed
	database was changed).

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Fix typos in comments (gshadow/shadow).

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/pwck.c: Split process_flags(), open_files(), close_files()
	check_pw_file(), and check_spw_file() out of main(). New global
	variables is_shadow, sort_mode, use_system_pw_file, and
	use_system_spw_file.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/xgetXXbyYY.c: De-comment code (duplicate the entry when
	the _R function is not present on the system).

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/lastlog.c: Remove statbuf, not used.
	* src/lastlog.c: Fix types, cast umin and umax to uid_t.
	* src/lastlog.c: (option -u) user needs to be a signed long, not
	uid_t (to accept rangees like -<uid>

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Avoid ?: construct without the middle term.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/copydir.c, src/usermod.c, lib/prototypes.h: The uid and
	gid parameters can be set to -1 to indicate that the original
	owners must be kept. Change the types from uid_t/gid_t to a
	long int (signed).
	* libmisc/copydir.c: Change the copy_entry(), copy_dir(),
	copy_symlink(), copy_special(), and copy_file() prototypes
	accordingly.
	* lib/prototypes.h: Add the parameters' name for the
	libmisc/copydir.c functions.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c, libmisc/obscure.c, src/login_nopam.c,
	lib/pwauth.c: Avoid empty file when USE_PAM is set.
	* libmisc/audit_help.c: Avoid empty file when WITH_AUDIT is not set.
	* src/login_nopam.c: Fix warnings: resolve_hostname takes and
	returns a constant string.

2008-01-01  Nicolas François  <nicolas.francois@centraliens.net>

	* src/grpck.c: Split process_flags(), open_files(), and
	close_files() out of main(). New global variables is_shadow,
	sort_mode, use_system_grp_file, and use_system_sgr_file.
	* src/grpck.c: Split check_grp_file() and check_sgr_file() out of
	main().
	* src/grpck.c: Split check_members() and compare_members_lists()
	out of check_grp_file() and check_sgr_file().

2007-12-31  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/Makefile.in.in: If remove-potcdate.sin does not exist,
	use the one from teh po directory (it is not installed
	automatically by autopoint.

2007-12-31  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.h: Fix the type of the bitfields in the commonio_entry
	and commonio_db structures to unsigned int (instead of int).

2007-12-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chsh.c: Split process_flags(), check_perms(), and update_shell()
	out of main().
	* src/chsh.c: Before pam_end(), the return value of the previous
	pam API was already checked. No need to validate it again.
	* src/chsh.c: Avoid implicit brackets.
	* src/chsh.c: Avoid assignments in comparisons.

2007-12-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chfn.c: New function: process_flags() split out of main().
	The flags variables are now global.
	* src/chfn.c: New functions: check_perms(), update_gecos(),
	get_old_fields(), and check_fields() split out of main().
	* src/chfn.c: Before pam_end(), the return value of the previous
	pam API was already checked. No need to validate it again.
	* src/chfn.c: Avoid implicit brackets.
	* src/chfn.c: Document may_change_field().
	* src/chfn.c: Avoid implicit conversions to booleans.
	* src/chfn.c: Avoid assignments in comparisons.

2007-12-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Compilation fix for PAM support (pamh needs to be
	global since the function split).
	* src/chpasswd.c: Likewise.
	* src/chgpasswd.c: Likewise.
	* src/chpasswd.c: Avoid implicit conversions to booleans.

2007-12-31  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chage.c: Fix typo: s/maximim/maximum/
	* src/chage.c: New function: fail_exit(). Change most of the exit()
	to a fail_exit, which makes sure the files are unlocked (new global
	variables: pw_locked, spw_locked), the PAM transaction is ended, and
	the failure is logged to libaudit (use a global user_name and user_uid
	for logging).
	* src/chage.c: Compilation fix for PAM support (pamh needs to be
	global since the function split).
	* src/chage.c: Document process_flags(), check_flags(), check_perms(),
	open_files(), and close_files().
	* src/chage.c: Split update_age() and get_defaults() out of main()
	* src/chage.c: Drop the privileges just after opening the files.
	* src/chage.c: Do not log to audit only if the user has an entry in
	the shadow file.
	* NEWS, src/chage.c (open_files): Also open the password file for
	writing. This fix chage when the user only has a password entry (and
	no shadow entries).
	* src/chage.c (get_defaults): Use default values that don't change the
	behavior of the account for the fields that are not specified when the
	user has no shadow entry.

2007-12-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c: Compilation fix for PAM support (pamh needs to be
	global since the function split).
	* src/groupadd.c: End the PAM transaction in fail_exit().
	* src/groupadd.c: Document check_flags().

2007-12-30  Nicolas François  <nicolas.francois@centraliens.net>

	* src/vipw.c: Compilation fix for non-gshadow support.

2007-12-29  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c: Added support for gshadow.

2007-12-29  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c: Do not add the new user to the group's
	members, because the group is already the primary group of the new
	user.

2007-12-29  Nicolas François  <nicolas.francois@centraliens.net>

	newusers cleanups
	* src/newusers.c: main() split in new functions: process_flags(),
	check_flags(), check_perms(), open_files(), and close_files().
	* src/newusers.c: Before pam_end(), the return value of the previous
	pam API was already checked. No need to validate it again.
	* src/newusers.c: Avoid implicit brackets.
	* src/newusers.c: Avoid assignments in comparisons.
	* src/newusers.c: Avoid variables with the name of a type.

2007-12-29  Nicolas François  <nicolas.francois@centraliens.net>

	chage cleanups
	* src/chage.c: Before pam_end(), the return value of the previous
	pam API was already checked. No need to validate it again.
	* src/chage.c: main() split in new functions: process_flags(),
	check_flags(), check_perms(), open_files(), and close_files().
	* src/chage.c: Avoid using a variable with the same name as a type.
	* src/chage.c: Remove dead code. It was probably put here to add more
	information to the audit_logger.
	* src/chage.c: Avoid implicit brackets.
	* src/chage.c: Avoid implicit conversion to booleans.
	* src/chage.c: Avoid assignments in comparisons.

2007-12-28  Nicolas François  <nicolas.francois@centraliens.net>

	Same changes for chgpasswd:
	* src/chgpasswd.c: Before pam_end(), the return value of the previous
	pam API was already checked. No need to validate it again.
	* src/chgpasswd.c: main() split in process_flags(), check_flags(),
	check_perms(), open_files(), and close_files().
	* src/chgpasswd.c: Avoid assignments in comparisons.
	* src/chgpasswd.c: Avoid implicit brackets.
	* src/chgpasswd.c: Fix comments to match chgpasswd (group instead of
	user's passwords are changed).

2007-12-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c: Before pam_end(), the return value of the previous
	pam API was already checked. No need to validate it again.
	* src/chpasswd.c: New functions: process_flags(), check_flags(),
	check_perms(). Split out of main().
	* src/chpasswd.c: Other new functions: open_files(), close_files().
	This force flushing the password database after the password file is
	unlocked.
	* src/chpasswd.c: Avoid assignments in comparisons.
	* src/chpasswd.c: Avoid implicit brackets.

2007-12-28  Nicolas François  <nicolas.francois@centraliens.net>

	* src/groupadd.c (find_new_gid): A group with the specified name
	cannot exist at that time. Remove the check.
	* src/groupadd.c (find_new_gid): If oflg is set, gflg is also set.
	Use (!gflg), which is clearer than (!gflg || !oflg).
	* src/groupadd.c (find_new_gid): find_new_gid is never called when an
	GID is specified with -g. Simplify find_new_gid accordingly.
	* src/groupadd.c (process_flags): prefer fail_exit to exit. This avoid
	an explicit call to audit_logger().
	* src/groupadd.c (main): Before pam_end(), the return value of the
	previous pam API was already checked. No need to validate it again.
	* src/groupadd.c (main, check_perms): New function check_perms().
	Split the validation of the user's permissions out of main()

2007-12-28  Nicolas François  <nicolas.francois@centraliens.net>

	src/groupadd.c cleanup
	* src/groupadd.c (fail_exit): When compiled without AUDIT support, if
	the return code was E_SUCCESS, fail_exit() wouldn't have exited. Fix
	the scope of #idef WITH_AUDIT.
	* src/groupadd.c: Avoid implicit brackets.
	* src/groupadd.c: Split the processing and checking of options out of
	main() (process_flags).
	* src/groupadd.c: New function check_flags(). Split the validation of
	options and arguments out of process_flags.
	* src/groupadd.c: Add the parameters' names in the prototypes.

2007-12-27  Nicolas François  <nicolas.francois@centraliens.net>

	libmisc/copydir.c cleanup
	* libmisc/copydir.c: Split copy_tree() in more maintainable functions:
	copy_entry(), copy_dir(), copy_symlink(), copy_hardlink(),
	copy_special(), and copy_file().
	* libmisc/copydir.c: -1 is used to indicate an error, directly set err
	to -1, instead of incrementing it, and checking if not nul at the
	end.
	* libmisc/copydir.c: Avoid assignments in comparisons.
	* libmisc/copydir.c: Document selinux_file_context.
	* libmisc/copydir.c: Avoid implicit brackets.
	* libmisc/copydir.c: Avoid implicit conversions to booleans.

2007-12-27  Nicolas François  <nicolas.francois@centraliens.net>

	gpasswd cleanup
	* src/gpasswd.c: Add argument name to the internal function
	prototypes.
	* src/gpasswd.c: Document global variables.
	* src/gpasswd.c: New function: process_flags(). Split the processing
	of options out of main().
	* src/gpasswd.c: New functions: open_files(), close_files(),
	update_group(). Split out from main() to simplify this (too) big
	function.
	* src/gpasswd.c: New functions: check_perms(), get_group(),
	change_passwd(), check_flags(). Split out of main() to simplify main().
	* src/gpasswd.c: Avoid implicit brackets.
	* src/gpasswd.c: Avoid assignments in comparisons.
	* src/gpasswd.c: Avoid implicit conversions to booleans.

2007-12-27  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 462_warn_to_edit_shadow
	* NEW, src/vipw.c: Recommend editing the shadowed (resp. regular) file
	if the regular (resp. shadowed) file was edited.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 451_login_PATH
	* NEWS, libmisc/setupenv.c: Export PATH according to ENV_PATH and
	ENV_SUPATH, as for su. This impacts login.
	* man/login.1.xml: PATH and SUPATH are now used both when PAM support
	is disabled and enabled.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 496_login_init_session
	* src/login.c, src/sulogin.c: If started as init, start a new session.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 408_passwd_check_arguments
	* NEWS, src/passwd.c: Make sure that no more than one username
	argument was provided.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 412_lastlog_-u_numerical_range
	* NEWS, src/lastlog.c, man/lastlog.8.xml: Accept numerical user, or
	ranges with the -u option.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 466_fflush-prompt
	* libmisc/Makefile.am, lib/prototypes.h, libmisc/yesno.c, src/grpck.c,
	src/pwck.c: move yes_or_no() from grpck/pwck to a separate
	libmisc/yesno.c (with a read_only argument).
	* libmisc/fields.c, libmisc/yesno.c: Make sure stdout is flushed before
	reading the user's answer.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge Debian's patch 480_getopt_args_reorder
	* NEWS, src/su.c: su's arguments are now reordered.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge RedHat's patch shadow-4.0.18.1-mtime.patch:
	* NEWS: Document that usermod will now preserve user's file modification
	and access time.
	* libmisc/copydir.c: Preserve the access and modification time of copied
	files. This is important for usermod. This will also impact useradd, for
	the skeleton files, but this is not important.
	* libmisc/copydir.c: Stop and return an error if a file could not be
	closed after during a copy.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Cleanups:
	* src/useradd.c (find_new_gid): Check that gflg is not set (assert).
	* src/useradd.c (find_new_gid): Do not check the group name uniqueness
	(already checked in main).
	* src/useradd.c (find_new_gid): Avoid a "continue" in the loop.
	* src/useradd.c (find_new_gid): Remove irrelevant comments.
	* src/useradd.c (find_new_gid): Fix the function definition's comment.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge RedHat's patch shadow-4.0.18.1-findNewUidOnce.patch:
	* src/useradd.c (usr_update): Do not call find_new_uid(). The UID was
	already either specified or found by another call to find_new_uid().
	* src/useradd.c (find_new_uid): Always start with uid_min (find_new_uid()
	is never called when user_id was already specified).
	* src/useradd.c (find_new_uid): Fix the comments (find_new_uid() is not
	called when the UID is specified (uflg)).
	* src/useradd.c (main): Only call find_new_uid() if (!oflg) and (!uflg).
	If uflg is set (but not oflg), check the UID uniqueness.
	* src/useradd.c (find_new_uid): Don't check the uid and user name
	uniqueness in find_new_uid(). The user name uniqueness is already checked
	during the parameter validation. UID uniqueness is also checked (see
	above).
	* src/useradd.c (find_new_uid): Don't check uflg in find_new_uid().
	* src/useradd.c (find_new_uid): Make sure that find_new_uid() is not
	called when uflg is set (assert).

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge RedHat's patch shadow-4.1.0-lOption.patch
	* NEWS, src/useradd.c, man/useradd.8.xml: Add option -l to avoid adding
	the user to the lastlog and faillog databases.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c, src/groupadd.c: NO_GETPWENT is no more supported. Remove
	associated chunks of code.

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	* man/groupadd.8.xml: Document the long options (--force, --gid, --key,
	--non-unique).

2007-12-26  Nicolas François  <nicolas.francois@centraliens.net>

	Merge RedHat's patch shadow-4.0.3-noinst.patch
	* NEWS, lib/Makefile.am: Do not install the shadow library per default.
	lib_LTLIBRARIES changed to noinst_LTLIBRARIES.

2007-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, configure.in: Prepare the 4.1.0 release.

2007-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chgpasswd.c: Use chgpasswd PAM policy file instead of
	chpasswd's one.

2007-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pwconv.8.xml: Fix typos.
	* man/chpasswd.8.xml, man/chgpasswd.8.xml: Document the NONE crypt
	method.
	* man/login.defs.d/MAIL_DIR.xml: Add comment regarding useradd not
	using MAIL_FILE.
	* man/login.defs.d/ERASECHAR.xml, man/login.defs.d/KILLCHAR.xml,
	man/login.defs.d/CONSOLE_GROUPS.xml, man/login.defs.d/ENV_HZ.xml,
	man/login.defs.d/ENV_PATH.xml, man/login.defs.d/ENV_SUPATH.xml:
	These variables are also used by some tools when compiled with PAM
	support.
	* man/login.defs.d/ENV_HZ.xml: Add note that it is only used by
	sulogin when compiled with PAM support.
	* man/login.defs.d/ENV_SUPATH.xml: Typos: ENV_PATH -> ENV_SUPATH,
	and mention sbin in the path.
	* man/login.defs.d/LOGIN_STRING.xml: Fix typo: confition ->
	condition.
	* man/sg.1.xml: Add CONFIGURATION section (SYSLOG_SG_ENAB).
	* man/su.1.xml: ENV_HZ, LOGIN_STRING, MAIL_DIR, USERGROUPS_ENAB
	are only used when su is compiled without PAM support.
	* man/login.defs.5.xml: Added variables: OBSCURE_CHECKS_ENAB
	PASS_ALWAYS_WARN PASS_CHANGE_TRIES SULOG_FILE SU_NAME
	SU_WHEEL_ONLY SYSLOG_SG_ENAB SYSLOG_SU_ENAB.
	* man/login.defs.5.xml: ENVIRON_FILE is only used when compiled
	without PAM support.
	* man/login.defs.5.xml: sulogin uses variables even when compiled
	with PAM support.
	* man/login.1.xml: ENV_HZ ENV_PATH ENV_SUPATH MAIL_DIR UMASK are
	only used when login is not compiled with PAM support.

2007-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Make sure is_console is only defined when USE_PAM
	is not defined.

2007-12-09  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/pwd2spwd.c: Fix time() prototype.

2007-12-08  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/CONSOLE_GROUPS.xml,
	man/login.defs.d/CONSOLE.xml, man/login.defs.d/DEFAULT_HOME.xml,
	man/login.defs.d/ENV_HZ.xml, man/login.defs.d/ENVIRON_FILE.xml,
	man/login.defs.d/ENV_PATH.xml, man/login.defs.d/ENV_SUPATH.xml,
	man/login.defs.d/ENV_TZ.xml, man/login.defs.d/ERASECHAR.xml,
	man/login.defs.d/FAIL_DELAY.xml,
	man/login.defs.d/FAILLOG_ENAB.xml,
	man/login.defs.d/FAKE_SHELL.xml, man/login.defs.d/FTMP_FILE.xml,
	man/login.defs.d/HUSHLOGIN_FILE.xml,
	man/login.defs.d/ISSUE_FILE.xml, man/login.defs.d/KILLCHAR.xml,
	man/login.defs.d/LASTLOG_ENAB.xml, man/login.defs.d/LOGIN_RETRIES.xml,
	man/login.defs.d/LOGIN_TIMEOUT.xml, man/login.defs.d/LOG_OK_LOGINS.xml,
	man/login.defs.d/LOG_UNKFAIL_ENAB.xml,
	man/login.defs.d/MAIL_CHECK_ENAB.xml, man/login.defs.d/MOTD_FILE.xml,
	man/login.defs.d/NOLOGINS_FILE.xml,
	man/login.defs.d/OBSCURE_CHECKS_ENAB.xml,
	man/login.defs.d/PASS_ALWAYS_WARN.xml,
	man/login.defs.d/PASS_CHANGE_TRIES.xml,
	man/login.defs.d/PASS_MAX_LEN.xml,
	man/login.defs.d/PORTTIME_CHECKS_ENAB.xml,
	man/login.defs.d/QUOTAS_ENAB.xml, man/login.defs.d/SULOG_FILE.xml,
	man/login.defs.d/SU_NAME.xml, man/login.defs.d/SU_WHEEL_ONLY.xml,
	man/login.defs.d/SYSLOG_SG_ENAB.xml,
	man/login.defs.d/SYSLOG_SU_ENAB.xml,
	man/login.defs.d/TTYGROUP.xml, man/login.defs.d/TTYTYPE_FILE.xml,
	man/login.defs.d/ULIMIT.xml, man/login.defs.d/USERGROUPS_ENAB.xml:
	New documentation of login.defs variables.
	* man/login.defs.d/MAIL_DIR.xml: Updated. It now contains the
	MAIL_FILE documentation.
	* man/login.defs.d/LOGIN_STRING.xml: Updated. Mentions %s.
	* man/pwconv.8.xml, man/groupmems.8.xml, man/groupdel.8.xml,
	man/useradd.8.xml, man/pwck.8.xml, man/groupadd.8.xml,
	man/sulogin.8.xml, man/newgrp.1.xml, man/usermod.8.xml,
	man/su.1.xml, man/vipw.8.xml, man/passwd.1.xml,
	man/groupmod.8.xml, man/login.1.xml, man/userdel.8.xml,
	man/grpck.8.xml: Added CONFIGURATION section.
	* man/generate_mans.mak: The generations of manpages depends on
	the variables from the Makefiles. Add the dependency on Makefile.
	* man/login.defs.5.xml: New login.defs variable documented.
	* man/Makefile.am: Added XML variable documentation to the
	distributed files.

2007-12-05  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gshadow.5.xml: Fix the newgrp section in the gshadow.5
	manpage. Thanks to Andre Majorel <aym-naibed@teaser.fr>.

2007-11-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/Makefile.am: Added the login.defs variables description to
	the man's EXTRA_DIST.

2007-11-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chfn.1.xml: Uses CHFN_AUTH, CHFN_RESTRICT, LOGIN_STRING.
	* man/chgpasswd.8.xml: Uses ENCRYPT_METHOD, MAX_MEMBERS_PER_GROUP,
	MD5_CRYPT_ENAB, SHA_CRYPT_MIN_ROUNDS (SHA_CRYPT_MAX_ROUNDS).
	* man/chpasswd.8.xml: Switch to using entities for ENCRYPT_METHOD,
	MD5_CRYPT_ENAB, SHA_CRYPT_MIN_ROUNDS (SHA_CRYPT_MAX_ROUNDS).
	* man/chsh.1.xml: Uses CHSH_AUTH, LOGIN_STRING.
	* man/expiry.1.xml: Does not use any login.defs parameter.
	* man/gpasswd.1.xml: Uses ENCRYPT_METHOD, MAX_MEMBERS_PER_GROUP,
	MD5_CRYPT_ENAB, SHA_CRYPT_MIN_ROUNDS.
	* man/login.defs.5.xml: Added CHSH_AUTH.
	* man/login.defs.5.xml: Cross reference -> cross references.
	* man/login.defs.5.xml: chfn only uses CHFN_AUTH when no_pam.
	* man/login.defs.5.xml: chsh uses CHSH_AUTH, not CHFN_AUTH.
	* man/login.defs.d/CHSH_AUTH.xml: Added.
	* man/login.defs.5.xml: chsh uses parameters only when no_pam.
	* man/login.defs.5.xml: expiry does not use CONSOLE_GROUPS, even
	if linked in the binary.
	* man/newusers.8.xml: Uses ENCRYPT_METHOD, MAX_MEMBERS_PER_GROUP,
	MD5_CRYPT_ENAB, PASS_MAX_DAYS, PASS_MIN_DAYS, PASS_WARN_AGE,
	SHA_CRYPT_MIN_ROUNDS, UMASK.

2007-11-26  Nicolas François  <nicolas.francois@centraliens.net>

	* man/generate_translations.mak, man/po/Makefile.in.in: Add
	--expand-all-entities to the call to xml2po to avoid translating
	the external entities separately.

2007-11-26  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.d/, man/login.defs.d/CHFN_RESTRICT.xml,
	man/login.defs.d/MAIL_DIR.xml, man/login.defs.d/PASS_MAX_DAYS.xml,
	man/login.defs.d/SHA_CRYPT_MIN_ROUNDS.xml,
	man/login.defs.d/CHFN_AUTH.xml, man/login.defs.d/MD5_CRYPT_ENAB.xml,
	man/login.defs.d/PASS_WARN_AGE.xml, ·man/login.defs.d/UMASK.xml,
	man/login.defs.d/PASS_MIN_DAYS.xml, man/login.defs.d/UID_MAX.xml,
	man/login.defs.d/LOGIN_STRING.xml, man/login.defs.d/GID_MAX.xml,
	man/login.defs.d/ENCRYPT_METHOD.xml, man/login.defs.d/USERDEL_CMD.xml,
	man/login.defs.d/MAX_MEMBERS_PER_GROUP.xml, man/login.defs.5.xml:
	Put each variable description in an external entities. This will permit
	to reference them in the various utils manpages.
	* man/login.defs.5.xml: Describe the usage of variables by each
	tools when compiled without PAM support.

2007-11-26  Nicolas François  <nicolas.francois@centraliens.net>

	* po/stats: Do not generate gmo files.

2007-11-25  Nicolas François  <nicolas.francois@centraliens.net>

	* man/po/LINGUAS: Added missing LINGUAS.
	* man/po/de.po, man/po/fr.po, man/po/it.po, man/po/pl.po,
	man/po/ru.po, man/po/sv.po: Updated.

2007-11-25  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in, man/po/Makefile.in.in, man/po/Makevars,
	man/po/POTFILES.in, man/Makefile.am: Generate the PO files for the
	manpages in the man/po directory (instead of man/<lang>). Use a
	Makefile.in.in based on gettext's one. This ensure that the PO are
	generated before being used in the <lang> directories.
	* man/generate_mans.mak, man/generate_translations.mak,
	man/Makefile.am: New makefile for the generation of manpages from
	XML (generate_mans.mak). This avoid duplicate chunks in
	generate_translations.mak and Makefile.am
	* man/de/de.po, man/fr/fr.po, man/it/it.po, man/pl/pl.po,
	man/ru/ru.po, man/sv/sv.po: Moved to...
	* man/po/de.po, man/po/fr.po, man/po/it.po, man/po/pl.po,
	man/po/ru.po, man/po/sv.po: ... here.

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, src/lastlog.c, src/newusers.c, src/chpasswd.c,
	src/usermod.c, src/chgpasswd.c, src/vipw.c, src/useradd.c,
	src/su.c, src/groupmod.c, src/passwd.c, src/groupadd.c,
	src/chage.c, src/faillog.c, src/chsh.c: Do not use tabulations in
	Usage strings.
	* po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po,
	po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/nb.po, po/pl.po, po/pt_BR.po, po/pt.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tl.po, po/tr.po,
	po/uk.po, po/vi.po: Unfuzzy previous changes.
	* po/bs.po, po/he.po, po/nn.po, po/sq.po: No Usage string
	translated. Just updated PO.
	* po/dz.po, po/km.po, po/ko.po, po/ne.po, po/nl.po, po/zh_CN.po,
	po/zh_TW.po: It would be too error prone for me to unfuzzy these
	ones. Updated PO. (km and ne should be reviewed: options are
	translated).

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* po/ne.po, po/bs.po, po/cs.po, po/pt_BR.po, po/km.po, po/es.po,
	po/eu.po, po/ko.po, po/hu.po, po/sk.po, po/vi.po, po/uk.po,
	po/ro.po, po/sq.po, po/ru.po, po/id.po, po/nb.po, po/el.po,
	po/gl.po, po/fr.po, po/nl.po, po/pl.po, po/nn.po, po/it.po,
	po/dz.po, po/tl.po, po/pt.po, po/ca.po, po/da.po, po/tr.po,
	po/sv.po, po/de.po, po/ja.po, po/zh_TW.po, po/he.po, po/fi.po,
	po/zh_CN.po: Run "make update-po" in the po directory.

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: New configure option: --with-sha-crypt enabled by
	default. Keeping the feature enabled is safe. Disabling it permits
	to disable the references to the SHA256 and SHA512 password
	encryption algorithms from the usage help and manuals (in addition
	to the support for these algorithms in the code).
	* libmisc/obscure.c, libmisc/salt.c, src/newusers.c,
	src/chpasswd.c, src/chgpasswd.c, src/passwd.c: ENCRYPT_METHOD is
	always supported in login.defs. Remove the ENCRYPTMETHOD_SELECT
	preprocessor condition.
	* libmisc/obscure.c, libmisc/salt.c, src/newusers.c,
	src/chpasswd.c, src/chgpasswd.c, src/passwd.c: Disable SHA256 and
	SHA512 if USE_SHA_CRYPT is not defined (this corresponds to a
	subset of the ENCRYPTMETHOD_SELECT sections).

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/encrypt.c: If we requested a non DES encryption, make sure
	crypt returned a encrypted password longer than 13 chars. This
	protects against the GNU crypt() which does not return NULL if the
	algorithm is not supported, and return a DES encrypted password.

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Add missing #include "getdef.h"

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Provide the crypt method to all the
	crypt_make_salt invocations.
	* src/newusers.c: Tag the ENCRYPTMETHOD_SELECT dependent code
	accordingly.

2007-11-24  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Make sure method is not NULL, defaulting to DES.
	Thanks to Dan Kopecek <dkopecek@redhat.com>.
	* src/chpasswd.c, src/chgpasswd.c: Do not use DES by default, but
	the system default define in /Etc/login.defs. Thanks to Dan
	Kopecek <dkopecek@redhat.com>.
	* NEWS, man/chpasswd.8.xml, man/chgpasswd.8.xml: Do not mention
	DES as the default algorithm.
	* src/chpasswd.c, src/chgpasswd.c: Tag the ENCRYPTMETHOD_SELECT
	dependent code accordingly.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Move the srandom call to gensalt.
	* libmisc/salt.c (gensalt): Replace the test on salt_size by an
	assert.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	Patch contributed by Dan Kopecek <dkopecek@redhat.com>
	* src/chpasswd.c, src/chgpasswd.c, src/newusers.c: Fix compilation
	when ENCRYPTMETHOD_SELECT is not defined.
	* libmisc/salt.c (MAGNUM): The nul char was put on (array)[2]
	instead of (array)[3].
	* libmisc/salt.c: MAGNUM should be defined even if
	ENCRYPTMETHOD_SELECT is not defined.
	* libmisc/salt.c: Use random instead of rand.
	* libmisc/salt.c (gensalt): New function to generate a salt
	(instead of using gettimeofday).

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newusers.c: New options -c/--crypt-method
	-s/--sha-rounds.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chpasswd.c: Added crypt method: NONE.
	* src/chpasswd.c: Added --sha-rounds to the usage().
	* libmisc/Makefile.am, libmisc/getlong.c, src/chgpasswd.c,
	src/chpasswd.c, lib/prototypes.h: New getlong function. Replace
	chpasswd's and chgpasswd's getnumber.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/groupio.c: Removed unused variable 'member'.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chpasswd.8.xml: Document the variables used by chpasswd.
	The definitions are copied from login.defs. I should try to use a
	less error prone process for this.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* man/login.defs.5.xml: Use <replaceable> for the values set by
	users. (was sometimes <emphasis remap='I'>)
	* man/login.defs.5.xml: Use <option> vor the variable names. This
	makes the manpage much more readable.
	* man/login.defs.5.xml (ENCRYPT_METHOD, MD5_CRYPT_ENAB,
	SHA_CRYPT_MIN_ROUNDS, SHA_CRYPT_MAX_ROUNDS): Mention that command
	line option may supersede the system setting.
	* man/login.defs.5.xml: Document the variables used by chpasswd
	and chgpasswd.

2007-11-23  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/shadowmem.c, lib/groupmem.c, lib/pwmem.c:
	svn propset svn:keywords Id

2007-11-22  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, lib/getdef.c, man/login.defs.5.xml: New login.defs
	variable: MAX_MEMBERS_PER_GROUP. Used for the split groups support.
	* lib/commonio.c, lib/commonio.h: Add an open_hook and close_hook
	operation. They are called after the database is actually opened
	and parse, or before it is closed.
	* lib/groupio.c: Add an open_hook to merge split groups, and an
	close group to split groups if MAX_MEMBERS_PER_GROUP is set.
	This fixes gpasswd and chgpasswd when split groups are used.
	* lib/sgroupio.c, lib/shadowio.c, lib/pwio.c: No open or close
	hooks for these databases. (unsure about what should be the gshadow
	behavior for split groups)

2007-11-22  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/gpasswd.c: Read the group and shadow groups using
	gr_locate and sgr_locate. gpasswd write in the file database. Thus
	it should read information from the file database, not using
	getgrnam. The change to sgr_locate is just for consistency. This
	requires opening the group databases (read only) using
	gr_open/sgr_open.

2007-11-22  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: SHADOWGRP added to AM_CONDITIONAL for the
	generation of manpages.
	* man/generate_translations.mak: Added pam/no_pam condition (like
	in man/Makefile.am).
	* man/Makefile.am, man/generate_translations.mak: Added
	gshadow/no_gshadow condition.
	* man/gpasswd.1.xml: Use the gshadow/no_gshadow condition to
	change the manpage depending on the shadow group support.
	* NEWS: Indicate that manpages should be re-generated if configure
	option are changed, due to conditions.

2007-11-22  Nicolas François  <nicolas.francois@centraliens.net>

	* po/ru.po: Updated to 399t. Thanks to Yuri Kozlov <kozlov.y@gmail.com>.
	* man/po/ru.po: Updated to 757t. Thanks also to Yuri Kozlov
	<kozlov.y@gmail.com>.

2007-11-22  Nicolas François  <nicolas.francois@centraliens.net>

	* man/Makefile.am: Add support for conditionally including
	paragraphs. (e.g. to support the documentation of PAM and !PAM
	features).

2007-11-21  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newusers.8.xml: Added /etc/gshadow, /etc/group, /etc/shadow,
	and /etc/passwd to section FILES.
	* man/newusers.8.xml: Mentions that PAM is not used to set the
	passwords.
	* man/chpasswd.8.xml: Added section FILES (/etc/passwd,
	/etc/shadow, /etc/login.defs).
	* man/chpasswd.8.xml: Use the same paragraph as in newusers.8.xml
	to indicate that PAM is not used.
	* man/chgpasswd.8.xml: Added section FILES (/etc/group,
	/etc/gshadow, /etc/login.defs).

2007-11-21  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newusers.c: Try harder to get the GID equal to the UID.
	This was not the case when the GID is not specified, and a GID
	exist with an ID higher than the all the UIDs.
	* src/newusers.c: Typo in comment: contrained -> constrained.

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c: If the shadow group file is not present, do not
	try to locate the group entry from /etc/gshadow, and set the
	password in /etc/group.

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/obscure.c, libmisc/salt.c, src/passwd.c: Match DES, MD5,
	SHA256, and SHA512 exactly (not only the first 3/6 chars).
	* libmisc/salt.c (SHA_salt_rounds): Set rounds to the specified
	prefered_rounds value, if specified.
	* src/gpasswd.c, libmisc/salt.c: Fix compilation warnings (use
	size_t for lengths).
	* src/chpasswd.c, src/chgpasswd.c: Add missing parenthesis.

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/sv, man/de, man/fr, man/pl, man/ru, man/it: Ignore the
	generated manpages. Add *.[1358] to the svn:ignore property.

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/chgpasswd.c, src/chpasswd.c: The -c, -e, and -m options are
	exclusives.

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chpasswd.8.xml, man/chgpasswd.8.xml: Document how the
	encryption algorithm is chosen for the passwords. Document the new
	-c and -s options. Add a reference to login.defs(5).
	* man/login.defs.5.xml: Document the ENCRYPT_METHOD,
	MD5_CRYPT_ENAB, SHA_CRYPT_MIN_ROUNDS, and SHA_CRYPT_MAX_ROUNDS
	variables.
	* etc/login.defs: Indicate that MD5_CRYPT_ENAB is deprecated.
	Document the relationship with PAM for MD5_CRYPT_ENAB and
	ENCRYPT_METHOD.

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Increase the size of crypt_passwd from 128 to 256
	to avoid overflow in case of SHA512 (161 should be sufficient).

2007-11-20  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, libmisc/salt.c: Add parameters to
	crypt_make_salt to force the crypt method and number of rounds.
	* libmisc/salt.c: Add parameter to SHA_salt_rounds to force the
	number of rounds.
	* libmisc/salt.c, lib/getdef.c: ENCRYPT_METHOD and MD5_CRYPT_ENAB
	are needed also when USE_PAM (e.g. for chpasswd).
	* src/passwd.c, src/newusers.c, src/gpasswd.c: Use the new
	crypt_make_salt prototype
	* src/chpasswd.c, src/chgpasswd.c: Add option -c, --crypt-method
	and -s, --sha-rounds to specify the crypt method and number of
	rounds in case of one of the SHA methods. The new prototype of
	crypt_make_salt simplifies the handling of -m, --md5.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: The salt has a random size (between 8 and 16
	bytes).
	* lib/getdef.c, etc/login.defs: Add definitions for
	SHA_CRYPT_MIN_ROUNDS and SHA_CRYPT_MAX_ROUNDS.
	* libmisc/salt.c: Use SHA_CRYPT_MIN_ROUNDS and SHA_CRYPT_MAX_ROUNDS
	to add a random number of rounds if needed.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c (MAGNUM): Terminate the array with nul (the array
	is then used with strcat).
	* libmisc/salt.c (crypt_make_salt): Initialize result[0] to nul at
	the beginning (was not initialized when USE_PAM).
	* libmisc/salt.c (crypt_make_salt): Check that ENCRYPT_METHOD is a
	valid crypt method.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, libmisc/obscure.c, libmisc/salt.c, src/passwd.c,
	lib/getdef.c, etc/login.defs: Add support for SHA256 and SHA512
	encrypt methods. Apply RedHat's patch shadow-4.0.18.1-sha256.patch.
	Thanks to Peter Vrabec. Hardly no changes except re-indent and
	changes related to recent modifications (max_salt_len in
	crypt_make_salt). Changes in lib/defines.h not applied (definition
	of ENCRYPTMETHOD_SELECT). I will add a configure check or flag.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/de/Makefile.am: Add su.1 to the generated manpages.
	* man/fr/Makefile.am: Add id.1 to EXTRA_DIST. It will be
	generated.
	* man/pl/Makefile.am: Add groupmems.8 to the generated manpages.
	* man/it/Makefile.am: Add logoutd.8 to EXTRA_DIST. It will be
	generated.
	* man/de/su.1, man/fr/id.1, man/pl/groupmems.8, man/it/logoutd.8:
	Removed, since auto-generated.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	Fix some compilation warnings:
	* src/login.c: "dereferencing type-punned pointer will break
	strict-aliasing rules", add a variable indirection: ptr_pam_user.
	* lib/commonio.c: do not initialize the sb stat structure.
	* lib/pwio.c, lib/shadowio.c, lib/sgroupio.c, lib/groupio.c:
	initialize the security context if WITH_SELINUX.
	* lib/nscd.c: The service argument is not const (used in the exec*
	parameters). This matches with the prototype definition.
	* src/groupmems.c: Avoid ++i when i is also used in the same line.
	* src/newusers.c: i is positive every time it is compared. Add
	cast to unsigned int.
	* src/nologin.c: Use a main() prototype with no arguments.
	* libmisc/getdate.y: Initialize the type and value fields of the
	terminating entry for each TABLE.
	* libmisc/tz.c: Use "TZ=CST6CDT" as the default timezone.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pl/Makefile.am: Add getspnam.3 to EXTRA_DIST since it is
	generated with shadow.3.
	* man/generate_translations.mak: Clean all the manpages, based on
	$(EXTRA_DIST), not $(man_MANS).

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/sv/getspnam.3, man/sv/faillog.5, man/sv/faillog.8,
	man/sv/grpconv.8, man/sv/chsh.1, man/sv/shadow.3,
	man/sv/grpunconv.8, man/sv/shadow.5, man/sv/newgrp.1,
	man/sv/limits.5, man/sv/gpasswd.1, man/sv/sg.1, man/sv/userdel.8,
	man/sv/lastlog.8, man/sv/login.access.5, man/sv/grpck.8,
	man/sv/chfn.1, man/sv/expiry.1, man/sv/newusers.8,
	man/sv/chpasswd.8, man/sv/pwconv.8, man/sv/logoutd.8,
	man/sv/groupmems.8, man/sv/usermod.8, man/sv/pwunconv.8,
	man/sv/su.1, man/sv/groupdel.8, man/sv/chgpasswd.8,
	man/sv/login.defs.5, man/sv/vipw.8, man/sv/useradd.8,
	man/sv/gshadow.5, man/sv/passwd.1, man/sv/groupmod.8,
	man/sv/passwd.5, man/sv/chage.1, man/sv/porttime.5,
	man/sv/login.1, man/sv/pwck.8, man/sv/nologin.8,
	man/sv/groupadd.8, man/sv/suauth.5, man/sv/vigr.8,
	man/sv/groups.1, man/de/passwd.1, man/de/newgrp.1, man/de/chsh.1,
	man/de/passwd.5, man/de/login.1, man/de/vipw.8, man/de/chfn.1,
	man/de/vigr.8, man/de/groups.1, man/fr/getspnam.3,
	man/fr/faillog.5, man/fr/faillog.8, man/fr/grpconv.8,
	man/fr/chsh.1, man/fr/shadow.3, man/fr/grpunconv.8,
	man/fr/shadow.5, man/fr/newgrp.1, man/fr/limits.5,
	man/fr/gpasswd.1, man/fr/sg.1, man/fr/userdel.8,
	man/fr/login.access.5, man/fr/lastlog.8, man/fr/grpck.8,
	man/fr/chfn.1, man/fr/expiry.1, man/fr/newusers.8,
	man/fr/chpasswd.8, man/fr/pwconv.8, man/fr/logoutd.8,
	man/fr/usermod.8, man/fr/pwunconv.8, man/fr/su.1,
	man/fr/groupdel.8, man/fr/login.defs.5, man/fr/vipw.8,
	man/fr/useradd.8, man/fr/gshadow.5, man/fr/passwd.1,
	man/fr/groupmod.8, man/fr/passwd.5, man/fr/porttime.5,
	man/fr/chage.1, man/fr/login.1, man/fr/pwck.8, man/fr/groupadd.8,
	man/fr/suauth.5, man/fr/vigr.8, man/fr/groups.1, man/pl/faillog.5,
	man/pl/faillog.8, man/pl/chsh.1, man/pl/grpconv.8,
	man/pl/grpunconv.8, man/pl/shadow.5, man/pl/newgrp.1,
	man/pl/limits.5, man/pl/gpasswd.1, man/pl/sg.1, man/pl/userdel.8,
	man/pl/login.access.5, man/pl/lastlog.8, man/pl/grpck.8,
	man/pl/chfn.1, man/pl/expiry.1, man/pl/newusers.8,
	man/pl/pwconv.8, man/pl/chpasswd.8, man/pl/logoutd.8,
	man/pl/usermod.8, man/pl/pwunconv.8, man/pl/su.1,
	man/pl/groupdel.8, man/pl/vipw.8, man/pl/login.defs.5,
	man/pl/useradd.8, man/pl/passwd.1, man/pl/groupmod.8,
	man/pl/passwd.5, man/pl/porttime.5, man/pl/chage.1,
	man/pl/login.1, man/pl/pwck.8, man/pl/groupadd.8, man/pl/suauth.5,
	man/pl/vigr.8, man/pl/groups.1, man/ru/getspnam.3,
	man/ru/faillog.5, man/ru/faillog.8, man/ru/grpconv.8,
	man/ru/chsh.1, man/ru/shadow.3, man/ru/grpunconv.8,
	man/ru/shadow.5, man/ru/newgrp.1, man/ru/limits.5,
	man/ru/gpasswd.1, man/ru/sg.1, man/ru/userdel.8,
	man/ru/login.access.5, man/ru/lastlog.8, man/ru/grpck.8,
	man/ru/chfn.1, man/ru/expiry.1, man/ru/newusers.8,
	man/ru/chpasswd.8, man/ru/pwconv.8, man/ru/logoutd.8,
	man/ru/groupmems.8, man/ru/usermod.8, man/ru/pwunconv.8,
	man/ru/su.1, man/ru/groupdel.8, man/ru/chgpasswd.8,
	man/ru/login.defs.5, man/ru/vipw.8, man/ru/useradd.8,
	man/ru/gshadow.5, man/ru/passwd.1, man/ru/groupmod.8,
	man/ru/passwd.5, man/ru/chage.1, man/ru/porttime.5,
	man/ru/login.1, man/ru/pwck.8, man/ru/nologin.8,
	man/ru/groupadd.8, man/ru/suauth.5, man/ru/vigr.8,
	man/ru/groups.1, man/it/getspnam.3, man/it/faillog.5,
	man/it/faillog.8, man/it/grpconv.8, man/it/chsh.1,
	man/it/shadow.3, man/it/grpunconv.8, man/it/shadow.5,
	man/it/newgrp.1, man/it/gpasswd.1, man/it/sg.1, man/it/userdel.8,
	man/it/lastlog.8, man/it/grpck.8, man/it/chfn.1, man/it/expiry.1,
	man/it/newusers.8, man/it/chpasswd.8, man/it/pwconv.8,
	man/it/usermod.8, man/it/pwunconv.8, man/it/su.1,
	man/it/groupdel.8, man/it/vipw.8, man/it/useradd.8,
	man/it/passwd.1, man/it/groupmod.8, man/it/passwd.5,
	man/it/porttime.5, man/it/chage.1, man/it/login.1, man/it/pwck.8,
	man/it/groupadd.8, man/it/vigr.8, man/it/groups.1,
	man/pl/shadow.3, man/pl/sulogin.8, man/pl/id.1, man/ru/sulogin.8,
	man/ru/id.1, man/it/id.1: Remove generated translated manpages.
	They are still distributed with the shadow tarballs.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pl/chgpassw.8: Remove chgpassw.8 since the real manpage
	should be named chgpasswd.8.

2007-11-19  Nicolas François  <nicolas.francois@centraliens.net>

	* man/vigr.8.xml: Remove file. The vigr man page is generated from
	the vipw XML file.

2007-11-18  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/prototypes.h, configure.in, libmisc/Makefile.am,
	libmisc/xgetXXbyYY.c, libmisc/xgetpwnam.c, libmisc/xgetpwuid.c,
	libmisc/xgetgrnam.c, libmisc/xgetgrgid.c, libmisc/xgetspnam.c:
	Added functions xgetpwnam(), xgetpwuid(), xgetgrnam(),
	xgetgrgid(), and xgetspnam(). They allocate memory for the
	returned structure and are more robust to successive calls. They
	are implemented with the libc's getxxyyy_r() functions if
	available.
	* NEWS, libmisc/limits.c, libmisc/entry.c, libmisc/chowntty.c,
	libmisc/addgrps.c, libmisc/myname.c, libmisc/rlogin.c,
	libmisc/pwdcheck.c, src/newgrp.c, src/login_nopam.c, src/login.c,
	src/userdel.c, src/lastlog.c, src/grpck.c, src/gpasswd.c,
	src/newusers.c, src/chpasswd.c, src/chfn.c, src/groupmems.c,
	src/usermod.c, src/expiry.c, src/groupdel.c, src/chgpasswd.c,
	src/su.c, src/useradd.c, src/groupmod.c, src/passwd.c, src/pwck.c,
	src/groupadd.c, src/chage.c, src/login.c, src/suauth.c,
	src/faillog.c, src/groups.c, src/chsh.c, src/id.c: Review all the
	usage of one of the getpwnam(), getpwuid(), getgrnam(),
	getgrgid(), and getspnam() functions. It was noticed on
	http://bugs.debian.org/341230 that chfn and chsh use a passwd
	structure after calling a pam function, which result in using
	information from the passwd structure requested by pam, not the
	original one. It is much easier to use the new xget... functions
	to avoid these issues. I've checked which call to the original
	get... functions could be left (reducing the scope of the
	structure if possible), and I've left comments to ease future
	reviews (e.g. /* local, no need for xgetpwnam */).
	Note: the getpwent/getgrent calls should probably be checked also.
	* src/groupdel.c, src/expiry.c: Fix typos in comments.
	* src/groupmod.c: Re-indent.
	* lib/Makefile.am, lib/groupmem.c, lib/groupio.c, lib/pwmem.c,
	lib/pwio.c, lib/shadowmem.c, lib/shadowio.c: Move the __<xx>_dup
	functions (used by the xget... functions) from the <xx>io.c files
	to the new <xx>mem.c files. This avoid linking some utils against
	the SELinux library.

2007-11-18  Nicolas François  <nicolas.francois@centraliens.net>

	* man/pl/pl.po: Fix typo: chgpassw -> chgpasswd.
	* man/pl/Makefile.am: Fix typo: chgpassw -> chgpasswd.
	* man/de/de.po: groups shall not be translated (for command,
	refname, or refentrytitle).

2007-11-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Fix typo introduced while fixing
	http://bugs.debian.org/451521 (compile fix).

2007-11-18  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/Makefile.am: Fix typo: EXTRA_DOST -> EXTRA_DIST.

2007-11-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login_nopam.c: Fix a typo in a comment.

2007-11-18  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Do not document the behavior compared to old
	versions.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* man/usermod.8.xml: Document the differences between locking an
	account and locking a password.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/usermod.c: Refuse to unlock an account when it would
	result in a passwordless account.  Based on Openwall's patch
	shadow-4.0.4.1-owl-usermod-unlock.diff.
	* NEWS, src/passwd.c: Likewise.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c (path_prefix): Make sure that the prefix is the
	name of a directory (not only the beginning of a directory).
	Openwall patch shadow-4.0.4.1-owl-userdel-path_prefix.diff.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Do not give an indication that the group has no
	password.
	* src/newgrp.c: Do not only bail on syslog if the password is not
	valid. Also give an indication to the user on stderr.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	Fixes from Openwall patch shadow-4.0.4.1-owl-chage-drop-priv.diff:
	* src/chage.c: Remove cleanup(). pw_lock is never called. Replace
	cleanup(2) by spw_unlock and remove the calls to cleanup(1).
	* src/chage.c: Remove variable pwrw. It is always set to 0. The
	password database is always read only.
	* src/chage.c: Make chage -l also drop the saved GID.
	* src/chage.c: Prefer setregid/setreuid to setgid/setuid.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	Fixes from Openwall patch shadow-4.0.4.1-alt-man.diff:
	* man/useradd.8.xml: Indicate that the NIS caveats is also valid
	for any external database as LDAP.
	* man/groupadd.8.xml: Likewise.
	* man/groupadd.8.xml: Reorder and reformat the caveats bullets.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS: Applied Debian patch 409_man_generate_from_PO to
	automatically generate the translated manpages from the POs.
	* man/Makefile.am: Replace the individual rules for the generation
	of the manpages (from XML) by a generic Makefile rule an
	dependencies for the linked manpages.
	* man/generate_translations.mak: Generic rules for all the
	generated translated manpages (if ENABLE_REGENERATE_MAN).
	* man/Makefile.am: Removed rules for all the generated translated
	manpages.
	* man/sv/Makefile.am, man/de/Makefile.am, man/fr/Makefile.am,
	man/pl/Makefile.am, man/ru/Makefile.am, man/it/Makefile.am:
	Include generate_translations.mak to handle the generated
	translations (XML and roff files).
	* man/Makefile.am: Translated XML files moved from the CLEANFILES
	variable of man/Makefile.am to the various languages Makefiles.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* man/chpasswd.8.xml: Document that chpasswd does not use PAM to
	update the passwords. This fixes http://bugs.debian.org/396726.
	Debian patch 411_chpasswd_document_no_pam.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/su.c: Avoid terminating the PAM library in the forked
	child.  This is done later in the parent after closing the PAM
	session. This fixes http://bugs.debian.org/412061.
	Debian patch 405_su_no_pam_end_before_exec.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* man/newgrp.1.xml: Mention sg in the newgrp manpage.
	This fixes http://bugs.debian.org/396690.
	Debian patch 410_newgrp_man_mention_sg.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/passwd.c: Fix typo: the warndays option was called warning.
	This is now warndays, as documented in the manpage and usage.
	This fixes http://bugs.debian.org/445481.
	Debian patch 417_passwd_warndays.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/pwck.c: Remove the preprocessor check SHADOWPWD. The
	variable is no more defined (and always assumed).
	Debian patch 493_pwck_no_SHADOWPWD.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/passwd.c, man/passwd.1.xml: -l/-u options: edit the
	shadow account expiry field *in addition* to editing the password
	field.  This fixes http://bugs.debian.org/389183.
	Debian patch 494_passwd_lock.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Do not request a password when a user uses
	newgrp to switch to her primary group.
	This fixes http://bugs.debian.org/396691.
	Debian patch 497_newgrp_primary_group.
	* src/newgrp.c: Remove a comment which states otherwise.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/login.c: Log an error if the password entry could not be
	found (respect LOG_UNKFAIL_ENAB to avoid logging a password). This
	fixes the Debian bug http://bugs.debian.org/451521

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* man/useradd.8.xml: -b documenation: Use the same notation for
	the -d argument as in the -d documentation.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Allow the -b option even without the -D option.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Use the same error message for the below errors.
	(option working ONLY if another is specified).

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Make usermod -o and -u work independently of the
	argument order.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Validate that two of the -L, -p, and -U options
	are not used at the same time after the parsing of options. -U
	used to be allowed after -p or -L, but not before.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c: Make usermod -d and -m work independently of the
	argument order. Thanks to Justin Pryzby <jpryzby+d@quoininc.com>
	for the patch. This fixes http://bugs.debian.org/451518.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, lib/nscd.c: Execute nscd -i instead of using the private
	glibc socket to flush the nscd tables. This comes from the RedHat
	patch shadow-4.0.16-nscd.c.
	* lib/commonio.c: Forbid inheritance of the passwd and group files
	to the spawed processes (like nscd). This comes from the RedHat
	patch shadow-4.0.17-notInheritFd.patch.
	* lib/nscd.h: Update header.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/usermod.c (fail_exit): Add static variables pw_locked,
	spw_locked, gr_locked, and sgr_locked to indicate which files must
	be unlocked.
	* src/usermod.c (open_files, close_files): Open and close the
	group files as well as the passwd files. This permit to check if
	the group files modification are allowed before writing the passwd
	files.
	* src/usermod.c (grp_update, update_gshadow, update_group): Do not
	return a status code, but call fail_exit() in case of error. The
	group files are no more opened and closed in update_gshadow() and
	update_group().
	* src/usermod.c (main): move the call to grp_update between
	open_files and close_files.
	* src/usermod.c: Differentiate failure to add a group entry and
	failure to add a shadow group entry.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c: Differentiate failure to update a group entry and
	failure to update a shadow group entry.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/userdel.c, src/usermod.c, src/useradd.c: Inform the user if
	out of memory while updating a group database.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/usermod.c: Update the group database before flushing
	the nscd caches.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/userdel.c: Abort if an error is found while updating the
	user or group database. No changes will be written in the
	databases.

2007-11-17  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: It is no more needed to check that the user's
	groups are specified only once in the group file. This is checked
	by gr_update().

2007-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* lib/commonio.c (next_entry_by_name): New function.
	* NEWS, lib/commonio.c (commonio_update): When an entry is updated, make
	sure that there are no other entry with the same name. This fixes
	an infinite loop in userdel and usermod when an (erroneous) group
	file contains two entries with the same name.
	(https://bugzilla.redhat.com/show_bug.cgi?id=240915)

2007-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/salt.c: Make sure the salt string is terminated at the
	right place (either 8th, or 11th position).
	* NEWS, src/chgpasswd.c, src/chpasswd.c: The protocol + salt does
	not need 15 chars. No need for a temporary buffer.
	This change the fix committed on 2007-11-10. The salt provided to
	pw_encrypt could have been too long.

2007-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* man/fr/fr.po: Fix typo: missing / in <placeholder-1/>. This
	caused the gpasswd title to be incomplete in the French manpage.

2007-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Check if the l64a function exists instead of a64l
	which we do not use.
	* libmisc/salt.c: Add support for uClibc with no l64a().

2007-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Check if the netdb.h header file and the innetgr
	function exist.
	* src/login_nopam.c, NEWS: Add support for systems with no
	innetgr().  On those systems, username with an @ will be treated
	like any other username (i.e. lookup in the local database for an
	user with an @). Thanks to Mike Frysinger for the patch.

2007-11-16  Nicolas François  <nicolas.francois@centraliens.net>

	* src/useradd.c: Indentation fix.

2007-11-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/newgrp.c, NEWS: Declare the child and pid variable at the
	beginning of a block. This fixes a compilation issue with gcc 2.95.
	The intent is the same as Gentoo's patch shadow-4.0.12-gcc2.patch.

2007-11-14  Nicolas François  <nicolas.francois@centraliens.net>

	* src/Makefile, NEWS: Add a suidperms variable. This should ease
	the change of permission of suid binaries for distributors (not
	recommended).

2007-11-10  Nicolas François  <nicolas.francois@centraliens.net>

	* ./, libmisc/, src/, contrib/, doc/, lib/, man/, man/sv/,
	man/de/, man/ja/, man/fi/, man/pt_BR/, man/fr/, man/pl/, man/hu/,
	man/tr/, man/ru/, man/zh_TW/, man/id/, man/zh_CN/, man/cs/,
	man/es/, man/ko/, man/it/, etc/, etc/pam.d/, po/: Restore the
	ignore patterns from the previous repository.

	* libmisc/*.c, libmisc/*.h, libmisc/getdate.y, shadow.spec.in,
	src/*.c, contrib/groupmems.shar, contrib/pwdauth.c,
	doc/README.platforms, doc/WISHLIST, doc/console.c.spec.txt,
	lib/*.c, lib/*.h, COPYING, man/*.xml, man/sv/*.[1358],
	man/de/*.[1358], man/ja/*.[1358], man/fi/*.[1358],
	man/fr/*.[1358], man/pt_BR/*.[1358], man/pl/*.[1358],
	man/hu/*.[1358], man/tr/*.[1358], man/ru/*.[1358],
	man/zh_TW/*.[1358], man/id/*.[1358], man/zh_CN/*.[1358],
	man/cs/*.[1358], man/es/*.[1358], man/ko/*.[1358],
	man/it/*.[1358], etc/login.access, etc/login.defs, NEWS: Added the
	subversion svn:keywords property (Id) for proper identification.

2007-11-10  Nicolas François  <nicolas.francois@centraliens.net>

	* man/sv/sv.po, man/de/de.po, man/fr/fr.po, man/pl/pl.po,
	man/ru/ru.po, man/it/it.po: Run "make update-po" in the man
	directory.

	* po/ne.po, po/bs.po, po/cs.po, po/pt_BR.po, po/km.po, po/es.po,
	po/eu.po, po/ko.po, po/hu.po, po/sk.po, po/vi.po, po/uk.po,
	po/ro.po, po/sq.po, po/ru.po, po/id.po, po/nb.po, po/el.po,
	po/gl.po, po/fr.po, po/nl.po, po/pl.po, po/nn.po, po/it.po,
	po/dz.po, po/tl.po, po/pt.po, po/ca.po, po/da.po, po/tr.po,
	po/sv.po, po/de.po, po/ja.po, po/zh_TW.po, po/he.po, po/fi.po,
	po/zh_CN.po: Run "make update-po" in the po directory.

2007-11-10  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/newgrp.c: Don't ask for a password if there are no
	group passwords. Just directly give up. This comes from the
	Fedora's patch shadow-4.0.13-newgrpPwd.patch, and seems to be the
	only part with an effect.

2007-11-10  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/chgpasswd.c, src/chpasswd.c: Fix chpasswd and
	chgpasswd stack overflow. Based on Fedora's
	shadow-4.0.18.1-overflow.patch.

2007-11-10  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/useradd.c: Allow non numerical group identifier to be
	specified with useradd's -g option. Applied Debian patch
	397_non_numerical_identifier. Thanks also to Greg Schafer
	<gschafer@zip.com.au>.

2007-10-28  Nicolas François  <nicolas.francois@centraliens.net>

	* configure.in: Prepare the next release: 4.0.18.2. The gettext
	version used for the configuration will be 0.16.

2007-10-28  Nicolas François  <nicolas.francois@centraliens.net>

	* po/ja.po: Remove a plural form. nplurals=1 for japanese.
	Moreover, msgstr[0] was identical to msgstr[1].

2007-10-27  Nicolas François  <nicolas.francois@centraliens.net>

	* libmisc/limits.c, man/limits.5.xml, etc/limits: Apply patch sent
	by Justin Bronder <jsbronder@gmail.com>. See Debian bug #442334.
	This adds support to 2 new resource limits: max nice value, and
	max real time priority. This is only used when shadow is not
	compiled with PAM support.

2007-10-27  Nicolas François  <nicolas.francois@centraliens.net>

	* man/gpasswd.1.xml: Describe the options separately in the
	OPTIONS section. Simplify the synopsis.

2007-10-27  Nicolas François  <nicolas.francois@centraliens.net>

	* README, po/Makevars: Update contact information.

2007-10-27  Christian Perrier  <bubulle@debian.org

	* src/newgrp.c,	src/passwd.c, src/su.c:
	No longer 'apologize' to users when they use incorrect passwords
	Remove "Sorry" from programs display
	Imported from Debian's patch 413_no-sorry-in-passwd and
	102_de-fix-sorry
	* man/fr/fr.po: fix translation errors. Imported from Debian's
	patch 201_fix_man_su_fr and 416_man-fr_newgrp
	* man/it/it.po, man/Makefile.am, man/it/Makefile.am:
	Use gettext for the Italian man pages translation. Imported from
	Debian's patch 202_it_man_uses_gettext. Thanks to Giuseppe
	Sacco who contributed the Italian translation.
	* man/de/de.po: (nearly) complete German translation of man pages
	Imported from Debian's patch 203_de-man-update. Thanks to
	Simon Brandmair
	* src/usermod.c: Clarify the online help of usermod for "-a"
	Imported from Debian's patch 402-clarify_usermod_usage
	* man/shadow.5.xml: fix spelling error. Imported from Debian's
	patch 433_shadow.5-typo_312430
	* src/su.c: Be up front on the origin of su and mention the GNU
	origin. Imported from Debian's patch 438_su_GNU_origin

2007-10-27  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, po/zh_CN.po: Updated Chinese translation. Imported from
	Debian's patch 105_zh_CN. Thanks to Ming Hua for the update.

2007-10-13  Tommi Vainikainen  <thv+debian@iki.fi>

	* NEWS, po/fi.po: Updated Finish translation (400t).

2007-10-13  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, src/su.c: If compiled without PAM support, enforce the
	limits from /etc/limits when one of the -, -l, or --login options
	is set, even if called by root. Thanks to Justin Bronder.

2007-10-07  Nicolas François  <nicolas.francois@centraliens.net>

	* NEWS, Changelog: Convert the Changelog and NEWS files to UTF-8
	(it was partially ISO-8859-2).

2007-02-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/groupadd.8.xml, man/groupmod.8.xml, man/login.1.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml:
	groupadd.8, groupmod.8, login.1, useradd.8, userdel.8, usermod.8: grammar
	mistakes and other correctstions (by Schulenberg <bensberg@justemail.net>).

2007-01-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/usermod.c:
	fixed handle -a option in usermod (by Benno Schulenberg <bensberg@justemail.net>).

2006-12-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/sv/sv.po:
	more UTF8 fixe (by Mikael Magnusson <mikma@users.sourceforge.net>).

	* man/sv/sv.po:
	UTF8 fixes (by Mikael Magnusson <mikma@users.sourceforge.net>).

2006-11-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/Makefile.am, man/pl/chgpassw.8, man/pl/chpasswd.8, man/pl/pl.po:
	translation chpasswd.8 and chgpassw.8 finished.

2006-11-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/pl.po: resolve fuzzy entries.

	* contrib/adduser.c, contrib/groupmems.shar, po/it.po, src/groupmems.c, src/usermod.c, man/chfn.1.xml, man/chsh.1.xml, man/de/de.po, man/fr/fr.po, man/groupmems.8.xml, man/passwd.1.xml, man/pl/pl.po, man/ru/ru.po, man/shadow.3.xml, man/su.1.xml, man/sv/sv.po:
	spelling fixes 's/super user/superuser/' (by Benno Schulenberg <bensberg@justemail.net>).

	* man/sv/sv.po, man/de/de.po, man/fr/fr.po, man/pl/pl.po, man/ru/ru.po:
	run "make update-po".

	* man/newusers.8.xml, man/su.1.xml:
	fixed wrong word, a few typos, some grammar mistakes, and puts in a comma here
	and there for clarity (by Benno Schulenberg <bensberg@justemail.net>).

	* man/pl/groupmod.8, man/pl/chage.1, man/pl/chsh.1, man/pl/lastlog.8, man/pl/vipw.8:
	regenerated.

	* man/de/de.po: run "make update-po".

	* man/Makefile.am:
	added de to LINGUAS but man/de/de.po still need many work.

2006-11-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c: indent code.

	* NEWS, src/useradd.c:
	improved auditing support (https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=211659).

2006-11-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/km.po, po/ko.po, po/nb.po, po/ne.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	run "make update-po".

	* NEWS, po/nl.po:
	updated (by cobaco (aka Bart Cornelis) <cobaco@skolelinux.no>).

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po, man/sv/sv.po:
	"make update-po".

2006-11-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/su.1.xml:
	added sg(1) to the SEE ALSO section (Debian Bug#396690).

2006-10-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/newusers.8.xml: clarify pw_gid fileld content description.

	* man/it/Makefile.am, man/sv/Makefile.am:
	s/man_nonpam/man_nopam/ (merged 498_man_nonpam_undefined Debian patch).

	* po/nl.po:
	fixed https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=212892

2006-10-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/newusers.8.xml: there is no pw_age fileld in passwd.

	* man/fr/fr.po:
	Fix an error in the passwd.1 French translation (fixed Debian bug #395537).

	* man/chfn.1.xml, man/chgpasswd.8.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/fr/fr.po, man/gpasswd.1.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/id.1.xml, man/login.1.xml, man/newgrp.1.xml, man/newusers.8.xml, man/nologin.8.xml, man/passwd.1.xml, man/pl/pl.po, man/pwck.8.xml, man/pwconv.8.xml, man/su.1.xml, man/sulogin.8.xml, man/sv/sv.po, man/vipw.8.xml:
	cleanups on begin DESCRIPTION section.

	* man/pl/pl.po: typos.

2006-10-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: cleanups.

2006-10-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/pl.po: more translations.

	* NEWS:
	UTF-8 corrections (by Benno Schulenberg <bensberg@justemail.net>).

2006-10-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/groupdel.8.xml: added description for exit code 6.

2006-08-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/de/de.po: copy & paste some msgid to msgstr.

	* man/de/de.po:
	kill some fuzzy (by Nicolas François <nicolas.francois@centraliens.net>).

2006-08-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po, man/sv/sv.po, man/passwd.1.xml:
	s/change password/password change/ in passwd(1) (by Simon Brandmair <sbrandmair@gmx.net>).

	* man/de/de.po:
	initial version based on partial translations only for passwd(1) by
	Simon Brandmair <sbrandmair@gmx.net>.

	* NEWS, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/useradd.c, src/userdel.c, src/usermod.c:
	flush nscd cashes after close /etc/{group,passwd} files.

2006-08-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/tl.po: updated (by Eric Pareja <xenos@upm.edu.ph>).

2006-08-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/ja.po: updated (by Takeo Nakano <nakano@webmasters.gr.jp>).

2006-08-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/fr/Makefile.am:
	removed whitespaces following trailing backslashes.

	* NEWS, configure.in: release 4.0.18.1.

	* man/Makefile.am, man/fr/Makefile.am, man/it/Makefile.am, man/ja/Makefile.am, man/pl/Makefile.am, man/ru/Makefile.am, man/sv/Makefile.am, NEWS:
	fixed missing man pages in dist tar ball necessary on build when PAM is disabled.

	* NEWS, src/groupmems.c:
	fixed groupmems compilation when PAM is disabled (by Johannes Winkelmann <jw@smts.ch>).

	* configure.in:
	typo s/followig/following/ (by Johannes Winkelmann <jw@smts.ch>).

2006-08-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: release date corrected.

	* NEWS, src/su.c:
	fixed set environment too early when using PAM, so move it to !USE_PAM
	(patch submitted by Mike Frysinger <vapier@gentoo.org>).

2006-07-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/fr/chage.1, man/fr/chfn.1, man/fr/chpasswd.8, man/fr/chsh.1, man/fr/expiry.1, man/fr/faillog.5, man/fr/faillog.8, man/fr/gpasswd.1, man/fr/groupadd.8, man/fr/groupdel.8, man/fr/groupmod.8, man/fr/groups.1, man/fr/grpck.8, man/fr/gshadow.5, man/fr/lastlog.8, man/fr/limits.5, man/fr/login.1, man/fr/login.access.5, man/fr/login.defs.5, man/fr/logoutd.8, man/fr/newgrp.1, man/fr/newusers.8, man/fr/passwd.1, man/fr/passwd.5, man/fr/porttime.5, man/fr/pwck.8, man/fr/pwconv.8, man/fr/sg.1, man/fr/shadow.3, man/fr/shadow.5, man/fr/su.1, man/fr/suauth.5, man/fr/useradd.8, man/fr/userdel.8, man/fr/usermod.8, man/fr/vipw.8, NEWS:
	fr man pages are now up to date.

	* man/fr/fr.po:
	more updates for 4.0.18 (by Nicolas François <nicolas.francois@centraliens.net>).

	* man/fr/fr.po:
	updated for 4.0.18 (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

2006-07-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po, po/nb.po, po/ne.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po:
	updated.

	* src/useradd.c, src/usermod.c:
	fixed UID/GID overflow (fixed http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=198920).
	Fixed expiredate/inactive/mindays/warndays/maxdays overflow (simillar to RH#198920).

	* src/passwd.c:
	fixed inactive/mindays/warndays/maxdays overflow (similar to RH#198920).

	* src/groupadd.c, src/groupmod.c:
	fixed GID overflow (fixed http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=198920).

2006-07-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/.cvsignore: groupmems added.

2006-07-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po:
	updated for 4.0.18 (by ean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

	* po/uk.po: break lines longer than 80 cols and add missing \n.

	* po/uk.po:
	updated for 4.0.18 (by Eugeniy Meshcheryakov <eugen@univ.kiev.ua>).

	* man/pl/pl.po, man/ru/ru.po, man/sv/sv.po, man/chgpasswd.8.xml, man/chpasswd.8.xml, man/fr/fr.po:
	s/instead DES/instead of DES/

	* NEWS: sv man pages are partially translated.

2006-07-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/groupmems.c: fix compilation warnings.

	* po/ko.po: use \t.

	* po/nl.po: break lines longer than 80 cols and add missing \n.

2006-07-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ru/faillog.5: regenerated.

	* po/ko.po: updated for 4.0.18 (by Changwoo Ryu <cwryu@debian.org>).

2006-07-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/faillog.5.xml, man/fr/fr.po, man/pl/pl.po, man/ru/ru.po, man/sv/sv.po:
	added <refmiscinfo class="sectdesc"> tag for faillog.5.xml.

	* man/sv/Attic/grupper.1: removed.

	* man/sv/Makefile.am, man/sv/chage.1, man/sv/chfn.1, man/sv/chgpasswd.8, man/sv/chpasswd.8, man/sv/chsh.1, man/sv/expiry.1, man/sv/faillog.5, man/sv/faillog.8, man/sv/gpasswd.1, man/sv/groupadd.8, man/sv/groupdel.8, man/sv/groupmems.8, man/sv/groupmod.8, man/sv/groups.1, man/sv/grpck.8, man/sv/gshadow.5, man/sv/lastlog.8, man/sv/limits.5, man/sv/login.1, man/sv/login.access.5, man/sv/login.defs.5, man/sv/logoutd.8, man/sv/newgrp.1, man/sv/newusers.8, man/sv/nologin.8, man/sv/passwd.1, man/sv/passwd.5, man/sv/porttime.5, man/sv/pwck.8, man/sv/pwconv.8, man/sv/sg.1, man/sv/shadow.3, man/sv/shadow.5, man/sv/su.1, man/sv/suauth.5, man/sv/sv.po, man/sv/useradd.8, man/sv/userdel.8, man/sv/usermod.8, man/sv/vipw.8:
	corrected text charset and other minor cleanups (by Daniel Nylander <info@danielnylander.se>).

	* po/tr.po: break lines longer than 80 cols.

	* po/tr.po:
	updated for 4.0.18 (by Mehmet TURKER <mturker@innova.com.tr>).

	* configure.in, man/Makefile.am, man/sv/Makefile.am:
	fixes for "make {dist|distchec}" and sv man pages.

	* man/sv/Attic/grupper.1, man/sv/groupmems.8, man/sv/groupmod.8, man/sv/grpck.8, man/sv/grpconv.8, man/sv/grpunconv.8, man/sv/gshadow.5, man/sv/lastlog.8, man/sv/limits.5, man/sv/login.1, man/sv/login.access.5, man/sv/login.defs.5, man/sv/logoutd.8, man/sv/newgrp.1, man/sv/newusers.8, man/sv/nologin.8, man/sv/passwd.1, man/sv/passwd.5, man/sv/porttime.5, man/sv/pwck.8, man/sv/pwconv.8, man/sv/pwunconv.8, man/sv/sg.1, man/sv/shadow.3, man/sv/shadow.5, man/sv/su.1, man/sv/suauth.5, man/sv/sv.po, man/sv/useradd.8, man/sv/userdel.8, man/sv/usermod.8, man/sv/vigr.8, man/sv/vipw.8, NEWS, man/Makefile.am, man/sv/Makefile.am, man/sv/chage.1, man/sv/chfn.1, man/sv/chgpasswd.8, man/sv/chpasswd.8, man/sv/chsh.1, man/sv/expiry.1, man/sv/faillog.5, man/sv/faillog.8, man/sv/getspnam.3, man/sv/gpasswd.1, man/sv/groupadd.8, man/sv/groupdel.8:
	full sv man pages set added (by Daniel Nylander <info@danielnylander.se>).
	This man pages are translated using new XML/xml2po/gettext infrastructure.

	* po/pl.po: updated for 4.0.18.

2006-07-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pt.po:
	updated for 4.0.18 (by Miguel Figueiredo <mfigueiredo@gmail.com>).

	* po/gl.po, NEWS:
	updated for 4.0.18 (by Jacobo Tarrio <jacobo@tarrio.org>).

	* NEWS, po/eu.po:
	updated for 4.0.18 (by Piarres Beobide <pi@beobide.net>).

	* man/ru/chsh.1, man/ru/faillog.5, man/ru/groupmems.8, man/ru/groupmod.8, man/ru/ru.po, man/ru/su.1, man/ru/useradd.8, man/ru/usermod.8, man/ru/vipw.8, NEWS, po/ru.po:
	updated for 4.0.18 (by Yuri Kozlov <kozlov.y@gmail.com>).

	* po/vi.po, NEWS:
	updated for 4.0.18 (by Clytie Siddall <clytie@riverland.net.au>).

	* NEWS, po/cs.po:
	updated for 4.0.18 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* NEWS, po/sv.po:
	updated for 4.0.18 (by Daniel Nylander <info@danielnylander.se>).

	* NEWS, po/ca.po:
	updated for 4.0.18 (by Guillem Jover <guillem@debian.org>).

2006-07-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/hu.po: cleanups.

	* NEWS, po/da.po:
	updated for 4.0.18 (by Claus Hindsgaul <claus.hindsgaul@gmail.com>).

	* po/hu.po, NEWS: updated for 4.0.18 (by SZERVÁC Attila <sas@321.hu>).

	* NEWS: typos.

	* man/ru/ru.po, man/fr/fr.po, man/pl/pl.po: run "make update-po".

	* man/su.1.xml: fixes in <refsynopsisdiv>.

	* src/groupmems.c: indent soutrce code.

	* src/groupmems.c: use shadow Copyright.

	* po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po, po/nb.po, po/ne.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/POTFILES.in, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po:
	added src/groupmems.c to POTFILES.in.

	* NEWS, etc/pam.d/Makefile.am, etc/pam.d/groupmems, man/Makefile.am, man/groupmems.8.xml, src/Makefile.am, src/groupmems.c:
	groupmems rewrited for use PAM and getopt_long() nad now it is enabled
	for build and install (patch by George Kraft <gk4@swbell.net>).

	* NEWS, configure.in: start prepare for 4.0.18.

2006-07-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po, po/nb.po, po/ne.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	run "make update-po" and some cleanups (added missing \n and use tabs instead spaces).

	* src/su.c: s#[login]#[LOGIN]# in help message.

	* man/useradd.8.xml:
	added missing --<foo> long options names in "Changing the default values" section.

	* po/tr.po: updated (by Murat Şenel <muratasenel@gmail.com>).

2006-07-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po: updated.

	* man/useradd.8.xml: added newusers(8) to SEE ALSO section.

	* etc/login.defs:
	removed GETPASS_ASTERISKS (patch by Mike Frysinger <vapier@gentoo.org>).

2006-07-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/pl/chsh.1, man/pl/pl.po: pl chage(1): translation finished.

	* NEWS:
	s#fix by Mike Frysinger <vapier@gentoo.org>)#(patch by Ulrich Mueller <ulm@kph.uni-mainz.de>; http://bugs.gentoo.org/139966#

	* NEWS, configure.in:
	S/Key: removed assign getpass() to libshadow_getpass() on autoconf level
	(fix by Mike Frysinger <vapier@gentoo.org>).

2006-07-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/vipw.8.xml: make options <replaceable> in SYNOPSIS.

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po, po/nb.po, po/ne.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/groupadd.c:
	s/group/GROUP/ in groupadd help message.

	* src/su.c (main):
	move **envcp declaration to #ifdef USE_PAM (fixed warning about unused
	variable when shadow is builded with PAM didabled).

	* man/pl/pl.po, NEWS, man/pl/chage.1: pl chage(1) translation finished.

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po: updated.

	* man/chsh.1.xml: updated after rewrite chsh for use getopt_long().

	* po/pl.po: kill fuzzy.

2006-07-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/chsh.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po, po/nb.po, po/ne.po:
	one \t more in help message.

	* po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po, po/nb.po, po/ne.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po:
	updated.

	* NEWS, src/chsh.c: chsh rewrited for use getopt_long().

2006-07-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/groupmod.8, man/pl/pl.po: finish translation groupmod(8).

	* man/fr/fr.po, man/groupmod.8.xml, man/pl/groupmod.8, man/pl/pl.po, man/ru/ru.po:
	cleanups in groupmod(8).

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po, man/usermod.8.xml, src/usermod.c, NEWS:
	back to previouse usermod -a option sematics and clarify -a behavior
	on documentation level (by Greg Schafer <gschafer@zip.com.au>).

	* man/fr/fr.po, man/groupmod.8.xml, man/pl/pl.po, man/ru/ru.po:
	updated groupmod man page.

2006-07-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/groupmod.c: too many \t in help message.

	* man/ru/chage.1, man/ru/passwd.1, man/ru/ru.po, man/chage.1.xml, man/fr/fr.po, man/passwd.1.xml, man/pl/pl.po:
	updated.

	* po/nb.po, po/ne.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/dz.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/km.po, po/ko.po:
	run "make update-po".

	* src/groupmod.c: cleunps in help message.

	* src/chage.c: s/user/\[LOGIN\]/ in help message.

	* src/passwd.c: s/\[login\]/\[LOGIN\]/ in help message.

	* NEWS, src/groupmod.c: groupmod rewrited for use getopt_log().

2006-07-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/sv.po:
	added missing \n in help messages and few other minor cleanups.

	* NEWS, po/sv.po:
	updated for 4.0.17 (by Daniel Nylander <info@danielnylander.se>).

	* NEWS: 4.0.17 release date i 10-07-2006.

	* NEWS, libmisc/copydir.c:
	fixed segfault usermod/userdel on remove home directory when it can't
	be removed; for example when it is /dev/null (fixed http://bugs.gentoo.org/139148).

	* src/login.c, src/logoutd.c, src/userdel.c, libmisc/limits.c:
	remove USER_PROCESS conditionsi (code simplifications).

2006-07-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/km.po: kill all fuzzy (Sokhem <khoemsokhem@khmeros.info>).

2006-07-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/de.po: kill fuzzy (by Holger Wansing <linux@wansing-online.de>).

2006-07-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am: removed duplicated all target.

	* NEWS, po/LINGUAS, po/ne.po:
	new Nepali translation (by Paras Pradhan <pradhanparas@gmail.com>).

	* NEWS, po/LINGUAS, po/dz.po: new Dzongkha translation.

	* NEWS, po/de.po:
	updated for 4.0.17 (by Holger Wansing <linux@wansing-online.de>).

	* NEWS, po/nl.po:
	updated for 4.0.17 (by "cobaco (aka Bart Cornelis)" <cobaco@skolelinux.no>)

2006-06-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ko.po: cleanups (by darehanl <darehanl@gmail.com>).

	* src/usermod.c: fixes in getopt_long() optstring: s/a/a:/ and added h.

	* src/faillog.c:
	fixed long_options[] entries: s/no_argument/required_argument/ for lock-secs,
	maximum, time and user options.

	* NEWS, configure.in:
	improved SELinux detection on autoconf level (based on patch by
	Dan Yefimov <dan@D00M.lightwave.net.ru>).

	* po/ro.po, NEWS:
	updated for 4.0.17 (by Sorin Batariuc <sorin@bonbon.net>).

2006-06-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: cleanups.

	* man/pl/pl.po: more translations for chage(1).

	* TODO: remove done things.

	* NEWS, lib/Attic/getpass.c, lib/Makefile.am, lib/getdef.c, lib/pwauth.c, po/POTFILES.in:
	removed using private implementatuon getpass() libc function (now getpass() is
	used also when S/KEY support is enabled).

	* NEWS, src/Makefile.am: move nologin do $(sbindir).

	* man/pl/pl.po: more work.

	* man/pl/pl.po: more translations.

	* po/pl.po: s/KEY=VALUE/KLUCZ=WARTOŚĆ/

	* po/pl.po: s/SEC/SEK/

	* src/chpasswd.c: added missing #include "exitcodes.h".

	* src/chpasswd.c: s/exit (1)/exit (E_USAGE)/

	* man/Makefile.am:
	move all current i18n man pages automation inside "if ENABLE_REGENERATE_MAN .. endif".

	* man/Makefile.am:
	add an error message so people don't have to go digging through
	source to find out what's up (by Mike Frysinger <vapier@gentoo.org>).

	* NEWS, man/ru/chage.1, man/ru/chfn.1, man/ru/chgpasswd.8, man/ru/chpasswd.8, man/ru/chsh.1, man/ru/expiry.1, man/ru/faillog.5, man/ru/faillog.8, man/ru/gpasswd.1, man/ru/groupadd.8, man/ru/groupdel.8, man/ru/groupmems.8, man/ru/groupmod.8, man/ru/groups.1, man/ru/grpck.8, man/ru/gshadow.5, man/ru/lastlog.8, man/ru/limits.5, man/ru/login.1, man/ru/login.access.5, man/ru/login.defs.5, man/ru/logoutd.8, man/ru/newgrp.1, man/ru/newusers.8, man/ru/nologin.8, man/ru/passwd.1, man/ru/passwd.5, man/ru/porttime.5, man/ru/pwck.8, man/ru/pwconv.8, man/ru/ru.po, man/ru/sg.1, man/ru/shadow.3, man/ru/shadow.5, man/ru/su.1, man/ru/suauth.5, man/ru/useradd.8, man/ru/userdel.8, man/ru/usermod.8, man/ru/vipw.8:
	updated ru man pages (regenerated from man/ru/ru.po -> man/ru/*xml -> roff).

	* NEWS, po/ru.po:
	updated for 4.0.17 (by Yuri Kozlov <kozlov.y@gmail.com>).

	* NEWS, po/LINGUAS, po/km.po:
	new km translation (Sokhem <khoemsokhem@khmeros.info>).

	* po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, src/groupadd.c:
	cleanups in groupadd help message.

	* NEWS, po/nb.po:
	updated for 4.0.17 (by Bjørn Steensrud <bjornst@powertech.no>).

	* NEWS, po/da.po:
	updated for 4.0.17 (by Claus Hindsgaul <claus.hindsgaul@gmail.com>).

	* po/pl.po:
	s/twĂłĹź/twĂłrz/ (fix by Michał Łomnicki <michal.lomnicki@gmail.com>).

	* NEWS, po/pt.po:
	updated for 4.0.17 (by Miguel Figueiredo <mfigueiredo@gmail.com>).

	* NEWS, po/vi.po:
	updated for 4.0.17 (by Clytie Siddall <clytie@riverland.net.au>).

	* NEWS, po/cs.po:
	updated for 4.0.17 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* po/eu.po, po/fr.po, po/gl.po, po/pl.po:
	Project-Id-Version: shadow 4.0.17

	* NEWS, po/sk.po:
	updated for 4.0.17 (by Peter Mann <Peter.Mann@tuke.sk>).

	* NEWS, po/ko.po:
	updated for 4.0.17 (by Changwoo Ryu <cwryu@debian.org>).

2006-06-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: schedule release 40.17 on 26-06-2006.

	* src/useradd.c:
	adjust last fix for leave some fix mail spool creation after rewrite internal
	configuration API.

	* src/useradd.c, NEWS:
	fixed mail spool file creation (bug cached by Frans Pop <elendil@planet.nl>,
	fixed http://bugs.debian.org/374705).

2006-06-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/chage.c, src/chgpasswd.c, src/chpasswd.c, src/faillog.c, src/groupadd.c, src/lastlog.c, src/passwd.c, src/su.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c:
	better looking help messages output. Added one empty line at end of help message.

	* po/ru.po, po/sk.po, po/sv.po, po/tl.po, po/uk.po, po/ro.po, po/pt_BR.po:
	break help messages lines before col 80.

	* man/pl/pl.po: more work on usermod.

	* po/pl.po: cleanups.

2006-06-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/vipw.8:
	regenerated using fixed DocBook XSL Stylesheets v1.70.1 (I must submit my
	fixes common/pl.xml do DocBook XSL Stylesheets mantainer).

	* man/fr/fr.po, man/ru/ru.po: updated.

	* man/pl/lastlog.8, man/pl/pl.po: finish translate lastlog(8).

	* man/lastlog.8.xml: improved NOTE section content.

	* po/pl.po: iprove lastlog help message.

	* man/fr/fr.po, man/lastlog.8.xml, man/pl/pl.po, man/ru/ru.po:
	Better lastlog short description. Now it is:
	lastlog - reports the most recent login of all users or of a given user

	* man/Makefile.am, man/fr/fr.po, man/lastlog.8.xml, man/pl/pl.po, man/ru/ru.po:
	Fixed CAVEATS section (what the hell is mmdf ? :)

	* man/ru/ru.po, NEWS, man/faillog.5.xml, man/fr/fr.po, man/pl/pl.po:
	added missing information about fail_locktime element of faillog struct
	in faillog(5) man page (by Thorsten Kukuk <kukuk@suse.de>).

2006-06-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ru/chage.1, man/ru/chfn.1, man/ru/chgpasswd.8, man/ru/chpasswd.8, man/ru/chsh.1, man/ru/expiry.1, man/ru/faillog.5, man/ru/faillog.8, man/ru/gpasswd.1, man/ru/groupadd.8, man/ru/groupdel.8, man/ru/groupmems.8, man/ru/groupmod.8, man/ru/groups.1, man/ru/grpck.8, man/ru/gshadow.5, man/ru/lastlog.8, man/ru/limits.5, man/ru/login.1, man/ru/login.access.5, man/ru/login.defs.5, man/ru/logoutd.8, man/ru/newgrp.1, man/ru/newusers.8, man/ru/nologin.8, man/ru/passwd.1, man/ru/passwd.5, man/ru/porttime.5, man/ru/pwck.8, man/ru/pwconv.8, man/ru/sg.1, man/ru/shadow.3, man/ru/shadow.5, man/ru/su.1, man/ru/suauth.5, man/ru/useradd.8, man/ru/userdel.8, man/ru/usermod.8, man/ru/vipw.8:
	fully regenerated man pages.

	* man/Makefile.am:
	hack for generate translated xml files with lang="<lang> in <refentry> tag.
	Now is possible testing correctnes of XSLT sheets languages definition.

2006-06-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/eu.po: updated (by Piarres Beobide <pi@beobide.net>).

2006-06-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/zh_TW.po, po/da.po, po/el.po, po/es.po, po/eu.po, po/id.po, po/ja.po, po/ko.po, po/nb.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/tr.po, po/uk.po, po/zh_CN.po:
	s/ \\n"/\\n"/ in translated strings.

	* man/pl/pl.po: more translations for usermod.

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po, man/usermod.8.xml:
	added <command> tags for at and crontab.

	* man/fr/fr.po, man/pl/pl.po, man/ru/ru.po, man/usermod.8.xml:
	remove /etc/login.defs from FILES section.

	* po/gl.po: updated (by Jacobo Tarrio <jtarrio@trasno.net>).

	* po/fr.po: updated (by Christian Perrier <bubulle@kheops.frmug.org>).

	* po/pl.po:
	updated usermod help message and fixed few other things introduced during
	copy&paset from useradd help message.

	* po/vi.po, po/zh_CN.po, po/zh_TW.po, src/usermod.c, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/bs.po:
	fixes in help message:
	s/login/LOGIN/
	s/new login directory/new home directory/
	s/new initial login group/new primary group/
	s/tlist of supplementary/new tlist of supplementary/
	s/LOGIN/NEW_LOGIN/

	* po/da.po, po/id.po, po/nb.po, po/nl.po, po/pl.po, po/pt.po, po/ro.po, po/sk.po, po/sv.po:
	cleanups in usermod help message.

	* po/es.po, po/eu.po, po/fi.po, po/tl.po: cleanups.

	* po/nb.po, po/nl.po, po/pt.po, po/uk.po, po/cs.po, po/el.po, po/eu.po, po/fi.po, po/hu.po:
	s/\\\t /\\\t/

2006-06-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in, man/Makefile.am:
	reverte using docbook.sourceforge.net in XSLT url.

	* po/pl.po: cleanups.

2006-06-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am:
	improved gen-xmls target: now this target generates only missing xml files.

2006-06-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/sk.po:
	updated for 4.0.16 (by Peter Mann <Peter.Mann@tuke.sk>).

	* NEWS, po/es.po:
	updated for 4.0.16 (by Ruben Porras <nahoo82@gmail.com>).

	* NEWS, po/fi.po:
	updated for 4.0.16 (by Tommi Vainikainen <thv+debian@iki.fi>).

	* NEWS, man/cs/Makefile.am, man/cs/groupmems.8, man/cs/groupmod.8, man/cs/grpck.8, man/cs/gshadow.5:
	new cs man pages: groupmems(8), groupmod(8), grpck(8), gshadow(5)
	(by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* NEWS, po/cs.po:
	updated for 4.0.16 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

2006-06-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in, man/Makefile.am:
	regenerate roff man pages using docbook-style-xsl-1.70.1.
	This version uses new base URL: http://docbook.sf.net/release/xsl/current/

	* man/.cvsignore: shadow-man-pages.pot added.

	* man/Makefile.am:
	added temporary gen-xmls targed and dependencies beetwen .pot and .po files.

	* man/chgpasswd.8.xml: removed <!DOCTYPE> tag (isn't neccessary).

2006-05-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/pl.po: chage(1) translation.

	* man/pl/Attic/chage.1.xml: removed.

	* man/chage.1.xml, man/fr/fr.po, man/pl/pl.po, man/ru/ru.po:
	chage requires shadow access and can't work without this.

	* po/da.po:
	updated for 4.0.16 (by Claus Hindsgaul <claus.hindsgaul@gmail.com>).

	* po/pl.po: s/_DAYS/_DNI/

2006-05-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: s/OWL/Owl/

	* NEWS: new release date for 4.0.16 is 05-06-2006.

	* NEWS: fixed last usermod changes comment. Current is:
	better fix for old CERT VU#312962 (which was fixed in shadow 4.0.8):
	fixed forgoten checking of the return value from fchown() before
	proceeding with the fchmod() (based on Owl patch prepared by
	Rafal Wojtczuk <nergal@owl.openwall.com>)

	* src/useradd.c (create_mail):
	move checking create_mail_spool is "yes" on top function.

	* man/pl/pl.po: cleanups.

	* po/fr.po:
	plugged fuzzy (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

	* po/fr.po:
	updated (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

2006-05-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am:
	simplifications in update-po target and fixes in dist-po-files target.

	* NEWS, po/eu.po:
	updated for 4.0.16 (by Piarres Beobide <pi@beobide.net>).

2006-05-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ru/ru.po, NEWS, man/chfn.1.xml, man/faillog.8.xml, man/fr/fr.po, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupmems.8.xml, man/limits.5.xml, man/login.1.xml, man/login.defs.5.xml, man/newgrp.1.xml, man/passwd.1.xml, man/passwd.5.xml, man/pl/pl.po, man/su.1.xml:
	bunch of cleanups in chfn(1), faillog(8), gpasswd(1), groupadd(8),
	groupmems(8), limits(5), login(1), login.defs(5), newgrp(1), passwd(1),
	passwd(5) and su(1) (by Yuri Kozlov <kozlov.y@gmail.com>).

	* man/Makefile.am, man/ru/ru.po: added ru to LINGUAS.

	* po/ru.po: updated for 4.0.16 (by Yuri Kozlov <kozlov.y@gmail.com>).

2006-05-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/fr/fr.po, man/pl/pl.po, man/chage.1.xml, man/passwd.1.xml:
	s/-n/-m/ in passwd(1). Improved -m, --mindays description in chage(1) and passwd(1).
	More pl translations.

	* po/vi.po: updated (by Clytie Siddall <clytie@riverland.net.au>).

	* NEWS, po/hu.po:
	updated for 4.0.16 (by Gabor Kelemen <kelemeng@gnome.hu>).

2006-05-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/cs/Makefile.am, man/it/Makefile.am, man/ru/Makefile.am:
	id and sulogin executables are not installed by "make install",
	but a few translated man pages are still installed.
	(patch by Lasse Collin <lasse.collin@tukaani.org>)

2006-05-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/vi.po:
	updates for 4.0.16 (by Clytie Siddall <clytie@riverland.net.au>).

	* po/gl.po: updated for 4.0.16 (by Jacobo Tarrio <jtarrio@debian.org>).

2006-05-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: more cleanups.

	* po/fr.po:
	updated for 4.0.16 (by Christian Perrier <bubulle@kheops.frmug.org>).

	* man/chage.1.xml, man/chfn.1.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/fr/fr.po, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/login.1.xml, man/login.access.5.xml, man/logoutd.8.xml, man/newgrp.1.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/pl/pl.po, man/pl/vipw.8, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/sg.1.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml:
	use common style in FILES sections.

	* man/fr/fr.po, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/id.1.xml, man/limits.5.xml, man/login.access.5.xml, man/pl/pl.po, man/suauth.5.xml, man/userdel.8.xml, man/usermod.8.xml, man/faillog.5.xml:
	begin <refpurpose> text from lowercase.

	* man/fr/fr.po, man/pl/pl.po, man/pwconv.8.xml, man/vipw.8.xml:
	remove "." from <refpurpose>.

	* po/pl.po: cleanups.

	* po/pl.po: typo.

	* man/pl/.cvsignore, man/pt_BR/.cvsignore, man/ru/.cvsignore, man/tr/.cvsignore, man/zh_CN/.cvsignore, man/zh_TW/.cvsignore, man/cs/.cvsignore, man/de/.cvsignore, man/es/.cvsignore, man/fi/.cvsignore, man/fr/.cvsignore, man/hu/.cvsignore, man/id/.cvsignore, man/it/.cvsignore, man/ja/.cvsignore, man/ko/.cvsignore:
	*.xml added.

	* man/cs/.cvsignore, man/de/.cvsignore, man/es/.cvsignore, man/fi/.cvsignore, man/fr/.cvsignore, man/hu/.cvsignore, man/id/.cvsignore, man/it/.cvsignore, man/ja/.cvsignore, man/ko/.cvsignore, man/pl/.cvsignore, man/pt_BR/.cvsignore, man/ru/.cvsignore, man/tr/.cvsignore, man/zh_CN/.cvsignore, man/zh_TW/.cvsignore, man/.cvsignore:
	.xml2po.mo added.

	* NEWS, man/pl/vipw.8: update pl vipw(8) man page.

	* src/useradd.c: s/mailbox/mailbox file/

	* man/pl/pl.po: seems vipw finished.

	* man/fr/fr.po, man/vipw.8.xml: s/Quiet mode database./Quiet mode./

	* man/pl/pl.po: more entries.

	* po/vi.po, po/zh_CN.po, po/zh_TW.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po:
	/mailbox/mailbox file/

	* man/pl/pl.po: fill few entries.

	* man/Makefile.am: fixes in dist-po-files target.

	* man/Makefile.am: pl added to Linguas. Some mprovements.

	* man/fr/fr.po:
	initial version based on ond version submited by Christian Perrier <bubulle@debian.org>.

	* man/pl/pl.po: initial version.

	* man/Makefile.am:
	implemet update-po target and dist, dist-check hooks for put .po and
	.pot files in dist tar ball.

	* src/chgpasswd.c:
	reverte struct group newgr declaration but use them only conditionaly (#ifndef SHADOWGRP).

2006-05-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: schedule release 4.0.16 to 29.05.06.

	* po/pl.po: updated.

	* po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po:
	run "make update-po".

	* NEWS, src/useradd.c:
	fixed userdel CERT VU#312962: fixed forgoten checking of the return
	value from fchown() before proceeding with the fchmod() (prepared
	based on OWL fix submited by Solar Designer <solar@openwall.com>),
	Use in userdel login.defs::MAIL_DIR instead hardcoded /var/mail on created
	mailbox path (based on OWL fixes submited by Solar Designer <solar@openwall.com>).

2006-05-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/.cvsignore: added *.[1358]

	* NEWS, man/ru/Makefile.am, man/ru/chgpasswd.8:
	added chgpasswd(8) ru man page (by Yuri Kozlov <kozlov.y@gmail.com>).

	* po/gl.po: updated (by Jacobo Tarrio <jtarrio@debian.org>).

	* NEWS, man/ru/login.defs.5, man/ru/passwd.1, man/ru/userdel.8, man/ru/usermod.8:
	updated ru login.defs(5), passwd(1), userdel(8), usermod(8) man pages
	(by Yuri Kozlov <kozlov.y@gmail.com>).

	* NEWS, po/ru.po: updated (by Yuri Kozlov <kozlov.y@gmail.com>).

	* NEWS, po/pt.po: updated (by Miguel Figueiredo <elmig@debianpt.org>).

2006-05-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/Makefile.am, man/ja/Attic/pw_auth.3, man/ja/Makefile.am, man/pl/Attic/pw_auth.3, man/pl/Makefile.am, man/ru/Attic/pw_auth.3, man/ru/Makefile.am:
	pw_auth(3) man page removed (outdated).

	* man/Makefile.am, man/fr/Makefile.am, man/it/Makefile.am, man/ja/Makefile.am, man/pl/Makefile.am, man/ru/Makefile.am, NEWS, autogen.sh:
	install limits(5), login.access(5) and porttime(5) man pages only when
	shadow is builded with PAM support disabled.

	* NEWS: cleanups.

	* autogen.sh:
	by default in development environment use CFLAGS="-O2 -Wall".

	* src/chgpasswd.c (main): remove two unused variables (newgr and now).

	* src/userdel.c (main): removed unused arg variable.

	* libmisc/setupenv.c (setup_env):
	move *cp varable to #ifndef PAM part (fixed compilation
	warning about unused variable).

	* lib/getdef.c: now GETPASS_ASTERISKS is SKEY #define dependent.

	* configure.in, NEWS, lib/Attic/getpass.c, lib/pwauth.c:
	by default do not use libshadow_getpass() as getpass() replacemement.
	Use libshadow_getpass() only when S/KEY support is enabled.
	Current glibc getpass() handles correctly longer than 8 characters
	passwords and libshadow_getpass() is used only because libc getpass()
	do not handles password prompting with echo enabled.

	* src/sulogin.c: break long line.

	* lib/pwauth.c:
	added #include <unistd.h> and remove localy defined getpass() prototype.

2006-05-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am: removed dupplicated sulogin.8.xml from EXTRA_DIST.

	* man/Attic/pw_auth.3.xml, man/Makefile.am: remove pw_auth(3) man page.

	* NEWS, lib/getdef.c: move login.defs::MD5_CRYPT_ENAB to non-PAM part.

	* po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/userdel.c, po/bs.po:
	typo (s/removel/removal/)

2006-05-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/userdel.8.xml:
	updated (after add getopt_log() support for userdel).

	* po/pl.po: updated.

	* po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/userdel.c, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po:
	userdel rewrited for use getopt_log().

	* po/pl.po: cleanups.

	* etc/pam.d/Makefile.am, etc/pam.d/chgpasswd: new file.

2006-05-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/da.po:
	updated (by Claus Hindsgaul <claus.hindsgaul@gmail.com>).

2006-05-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/sv.po: updated (by Daniel Nylander <yeager@lidkoping.net>).

	* NEWS, configure.in, etc/Makefile.am, etc/pam.d/Makefile.am:
	install default/template configuration files:
	- if shadow is configured with use PAM install /etc/pam.d/* files,
	- if shadow do not uses PAM install /etc/{limits,login.acces} files,
	- install /etc/login.defs and /etc/default/useradd files.

	COMMENT: it is possible to extend this for install above files for specified
	distribution. For example: if exist /etc/fedora-release install Fedora specyfic
	default configuration files and this files can be distributed in dist tar ball.

	* NEWS, po/gl.po: updated (by Jacobo Tarrio <jtarrio@trasno.net>).

2006-05-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/fr.po:
	updated (by Christian Perrier <bubulle@kheops.frmug.org>).

	* NEWS, lib/commonio.c:
	fixed handle relative symlinks too in lib/commonio.c (merge patch from Fedora).

	* NEWS, lib/nscd.c: properly notify nscd to flush its cache
	(https://bugzilla.redhat.com/bugzilla/186803).

	* NEWS, libmisc/copydir.c (copy_tree):
	fixes for verify return values mkdir() and chown()
	on copy files (merge 482_libmisc_copydir_check_return_values Debian patch).

	* po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/chfn.c, src/chsh.c, src/grpck.c, src/login.c, src/pwck.c, src/useradd.c, src/usermod.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po:
	use '%s' cytation instead `%s'.

	* NEWS, src/su.c:
	reverte http://bugs.debian.org/276419 (this is Debian specyfic).

	* libmisc/setupenv.c, libmisc/sub.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/chfn.c:
	use '%s' cytation instead \"%s\".

	* po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, src/grpck.c:
	typo.

	* po/pl.po: updated.

	* NEWS, libmisc/setupenv.c (setup_env):
	export MAIL only when MAIL_CHECK_ENAB is enabled
	(Mike Frysinger <vapier@gentoo.org>).

	* po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/hu.po, po/id.po, po/it.po, src/grpck.c, src/pwck.c:
	warn when the members of a group differ in /etc/groups and /etc/gshadow
	(fixed http://bugs.debian.org/75181).

	* NEWS, src/su.c:
	concatenate the non-su arguments and provide them to the shell with
	the -c option (fixes for http://bugs.debian.org/317264 and
	http://bugs.debian.org/276419).

2006-05-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/passwd.1.xml:
	better document how password strength is checked (fixed http://bugs.debian.org/115380).

2006-04-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/usermod.8.xml:
	added missing -a option description (by Christian Perrier <bubulle@debian.org>).

2006-04-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/hu/chsh.1, man/hu/login.1, man/hu/newgrp.1:
	fixed typos (by Koblinger Egmont <egmont@uhulinux.hu>).

2006-04-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/LINGUAS, po/hu.po:
	new hu translation (by SZERVÁC Attila <sas@321.hu>).

2006-04-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/userdel.8.xml:
	minior fixes for the note under the -f option (Mike Frysinger <vapier@gentoo.org>).

2006-04-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/id.po: updatd (by Parlin Imanuel <pimanuel@gmail.com>).

2006-04-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/su.c: indent code.

	* NEWS, src/su.c:
	fixed exit with a status 0 when the invoked command is terminated
	by a signal which was not catched
	(fixed by Eero Häkkinen <eero17@bigfoot.com>)

	* README:
	simple patch to fixup grammar and Gentoo distfile URL (by Mike Frysinger <vapier@gentoo.org>).

2006-03-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/pw_auth.3.xml, man/chage.1.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newgrp.1.xml, man/newusers.8.xml, man/nologin.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/sg.1.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml:
	removed <!DOCTYPE> tag (require strict DocBook XML V4.3//EN DTD isn't neccessary).

	* NEWS, src/login.c:
	cancel login timeout after authentication so that patient people
	timing out on network directory services can log in with local
	accounts (http://bugs.debian.org/107148).

	* man/fr/login.defs.5, man/ja/login.defs.5, man/pl/useradd.8, man/ru/login.defs.5:
	remove CREATE_HOME.

	* NEWS, man/login.defs.5.xml:
	CREATE_HOME is not supported by useradd (patch by Mike Frysinger <vapier@gentoo.org>).

2006-03-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/nl.po:
	s/wachtwoord is mes succes aangepast/wachtwoord is met succes aangepast/
	(typo reported by Wim De Smet <wdesmet@yucom.be>).

2006-03-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/passwd.c:
	removed GPASSWD_PROGRAM, CHFN_PROGRAM CHFN_PROGRAM #defines (not used now).

	* NEWS, man/Makefile.am, man/chgpasswd.8.xml:
	chgpasswd(8): new man page.

2006-03-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/vigr.8, man/Attic/vipw.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/getspnam.3, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/grpconv.8, man/Attic/grpunconv.8, man/Attic/gshadow.5, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/nologin.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/pwunconv.8, man/Attic/sg.1, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8:
	remove english roff man pages from repo.

2006-03-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/chgpasswd.c:
	fixes for build correctly with --disable-shadowgrp
	(patch by Johannes Winkelmann <jw@tks6.net>)

2006-03-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/chage.1: fixed typo.

2006-03-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/it.po:
	updated for 4.0.15 (by Danilo Piazzalunga <danilopiazza@gmail.com>).

2006-03-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/nb.po:
	updated for 4.0.15 (by Bjørn Steensrud <bjornst@powertech.no>).

	* po/pt.po:
	updated for 4.0.15 (by Miguel Figueiredo <mfigueiredo@gmail.com>).

	* man/Makefile.am, NEWS, configure.in:
	do not install translated man pages if shadow is configured with --disable-nls
	(based patch submited by Mike Frysinger <vapier@gentoo.org>).

	* NEWS, po/pt_BR.po:
	updated for 4.0.15 (by Andre Luis Lopes <andrelop@debian.org>).

	* po/fr.po:
	updated for 4.0.15 (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

2006-03-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in, lib/pwauth.c:
	added fixes for detect BSD's S/Key with updated the skeychallenge() function
	for take a fourth argument in case BSD version
	(patch submited by Mike Frysinger <vapier@gentoo.org>)

	* README: added paragragraph about S/Key support.

	* po/sk.po: updated for 4.0.15 (by Peter Mann <Peter.Mann@tuke.sk>).

	* NEWS: newgrp: do not link with libselinux.

	* NEWS, po/zh_CN.po:
	updated for 4.0.15 (by Carlos Z.F. Liu <carlosliu@users.sourceforge.net>).

	* po/ru.po: updated for 4.0.15 (by Yuri Kozlov <kozlov.y@gmail.com>).

	* src/Makefile.am:
	removed $(LIBSELINUX) from newgrp_LDADD (newgrp does not need to be linked
	with SELinux libraries).

	* man/ru/Attic/pw_auth.3, man/ru/chsh.1, man/ru/expiry.1, man/ru/faillog.5, man/ru/faillog.8, man/ru/gpasswd.1, man/ru/groupadd.8, man/ru/groupdel.8, man/ru/groupmems.8, man/ru/groupmod.8, man/ru/groups.1, man/ru/grpck.8, man/ru/gshadow.5, man/ru/id.1, man/ru/lastlog.8, man/ru/limits.5, man/ru/login.1, man/ru/login.access.5, man/ru/login.defs.5, man/ru/logoutd.8, man/ru/newgrp.1, man/ru/newusers.8, man/ru/nologin.8, man/ru/passwd.1, man/ru/passwd.5, man/ru/porttime.5, man/ru/pwck.8, man/ru/pwconv.8, man/ru/sg.1, man/ru/shadow.3, man/ru/shadow.5, man/ru/su.1, man/ru/suauth.5, man/ru/sulogin.8, man/ru/useradd.8, man/ru/userdel.8, man/ru/usermod.8, man/ru/vipw.8, NEWS, man/ru/Makefile.am, man/ru/chage.1, man/ru/chfn.1, man/ru/chpasswd.8:
	ru man pages: added new nologin(8) and updated all other man pages
	(by Yuri Kozlov <kozlov.y@gmail.com>).

2006-03-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/nl.po:
	updated for 4.0.15 (by cobaco (aka Bart Cornelis) <cobaco@linux.be>).

	* po/vi.po:
	updated for 4.0.15 (by Clytie Siddall <clytie@riverland.net.au>).

	* po/sv.po:
	updated for 4.0.15 (by Daniel Nylander <po@danielnylander.se>).

2006-03-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/eu.po: updated for 4.0.15 (by pi <pi@beobide.net>).

	* po/ro.po: cleanups.

	* NEWS, po/tl.po:
	updated for 4.0.15 (by Eric Pareja <xenos@upm.edu.ph>).

	* po/ro.po: updated for 4.0.15 (by Sorin B. <sorin@bonbon.net>).

	* NEWS, po/es.po:
	updated for 4.0.15 (by Ruben Porras <nahoo82@gmail.com>).

2006-03-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/da.po:
	updated for 4.0.15 (by Claus Hindsgaul <claus.hindsgaul@gmail.com>).

	* NEWS, man/fi/chsh.1, man/fi/su.1:
	update fi chsh(1), su(1) man pages generated from XML files
	(Tommi Vainikainen <thv+debian@iki.fi>).

	* NEWS, po/fi.po:
	updated for 4.0.15 (by Tommi Vainikainen <thv+debian@iki.fi>).

	* NEWS, po/cs.po:
	updated for 4.0.15 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* NEWS, man/cs/Makefile.am, man/cs/expiry.1, man/cs/faillog.5, man/cs/faillog.8, man/cs/gpasswd.1, man/cs/groupadd.8, man/cs/groupdel.8, man/cs/logoutd.8, man/cs/nologin.8, man/cs/vipw.8:
	added new cs man pages: expiry(1), faillog(5), faillog(8), gpasswd(1),
	groupadd(8), groupdel(8), logoutd(8), nologin(8), vipw(8).

	* NEWS: typo.

	* src/useradd.c, NEWS, lib/getdef.h, man/Attic/login.defs.5, man/login.defs.5.xml, src/login.c, src/newusers.c:
	default UMASK if not specified in login.defs is 022.

2006-03-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: updated for 4.0.15.

	* NEWS, po/gl.po:
	updated for 4.0.15 (by Jacobo Tarrio <jtarrio@trasno.net>).

	* NEWS, configure.in: schedule release 4.0.15 to 13-03-2006.

2006-03-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: typo (s/onas Meurer/Jonas Meurer/)

	* src/.cvsignore: added chgpasswd.

	* po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/Makefile.am, src/chgpasswd.c, NEWS, po/POTFILES.in, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po:
	chgpasswd: new tool (by Jonas Meurer <mejo@debian.org>).

	* src/lastlog.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	s/Unexpected/unexpected/

	* po/fr.po, po/gl.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/lastlog.c, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po:
	print the usage and exit if an additional argument is profided to
	lastlog (merge 488_laslog_verify_arguments Debian patch).

2006-03-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chpasswd.8, man/chpasswd.8.xml:
	fixed CAVEATS section (by Justin Pryzby <justinpryzby@users.sourceforge.net>)

2006-02-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/passwd.1, man/passwd.1.xml:
	fixed SYNOPSIS section (http://bugs.debian.org/352136).

2006-02-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ro.po: updated (by Sorin Batariuc <sorin@bonbon.net>).

2006-02-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, lib/Makefile.am, src/Makefile.am:
	login, nologin, su: do not link with libselinux
	(merge 490_link_selinux_only_when_needed Debian patch).

	* NEWS, src/chage.c, src/chfn.c, src/chsh.c, src/passwd.c:
	fixed confusing error message if /proc is not mounted
	(http://bugs.debian.org/352494
	patch Nicolas François <nicolas.francois@centraliens.net>)

	* po/ro.po:
	updated (commited http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=347755).

	* NEWS, po/ca.po: updated (by Jordi Mallach <jordi@debian.org>).

2006-02-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/gpasswd.1.xml, man/passwd.1.xml, man/passwd.5.xml, man/pwck.8.xml, man/sg.1.xml, man/useradd.8.xml:
	cleanups.

	* po/gl.po: updated (Jacobo Tarrio <jtarrio@trasno.net>).

	* NEWS, po/pt.po:
	updated (by Miguel Figueiredo <mfigueiredo@gmail.com>).

2006-02-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/it.po:
	update (by Danilo Piazzalunga <danilopiazza@gmail.com>).

	* po/vi.po: update (by Clytie Siddall <clytie@riverland.net.au>).

	* po/sv.po: updated (by Daniel Nylander <yeager@lidkoping.net>).

2006-02-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po: updated (by Christian Perrier <bubulle@kheops.frmug.org>).

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	run "make update-po".

	* po/pl.po: updated.

	* po/sk.po: updated (by Peter Mann <Peter.Mann@tuke.sk>).

	* po/eu.po: update (by ^pi^ <pi@beobide.net>).

2006-02-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/login.c:
	merge 433_login_more_LOG_UNKFAIL_ENAB Debian patch:
	- TOO MANY LOGIN... logged if PAM_MAXTRIES or failcount >= retries
	  (was onl test PAM_MAXTRIES),
	- print to stderr (in addition to syslog) in case of maximum number of
	  tries exceeded,
	- always prints the number of tries in the syslog entry.
	- add special handling for PAM_ABORT
	- add an entry to failog, as when USE_PAM is not defined. (#53164)
	- changed pam_end to PAM_END. This is certainly was a mistake.
	  PAM_END is pam_close_seesion + pam_end. Here, the session is still not
	  open, we don't have to close it.
	- a HAVE_PAM_FAIL_DELAY is missing

	* po/ro.po: kill one fuzzy.

	* po/ro.po, NEWS: updated (by Sorin B. <sorin@bonbon.net>).

	* src/gpasswd.c: s/die/catch_signals/

	* src/expiry.c, src/sulogin.c: s/catch/catch_signals/

	* src/su.c: /su_catch_sig/chatch_signals/

2006-02-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/id.c, src/groups.c, libmisc/getdate.y: lint code using CC=g++.

	* NEWS, src/su.c:
	fixed pam session support (patch from Topi Miettinen; fixed #57526, #55873,
	#57532 Debian bugs).

	* NEWS:
	fixed pam session support (patch from Topi Miettinen; fixed #57526,
	#55873, #57532 Debian bugs).

	* NEWS, src/userdel.c:
	user's group is already removed by update_groups(). remove_group()
	is not needed (bug introduced in 4.0.14 on merge FC fixes). Fixed by Nicolas
	François <nicolas.francois@centraliens.net>

	* NEWS, src/useradd.c: allways remove group and gshadow databases lock,
	Fixed by Nicolas François <nicolas.francois@centraliens.net>
	(http://bugs.debian.org/348250)

	* NEWS, src/userdel.c: fixed excess audit_logger() argument.

	* NEWS, lib/prototypes.h:
	corrected prototypes in lib/prototypes.h (thre is no audit_help_log(); added
	audit_logger() prototype).

	* src/login.c: fixed missing ";" in declaration.

	* man/Attic/limits.5, man/limits.5.xml:
	fixed example limits string (by Yuri Kozlov <kozlov.y@gmail.com>).

2006-02-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/chage.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/gl.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po:
	added missing \n on display password status if password must be chaged.

2006-02-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c, NEWS:
	fixed allow non-unique UID (http://bugs.debian.org/351281).

2006-02-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/cs.po: updated (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

2006-01-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/vi.po:
	updated (by Clytie Siddall <clytie@riverland.net.au>).

2006-01-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po:
	typo (fixed by Christian Perrier <bubulle@kheops.frmug.org>).

	* po/sk.po: updated (by Peter Mann <Peter.Mann@tuke.sk>).

2006-01-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/grpck.8, man/pl/login.defs.5, man/pl/passwd.1, man/pl/pwck.8, man/de/passwd.1, man/es/login.1, man/es/vipw.8, man/fi/passwd.1, man/hu/passwd.1, man/id/login.1, man/it/grpck.8, man/it/pwck.8, man/ja/grpck.8, man/ja/passwd.1, man/ja/pwck.8, man/ko/login.1, man/ko/su.1:
	fixes some issues that cause warnings when the manpages are
	displayed (by Nicolas François <nicolas.francois@centraliens.net>).

2006-01-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/eu.po: updated (by pi <pi@beobide.net>).

	* libmisc/addgrps.c, libmisc/xmalloc.c, src/groups.c:
	fixes after linting code using CC=g++: cast {m,re}alloc() return value to
	proper type.

2006-01-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chage.1, man/Attic/passwd.5, man/Attic/su.1, man/Attic/useradd.8, man/chage.1.xml, man/passwd.5.xml, man/su.1.xml, man/useradd.8.xml:
	uniformity and grammar fixes (by Christine Spang <spangarang@twcny.rr.com>).

	* NEWS, po/ru.po: updated (by Yuri Kozlov <kozlov.y@gmail.com>).

2006-01-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po, NEWS:
	updated (by Christian Perrier <bubulle@kheops.frmug.org>).

2006-01-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, libmisc/setupenv.c, src/chage.c, src/chsh.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/login.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/usermod.c, src/vipw.c:
	variouse code cleanups for make possible compilation of shadow with
	-Wall -Werror (by Alexander Gattin <xrgtn@yandex.ru>).

	* libmisc/age.c, libmisc/shell.c, src/login.c, src/newgrp.c, src/su.c, src/sulogin.c, src/userdel.c, NEWS, lib/prototypes.h:
	move exit() outside libmisc/shell.c::shell() for handle shell() errors
	on higher level (now is better visable where some programs exit with 126 and
	127 exit codes); added new shell() parameter (char *const envp[]) which allow
	fix preserving enviloment in su on using -p.
	(patch by Alexander Gattin <xrgtn@yandex.ru>)

	* NEWS, po/el.po:
	updated (by Konstantinos Margaritis <markos@debian.org>).

2006-01-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/exitcodes.h: new #defines:
	#define E_CMD_NOEXEC           126     /* can't run command/shell */
	#define E_CMD_NOTFOUND         127     /* can't find command/shell to run */

2006-01-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/passwd.1, man/passwd.1.xml:
	fixes after reviewed for grammatical and other small errors that detract from the
	polish of the content to native English speakers.
	I also went ahead and changed all gender references to be a consistent
	"his/her" (or equivalent) - the original had a mix of just "his", just
	"her", and occasionally "his/her".
	(by Christine Spang <spangarang@twcny.rr.com>).

	* po/it.po: updated (by Danilo Piazzalunga <danilopiazza@gmail.com>).

2006-01-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: updated.

	* libmisc/shell.c: remove DEBUG code.

	* po/LINGUAS, po/gl.po, NEWS:
	added new gl translation (by Jacobo Tarrio <jtarrio@trasno.net>).

2006-01-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/eu.po: small update (by pi <pi@beobide.net>).

2006-01-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/su.c: fixed compilation error.

2006-01-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/sv.po: updated (by Daniel Nylander <yeager@lidkoping.net>)
	http://bugs.debian.org/346449

2006-01-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/Attic/useradd.8, man/useradd.8.xml:
	better document useradd -d option: will not add the user's home directory
	if it does not already exist (http://bugs.debian.org/154996)

	* man/Attic/su.1, man/su.1.xml, po/zh_CN.po, po/zh_TW.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, src/su.c:
	added handle -c,--command option for GNU su compliance (merge
	437_su_-c_option Debian Patch).

	* man/Attic/login.1, man/Attic/passwd.1, man/Attic/su.1, man/login.1.xml, man/passwd.1.xml, man/su.1.xml:
	man pages cleanups.
	(http://bugs.debian.org/341489)

	* NEWS, man/Attic/nologin.8, man/Makefile.am, man/nologin.8.xml:
	nologin(8) man pages added (merge 478_nologin.8.xml Debian patch).

	* po/sk.po: updated (by Peter Mann <Peter.Mann@tuke.sk>)
	http://bugs.debian.org/346376

2006-01-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/id.po: updated (by Parlin Imanuel <parlin_i@yahoo.com>)
	http://bugs.debian.org/345514

	* NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/login.c:
	added translate login prompt string (suggested by Evgeniy Dushistov).

2006-01-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: start work on 4.1.0.

	* po/sv.po: updated (by Daniel Nylander <yeager@lidkoping.net>).
	http://bugs.debian.org/346017

2006-01-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: correct 4.0.14 release date (03-01-2006).

	* src/Makefile.am: reverte install nologin in sbindir and use usbindir.

	* po/POTFILES.in: removed src/chsh_chkshell.c.

	* lib/prototypes.h: remove grdbm.c prototypes.

	* lib/prototypes.h, src/Attic/chsh_chkshell.c, src/Makefile.am, src/chsh.c:
	move check_shell() from src/chsh_chkshell.c to src/chsh.c.

	* configure.in:
	s/libpam_misc is missing/libpam_misc is missing for enable PAM support/

2006-01-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* etc/pam.d/.cvsignore: added.

	* src/su.c: indent code.

	* src/su.c:
	without it, $(su - user -c "echo \$SHELL") wont return the good value, but
	$(su user -c "echo \$SHELL") will.
	I think LOGNAME can also be set (this is done in setup_env, in the
	fakelogin case).
	(by Nicolas François <nicolas.francois@centraliens.net>)

	* src/su.c:
	simplifies how -p is handled (at least for its documentation).
	(by Nicolas François <nicolas.francois@centraliens.net>)

	* src/su.c: fixes "su - -- root" or "su - root -- -c" (it is needed if
	the second patch is applied).
	(by Nicolas François <nicolas.francois@centraliens.net>)

	* src/su.c:
	This second patch changes the way options are handled by getopt. Once a
	non-su option is found, the getopt processing is stopped.
	Whithout this patch, "su root -c ls" won't work (getopt will complain that
	-c is not an su option).
	(by Nicolas François <nicolas.francois@centraliens.net>).

	* etc/pam.d/chage, etc/pam.d/chfn, etc/pam.d/chpasswd, etc/pam.d/chsh, etc/pam.d/groupadd, etc/pam.d/groupdel, etc/pam.d/groupmod, etc/pam.d/login, etc/pam.d/newusers, etc/pam.d/passwd, etc/pam.d/su, etc/pam.d/useradd, etc/pam.d/userdel, etc/pam.d/usermod:
	prepare for use on Fedora Core.

	* po/cs.po, po/pl.po: run "make update-po".

	* src/Makefile.am: move nologin to sbindir.

	* man/Attic/groupadd.8, man/groupadd.8.xml: s/gid/GID/

	* man/Attic/lastlog.8, man/Attic/useradd.8, man/lastlog.8.xml, man/useradd.8.xml:
	s/uid/UID/

2005-12-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/tl.po: updated for 4.0.14 (by Eric Pareja <xenos@upm.edu.ph>).

2005-12-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/ca.po:
	updated for 4.0.14 (by Guillem Jover <guillem@debian.org>).

2005-12-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/el.po:
	updated for 4.0.14 (by Konstantinos Margaritis <markos@debian.org>).

2005-12-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* doc/.cvsignore, etc/.cvsignore, lib/.cvsignore, po/.cvsignore, src/.cvsignore, .cvsignore, contrib/.cvsignore:
	added a lot of generated files they are not listed in .cvsignore files
	(by Danilo Piazzalunga <danilopiazza@gmail.com>).

	* src/su.c:
	fixed some comments and replace getuid() by !amroot. This removes a system
	call and may be more readable (Nicolas François <nicolas.francois@centraliens.net>).

	* man/Attic/su.1, man/su.1.xml:
	added forgoten the SHELL argument description (by Nicolas François <nicolas.francois@centraliens.net>).

	* man/Attic/useradd.8, man/useradd.8.xml:
	s/group/user/ (cached by Nicolas François).

2005-12-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ko/vigr.8: added.

	* po/it.po:
	updated for 4.0.14 (by Danilo Piazzalunga <danilopiazza@gmail.com>).

2005-12-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/pt.po:
	updated for 4.0.14 (by Miguel Figueiredo <mfigueiredo@gmail.com>).

	* src/useradd.c:
	s/grp_update/grp_add/ in comment (by Nicolas François <nicolas.francois@centraliens.net>).

	* man/Attic/login.1, man/login.1.xml:
	added use <envar></envar> tags instead <emphasis></emphasis>.

	* man/Attic/su.1, man/su.1.xml: added use <envar></envar>.

	* man/Attic/su.1, man/su.1.xml:
	updated man page after change su for use getopt_long()
	(by Nicolas François <nicolas.francois@centraliens.net>)

2005-12-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/fi.po:
	updated for 4.0.14 (by Tommi Vainikainen <thv+debian@iki.fi>).

	* po/ru.po: updated for 4.0.14 (by Yuri Kozlov <kozlov.y@gmail.com>).

	* man/ru/login.1, man/ru/passwd.1, man/ru/pwck.8, man/ru/vipw.8:
	updated (by Yuri Kozlov <kozlov.y@gmail.com>_.

	* doc/Attic/README.linux, doc/Makefile.am: removed.

	* README, doc/Attic/README.linux:
	move contributors list from doc/README.linux to README.

	* doc/Attic/LSM, doc/Attic/README, doc/Makefile.am:
	removed (outdated content).

	* NEWS, po/cs.po:
	updated cs.po for 4.0.14 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* po/pl.po: updated.

	* po/fr.po:
	kill one fuzzy (by Christian Perrier <bubulle@kheops.frmug.org>).

	* NEWS, po/da.po:
	updated da.po for 4.0.14 (by Claus Hindsgaul <claus_h@image.dk>).

	* po/eu.po: updated for 4.0.14 (by pi <pi@beobide.net>).

	* NEWS, po/vi.po:
	updated vi.po fo 4.0.14 (by Clytie Siddall <clytie@riverland.net.au>).

2005-12-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: set release day for 4.0.14 to 19-12-2005.

	* src/login.c:
	removed #include "libaudit.h" (it is conditionaly included in "defines.h").

	* src/su.c:
	replaced "shell" by "shellstr". "shell" is also the name of a function.
	(Nicolas François <nicolas.francois@centraliens.net>).

	* src/vipw.c: - added missing break in case 'q'.

	* NEWS, man/es/Makefile.am, man/es/vigr.8, man/es/vipw.8, man/hu/Makefile.am, man/hu/lastlog.8, man/ko/Makefile.am, man/ko/vipw.8, man/zh_CN/Makefile.am, man/zh_CN/su.1, man/zh_TW/Makefile.am, man/zh_TW/chpasswd.8, man/zh_TW/su.1:
	added es, ko vigr(8) and vipw(8), hu lastlog(8), ko vipw(8), zh_CN su(1),
	zh_TW chpasswd(8) and su(1),

2005-12-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* doc/Attic/LICENSE, doc/Makefile.am, COPYING:
	move doc/LICENSE to COPYING.

	* doc/WISHLIST: remove some outdated/finished things.

	* doc/Attic/README.nls, doc/Attic/README.pam, doc/Makefile.am: removed.

2005-12-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	run "make update-po" (merge changes in su messages).

	* NEWS, src/su.c:
	added handle -s/--shell, -m/-p/preserve-environment options like GNU su
	(based on patches from Debian submited by
	Nicolas François <nicolas.francois@centraliens.net>)

	* NEWS: updated.

	* src/su.c:
	added handle -s/--shell option like in GNU su (based on Debian patch sublmited
	by Nicolas François <nicolas.francois@centraliens.net>).

	* src/su.c:
	make -, -l , --login option as no_argument (based on fix by Nicolas François).

	* po/it.po:
	cosmetic fixes (by Danilo Piazzalunga <danilopiazza@gmail.com>).

2005-12-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/es/Makefile.am: s/patches/passwd/

2005-12-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in, man/Makefile.am, man/tr/.cvsignore, man/tr/Makefile.am, man/tr/chage.1, man/tr/chfn.1, man/tr/groupadd.8, man/tr/groupdel.8, man/tr/groupmod.8, man/tr/login.1, man/tr/passwd.1, man/tr/passwd.5, man/tr/shadow.5, man/tr/su.1, man/tr/useradd.8, man/tr/userdel.8, man/tr/usermod.8:
	added tr man pages.

	* man/pt_BR/Makefile.am, man/pt_BR/passwd.5, man/zh_CN/Makefile.am, man/zh_CN/passwd.5, man/zh_TW/Makefile.am, man/zh_TW/passwd.5, NEWS, man/es/Makefile.am, man/es/passwd.5, man/hu/Makefile.am, man/hu/passwd.5:
	added es, hu, pt_BR, zh_CN zh_TW translations passwd(5).

	* man/Attic/id.1, man/Attic/pw_auth.3, man/Attic/sulogin.8:
	regenerated.

	* man/ko/Makefile.am: added su.1 to man_MANS.

	* man/Makefile.am: reverte incorrect commit.

	* man/Attic/pwconv.8, man/Attic/shadow.3, man/Attic/vipw.8, man/Makefile.am, man/fr/Makefile.am, man/fr/chage.1, man/fr/chfn.1, man/fr/chpasswd.8, man/fr/chsh.1, man/fr/expiry.1, man/fr/faillog.5, man/fr/faillog.8, man/fr/getspnam.3, man/fr/gpasswd.1, man/fr/groupadd.8, man/fr/groupdel.8, man/fr/groupmod.8, man/fr/groups.1, man/fr/grpck.8, man/fr/grpconv.8, man/fr/grpunconv.8, man/fr/gshadow.5, man/fr/lastlog.8, man/fr/limits.5, man/fr/login.1, man/fr/login.access.5, man/fr/login.defs.5, man/fr/logoutd.8, man/fr/newgrp.1, man/fr/newusers.8, man/fr/passwd.1, man/fr/passwd.5, man/fr/porttime.5, man/fr/pwck.8, man/fr/pwconv.8, man/fr/pwunconv.8, man/fr/sg.1, man/fr/shadow.3, man/fr/shadow.5, man/fr/su.1, man/fr/suauth.5, man/fr/useradd.8, man/fr/userdel.8, man/fr/usermod.8, man/fr/vigr.8, man/fr/vipw.8, NEWS:
	added full set (up to date) fr man pages (by Nicolas François <nicolas.francois@centraliens.net>).

2005-12-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ca.po, po/cs.po, po/da.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/it.po, po/nl.po, po/ro.po, po/sk.po, po/sv.po:
	cleanups.

	* src/groupadd.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	s/--force /--force/

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/useradd.c:
	s/--skel SKEL_DIR /--skel SKEL_DIR/

	* po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/passwd.c, po/bs.po, po/ca.po, po/cs.po, po/da.po:
	s/--delete /--delete/

	* NEWS, po/ru.po:
	updated ru translatios for 4.0.14 (by Yuri Kozlov <kozlov.y@gmail.com>).

	* po/eu.po: finish update for 4.0.14 (by pi <pi@beobide.net>).

	* po/it.po:
	updated for 4.0.14 (by Danilo Piazzalunga <danilopiazza@gmail.com>).

2005-12-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po: updated (by Christian Perrier <bubulle@kheops.frmug.org>).

	* NEWS, po/eu.po: Basque translation updated (by pi <pi@beobide.net>).

	* po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/su.c, src/usermod.c, po/bs.po:
	s/LOGIN/login/ in usage() output.

2005-12-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/vipw.c, NEWS, man/Attic/vipw.8, man/vipw.8.xml, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po:
	rewrited vipw for use getopt_long().

	* man/Attic/passwd.1, man/passwd.1.xml: cleanups.

	* man/ko/Makefile.am: commented newgrp.1 (must be updated).

2005-12-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am: update-po target added.

	* man/Attic/pwck.8, man/pwck.8.xml: document -q option.

	* NEWS, lib/getdef.c:
	$MAIL_FILE is used in userdel and usermod, $MD5_CRYPT_ENAB
	is used by crypt_make_salt, which is used by chpasswd, gpasswd and newusers.
	Both variables moved to PAM not dependent (447_missing_login.defs_variables
	Debian patch).

	* NEWS, src/su.c:
	export $USER and $SHELL as well as $HOME (http://bugs.debian.org/11003 and
	http://bugs.debian.org/11189).

	* NEWS, man/Attic/login.1, man/login.1.xml:
	document how to initiate a trusted path on linux
	(http://bugs.debian.org/305600).

	* NEWS, src/chage.c:
	fix chage display when the last change field is set to 0.
	This is consistent with PAM (merge 427_chage_expiry_0 Debian patch).

2005-12-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: added man/fi/Makefile to AC_CONFIG_FILES().

	* man/zh_TW/chfn.1, man/zh_TW/chsh.1, man/zh_TW/groupadd.8, man/zh_TW/groupdel.8, man/zh_TW/groupmod.8, man/zh_TW/newgrp.1, man/zh_TW/useradd.8, man/zh_TW/userdel.8, man/zh_TW/usermod.8, man/pt_BR/gpasswd.1, man/pt_BR/groupadd.8, man/pt_BR/groupdel.8, man/pt_BR/groupmod.8, man/pt_BR/shadow.5, man/ru/Attic/pw_auth.3, man/ru/chage.1, man/ru/chfn.1, man/ru/chpasswd.8, man/ru/chsh.1, man/ru/expiry.1, man/ru/faillog.5, man/ru/faillog.8, man/ru/gpasswd.1, man/ru/groupadd.8, man/ru/groupdel.8, man/ru/groupmems.8, man/ru/groupmod.8, man/ru/groups.1, man/ru/grpck.8, man/ru/gshadow.5, man/ru/id.1, man/ru/lastlog.8, man/ru/limits.5, man/ru/login.1, man/ru/login.access.5, man/ru/login.defs.5, man/ru/logoutd.8, man/ru/newgrp.1, man/ru/newusers.8, man/ru/passwd.1, man/ru/passwd.5, man/ru/porttime.5, man/ru/pwck.8, man/ru/pwconv.8, man/ru/sg.1, man/ru/shadow.3, man/ru/shadow.5, man/ru/su.1, man/ru/suauth.5, man/ru/sulogin.8, man/ru/useradd.8, man/ru/userdel.8, man/ru/usermod.8, man/ru/vipw.8, man/zh_CN/chfn.1, man/zh_CN/chpasswd.8, man/zh_CN/chsh.1, man/zh_CN/groupadd.8, man/zh_CN/groupdel.8, man/zh_CN/groupmod.8, man/zh_CN/newgrp.1, man/zh_CN/useradd.8, man/zh_CN/userdel.8, man/zh_CN/usermod.8, man/ko/chfn.1, man/ko/chsh.1, man/ko/groups.1, man/ko/id.1, man/ko/login.1, man/ko/newgrp.1, man/ko/passwd.5, man/ko/su.1, man/pl/Attic/pw_auth.3, man/pl/chage.1, man/pl/chfn.1, man/pl/chpasswd.8, man/pl/chsh.1, man/pl/expiry.1, man/pl/faillog.5, man/pl/faillog.8, man/pl/gpasswd.1, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmems.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/lastlog.8, man/pl/limits.5, man/pl/login.1, man/pl/login.access.5, man/pl/login.defs.5, man/pl/logoutd.8, man/pl/newgrp.1, man/pl/newusers.8, man/pl/passwd.1, man/pl/passwd.5, man/pl/porttime.5, man/pl/pwck.8, man/pl/pwconv.8, man/pl/shadow.3, man/pl/shadow.5, man/pl/su.1, man/pl/suauth.5, man/pl/sulogin.8, man/pl/useradd.8, man/pl/userdel.8, man/pl/usermod.8, man/pl/vipw.8, man/it/chage.1, man/it/chfn.1, man/it/chpasswd.8, man/it/chsh.1, man/it/expiry.1, man/it/faillog.5, man/it/faillog.8, man/it/gpasswd.1, man/it/groupadd.8, man/it/groupdel.8, man/it/groupmod.8, man/it/groups.1, man/it/grpck.8, man/it/id.1, man/it/lastlog.8, man/it/login.1, man/it/newgrp.1, man/it/newusers.8, man/it/passwd.1, man/it/passwd.5, man/it/porttime.5, man/it/pwck.8, man/it/pwconv.8, man/it/shadow.3, man/it/shadow.5, man/it/su.1, man/it/useradd.8, man/it/userdel.8, man/it/usermod.8, man/ja/Attic/pw_auth.3, man/ja/chage.1, man/ja/chfn.1, man/ja/chpasswd.8, man/ja/chsh.1, man/ja/expiry.1, man/ja/faillog.5, man/ja/faillog.8, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/groups.1, man/ja/grpck.8, man/ja/id.1, man/ja/lastlog.8, man/ja/limits.5, man/ja/login.1, man/ja/login.access.5, man/ja/login.defs.5, man/ja/logoutd.8, man/ja/newgrp.1, man/ja/newusers.8, man/ja/passwd.1, man/ja/passwd.5, man/ja/porttime.5, man/ja/pwck.8, man/ja/pwconv.8, man/ja/shadow.3, man/ja/shadow.5, man/ja/su.1, man/ja/suauth.5, man/ja/sulogin.8, man/ja/useradd.8, man/ja/userdel.8, man/ja/usermod.8, man/ja/vipw.8, man/de/chfn.1, man/de/chsh.1, man/de/groups.1, man/de/login.1, man/de/newgrp.1, man/de/passwd.1, man/de/passwd.5, man/de/su.1, man/de/vipw.8, man/es/login.1, man/es/newgrp.1, man/es/passwd.1, man/es/su.1, man/fi/chfn.1, man/fi/chsh.1, man/fi/passwd.1, man/fr/chage.1, man/fr/chpasswd.8, man/fr/chsh.1, man/fr/faillog.5, man/fr/gpasswd.1, man/fr/groups.1, man/fr/id.1, man/fr/newgrp.1, man/fr/passwd.1, man/fr/passwd.5, man/fr/shadow.5, man/fr/su.1, man/fr/useradd.8, man/fr/userdel.8, man/fr/usermod.8, man/hu/chfn.1, man/hu/chsh.1, man/hu/gpasswd.1, man/hu/groups.1, man/hu/id.1, man/hu/login.1, man/hu/newgrp.1, man/hu/passwd.1, man/hu/su.1, NEWS, man/cs/groups.1, man/cs/id.1, man/cs/lastlog.8, man/cs/passwd.5, man/cs/shadow.5, man/cs/su.1:
	convert all translated man pages to UFT-8.

	* NEWS, src/userdel.c:
	fix incorrect audit record in userdel (https://bugzilla.redhat.com/bugzilla/174392).

	* po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, src/passwd.c:
	s/--all /--all/

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	update by some informations about translators (by Christian Perrier) and run "make update-po".

2005-11-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/su.c:
	if an password is expired, su should propose to change this password
	(fixed http://bugs.debian.org/321384).

	* src/Makefile.am, src/login.c, NEWS:
	added auditing support (based on Fedora patch for login from util-linux).

	* src/useradd.c: remove use rflg.

	* man/ru/Makefile.am: typo.

	* po/pl.po: partialy updated.

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po:
	run "make update-po".

	* NEWS, src/useradd.c: merge PUG fixes from RedHat patch.

2005-11-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/it.po:
	updated (by Danilo Piazzalunga <danilopiazza@gmail.com>).

	* man/ru/pwconv.8, man/ru/pwunconv.8, man/ru/sg.1, man/ru/shadow.3, man/ru/shadow.5, man/ru/su.1, man/ru/suauth.5, man/ru/sulogin.8, man/ru/useradd.8, man/ru/userdel.8, man/ru/usermod.8, man/ru/vigr.8, man/ru/vipw.8, NEWS, man/ru/Attic/pw_auth.3, man/ru/Makefile.am, man/ru/chage.1, man/ru/chfn.1, man/ru/chpasswd.8, man/ru/chsh.1, man/ru/expiry.1, man/ru/faillog.5, man/ru/faillog.8, man/ru/getspnam.3, man/ru/gpasswd.1, man/ru/groupadd.8, man/ru/groupdel.8, man/ru/groupmems.8, man/ru/groupmod.8, man/ru/groups.1, man/ru/grpck.8, man/ru/grpconv.8, man/ru/grpunconv.8, man/ru/gshadow.5, man/ru/id.1, man/ru/lastlog.8, man/ru/limits.5, man/ru/login.1, man/ru/login.access.5, man/ru/login.defs.5, man/ru/logoutd.8, man/ru/newgrp.1, man/ru/newusers.8, man/ru/passwd.1, man/ru/passwd.5, man/ru/porttime.5, man/ru/pwck.8:
	added full set of ru man pages (by Yuri Kozlov <kozlov.y@gmail.com>).

2005-11-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/Makefile.am, src/nologin.c: added nologin program.

	* NEWS, src/su.c: rewrited for use getopt_long().

2005-11-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/zh_CN.po: updated (by Ming Hua <minghua@rice.edu>).

2005-11-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/usermod.8, man/usermod.8.xml:
	rewrited for document long options.

	* NEWS, src/vipw.c:
	added a "quiet" mode (http://bugs.debian.org/190252.

	* po/de.po:
	fixed wrong translation in german po file (http://bugs.debian.org/338373
	by Nico Golde <nico@ngolde.de>).

	* NEWS, man/Makefile.am, man/fi/.cvsignore, man/fi/Makefile.am, man/fi/chfn.1, man/fi/chsh.1, man/fi/passwd.1, man/fi/su.1:
	added fi chfn(1), chsh(1), passwd(1), su(1).

	* NEWS, man/it/Makefile.am, man/it/newusers.8: added it newusers(8).

	* NEWS, po/fr.po:
	updated (by Christian Perrier <bubulle@kheops.frmug.org>).

2005-11-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/Makefile.am, src/newgrp.c:
	added auditing support for newgrp (by Steve Grubb <sgrubb@redhat.com>).

	* NEWS, configure.in, libmisc/audit_help.c:
	switch over to a new logging function (by Steve Grubb <sgrubb@redhat.com>).

	* README: typo.

2005-11-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ru.po: updated (by Yuri Kozlov <kozlov.y@gmail.com>).

2005-11-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	s/logdir/shadow_cv_logdir/ fix wrong var name (by Mike Frysinger <vapier@gentoo.org>).

	* man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3.xml, man/Attic/pwck.8, man/Attic/sg.1, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/sg.1.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, README, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/gshadow.5, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/newgrp.1, man/chage.1.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newgrp.1.xml:
	move information about all shadow man pages authors from man pages to README file.

	* src/userdel.c: added two new error messages to translated phrases.

	* NEWS, src/userdel.c:
	remove the user's group unless it is not really a user-private group
	(based on FC patch).

2005-11-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/usermod.c: fix long name options name in long_options[].

2005-11-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/userdel.c: indent source code.

	* NEWS, src/userdel.c:
	make the userdel -f option force the removal of the user's group (even if it
	is the primary group of another user)
	(merge 453_userdel_-f_removes_group Debian patch),

	* NEWS, man/Attic/login.1, man/login.1.xml:
	better explain the respective roles of login, init and getty with regards
	to the utmp file (merge 440_manpages-login.1 Debian patch).

	* man/Attic/userdel.8, man/userdel.8.xml:
	aphabetic order options description.

	* NEWS, man/Attic/userdel.8, man/userdel.8.xml:
	document the -f option; document the group removal behavior (merge
	455_userdel.8.xml Debian patch).

	* NEWS, man/Attic/groupadd.8, man/Attic/useradd.8, man/groupadd.8.xml, man/useradd.8.xml:
	document that useradd/groupadd refuse adding entries already in an
	external database (http://bugs.debian.org/282184).

	* NEWS, libmisc/sulog.c:
	log in successful/failed su through syslog (http://bugs.debian.org/190215).

	* NEWS, man/it/groupdel.8, man/it/passwd.1, man/it/pwconv.8, man/it/useradd.8, man/it/userdel.8, man/it/usermod.8:
	updated it groupdel(8), passwd(1), pwconv(8), useradd(8), userdel(8), usermod(8) man pages
	(merge 205_it-manpages Debian patch).

	* man/pt_BR/gpasswd.1: merge 204_pt_BR-manpages Debian patch.

2005-10-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/porttime.5, man/Attic/pwck.8, man/Attic/shadow.3, man/porttime.5.xml, man/pwck.8.xml:
	improvements by Yuri Kozlov <kozlov.y@gmail.com>.

	* NEWS, po/tl.po: updated (by Eric Pareja <xenos@upm.edu.ph>).

	* po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/su.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po:
	remove "." from su message.

	* po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po:
	"make update-po".

	* src/usermod.c: cleanups in usage() output.

	* src/usermod.c: indent code.

	* NEWS, src/usermod.c:
	rewrited for use getopt_long() (Christian Perrier <bubulle@kheops.frmug.org>).

2005-10-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/uk.po: updated (by Eugeniy Meshcheryakov <eugen@univ.kiev.ua>).

2005-10-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/faillog.5, man/Attic/groupmems.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/chpasswd.8.xml, man/groupmems.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/Attic/chpasswd.8:
	bunch of cleanups (Yuri Kozlov <kozlov.y@gmail.com>).

2005-10-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/userdel.c, src/usermod.c, lib/pam_defs.h, libmisc/pam_pass.c, libmisc/pwdcheck.c, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/login.c, src/newusers.c, src/su.c, src/useradd.c:
	Simplifications: move all per shadow tool declared struct pam_conv conv
	from src/*c to lib/pam_defs.h. #include "pam_defs.h" instead <security/pam_appl.h>
	and <security/pam_misc.h>.
	Patch partialy based on openpam fixes by Rob Holland <rob@inversepath.com>.

	* NEWS, lib/commonio.c:
	fixed grpck segmentation fault on using -s when /etc/gshadow is empty (fix by
	Tomasz Lemiech <szpajder@staszic.waw.pl>).

2005-10-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/faillog.5, man/faillog.5.xml:
	typos (by A Costa <agcosta@gis.net>).

2005-10-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chage.1, man/Attic/chpasswd.8, man/chage.1.xml, man/chpasswd.8.xml:
	typos (by A Costa <agcosta@gis.net>).

	* NEWS, po/sv.po: updated (by Daniel Nylander <yeager@lidkoping.net>).

2005-10-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/de/newgrp.1, man/es/Makefile.am, man/es/newgrp.1, man/zh_CN/Makefile.am, man/zh_CN/newgrp.1, man/zh_TW/Makefile.am, man/zh_TW/newgrp.1, NEWS, man/de/Makefile.am:
	newgrp(1): added de, es, zh_CN, zh_TW translations.

2005-10-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/gpasswd.1, man/gpasswd.1.xml:
	move "Notes about group passwords" section from passwd man page.

	* src/passwd.c, NEWS, man/Attic/passwd.1, man/passwd.1.xml:
	remove handle -f, -g and -s options in passwd.

	* man/userdel.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/logoutd.8.xml, man/newgrp.1.xml, man/newusers.8.xml, man/pwconv.8.xml, man/sg.1.xml:
	use locase in <refentrytitle>.

	* man/Attic/pw_auth.3, man/Attic/pw_auth.3.xml, man/Attic/shadow.3, man/shadow.3.xml:
	added refmiscinfo class="sectdesc">Library Calls</refmiscinfo> in <refmeta>.

	* man/Attic/pwconv.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8, man/newusers.8.xml, man/pwconv.8.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml, man/Attic/chpasswd.8, man/Attic/faillog.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/grpck.8, man/Attic/lastlog.8, man/Attic/logoutd.8, man/Attic/newusers.8, man/chpasswd.8.xml, man/faillog.8.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/grpck.8.xml, man/lastlog.8.xml, man/logoutd.8.xml:
	added <refmiscinfo class="sectdesc">System Management Commands</refmiscinfo>
	in <refmeta>.

	* man/Attic/login.defs.5, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/shadow.5, man/Attic/suauth.5, man/login.defs.5.xml, man/passwd.5.xml, man/porttime.5.xml, man/shadow.5.xml, man/suauth.5.xml, man/Attic/login.access.5, man/limits.5.xml, man/login.access.5.xml, man/Attic/faillog.5, man/Attic/gshadow.5, man/Attic/limits.5, man/faillog.5.xml, man/gshadow.5.xml:
	added <refmiscinfo class="sectdesc">File Formats and Conversions</refmiscinfo>
	in <refmeta>.

	* man/Attic/pwconv.8, man/Attic/suauth.5, man/Attic/vipw.8, man/pwconv.8.xml, man/suauth.5.xml, man/vipw.8.xml:
	remove <refentryinfo><date></date></refentryinfo> and <refmiscinfo class='date'> tags.

	* man/Attic/newgrp.1, man/Attic/sg.1, man/newgrp.1.xml, man/sg.1.xml:
	added <refmiscinfo class="sectdesc">User Commands</refmiscinfo> tag.

2005-10-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: start work on 4.0.14.

2005-10-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: move release 4.0.13 date to 10-10-2005.

	* NEWS:  added infor about removed duplicated pam_start() in chage.

	* NEWS: updated.

	* man/Makefile.am: added sg.1.xml to man_XMANS.

	* man/Attic/chage.1, man/chage.1.xml:
	cleanups (by Yuri Kozlov <kozlov.y@gmail.com>).

	* man/Attic/newgrp.1, man/newgrp.1.xml:
	use <filename> in few more places.

	* man/Attic/newgrp.1, man/newgrp.1.xml:
	better newgrp description (http://bugs.debian.org/325558).

2005-10-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/newusers.c, src/useradd.c, src/userdel.c, src/usermod.c:
	remove using pam_chauthtok().

	* src/chsh.c: finish PAM support using pam_start() & co.

	* src/chage.c: remove using pam_chauthtok() on finish chage.

	* src/chfn.c:
	use E_NOPERM in more places. remove using pam_chauthtok() on finish chfn.

	* src/chfn.c: cleanups.

	* src/chage.c:
	removed duplicaded not moved PAM code) was introduced during merge
	shadow-4.0.4.1-owl-pam-auth.diff patch).

	* src/chfn.c: finish PAM support.

2005-10-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chfn.1, man/Attic/chsh.1, man/chfn.1.xml, man/chsh.1.xml:
	cleanups (by  Alexander Gattin <xrgtn@yandex.ru>).

2005-10-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/userdel.c:
	userdel should not remove the group which is primary for someone else (fix
	by Nicolas François <nicolas.francois@centraliens.net> http://bugs.debian.org/295416)

2005-10-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/vipw.8.xml, man/Attic/chage.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/faillog.8, man/Attic/grpck.8, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/passwd.1, man/Attic/porttime.5, man/Attic/pw_auth.3.xml, man/Attic/shadow.3, man/Attic/su.1, man/Attic/suauth.5, man/chage.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/faillog.8.xml, man/groupmems.8.xml, man/grpck.8.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/passwd.1.xml, man/porttime.5.xml, man/shadow.3.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml:
	s/<emphasis remap='B'>/<emphasis>/

	* man/Attic/sg.1, man/sg.1.xml: use <command> instead <emphasis>.

	* man/newgrp.1.xml, man/sg.1.xml, man/chage.1.xml, man/chsh.1.xml, man/login.defs.5.xml:
	s/\.  /\. /

	* man/Attic/shadow.5, man/shadow.5.xml:
	better document "!" and "*" fields in /etc/shadow
	(based on 441_manpages-shadow.5 patch from Debian).

	* man/Attic/newgrp.1, man/newgrp.1.xml:
	SHADOWPWD was removed (always enabled)
	(based on 446_newgrp.1_no_SHADOWPWD patch from Debian).

	* po/ru.po: updated for 4.0.13 (by Yuri Kozlov <kozlov.y@gmail.com>).

2005-09-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: cleanups.

	* man/Attic/vipw.8, man/vipw.8.xml, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/gshadow.5, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pw_auth.3.xml, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/chage.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newgrp.1.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml:
	next round of cleanups.

	* man/Makefile.am: added rules for id.1, pw_auth.3 and sulogin.8.

	* libmisc/setupenv.c:
	during the changes on libmisc/setupenv.c, a piece of code was moved
	without its comment (merge 449_comment_missplaced Debian patch).

2005-09-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chfn.1, man/Attic/chsh.1, man/Attic/groupadd.8, man/Attic/newusers.8, man/Attic/pwconv.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/chfn.1.xml, man/chsh.1.xml, man/groupadd.8.xml, man/newusers.8.xml, man/pwconv.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, NEWS:
	added missing references to /etc/login.defs and login.defs(5)
	(Christian Perrier <bubulle@kheops.frmug.org>).

2005-09-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: s/XSL/XSLT/

	* po/pl.po: few updates.

	* man/Attic/passwd.1, man/passwd.1.xml:
	-i option description is back (lost on rewrite and pointed by
	Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* po/cs.po:
	updated for 4.0.13 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

2005-09-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: updated.

	* configure.in: fixes for correct handle --with{,out}-<feature>.

	* configure.in:
	use @<:@ @:>@ instead ( ) inside AC_HELP_STRING() and s/feactures/features/
	(based on fixes by Mike Frysinger <vapier@gentoo.org>).

	* po/da.po: updated for 4.0.13 (by Claus Hindsgaul <claus_h@image.dk>).

	* po/es.po: updated for 4.0.13 (by Ruben Porras <nahoo@inicia.es>).

2005-09-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, libmisc/failure.c:
	use "%c" in strftime() output (based on patch from
	http://bugs.debian.org/89902 by Christian Perrier <bubulle@debian.org>)

	* man/Attic/getspnam.3, man/Attic/shadow.3, man/shadow.3.xml:
	added <refname>getspnam</refname> to <refnamediv>.

	* man/Attic/sg.1, man/sg.1.xml: fixed <cmdsynopsis>.

	* man/Attic/sg.1, man/Makefile.am, man/sg.1.xml:
	added separated sg(1) man page.

2005-09-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/commonio.c, NEWS:
	don't assume selinux is enabled if is_selinux_enabled() returns -1
	(merge isSelinuxEnabled FC patch by Jeremy Katz <katzj@redhat.com>).

	* po/ro.po: updated (by Sorin Batariuc <sorin@bonbon.net>).

2005-09-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: schedule release 4.0.13 to 03-10-2005.

2005-09-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/gshadow.5, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8:
	regenerate all roff man pages using DocBook XSL Stylesheets 1.69.1.

	* man/logoutd.8.xml: fixed id inside <refentry>.

	* man/login.1.xml, man/logoutd.8.xml, man/newgrp.1.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/chage.1.xml, man/chfn.1.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml:
	added missing <para></para> inside <listitem> tags for pass correctly xmllint.

	* man/Attic/login.access.5, man/login.access.5.xml:
	rewrited FILES section.

	* man/login.access.5.xml: cleanups.

2005-09-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/Attic/passwd.5, man/passwd.5.xml:
	rewrited based on work by Greg Wooledge <greg@wooledge.org>
	http://bugs.debian.org/328113

2005-09-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ro.po: updates (by Sorin Batariuc <sorin@bonbon.net>).

2005-09-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/groups.c, src/grpck.c, src/id.c, src/login.c, src/login_nopam.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/suauth.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c:
	remove empty lines after comment.

	* src/useradd.c: group all #include.

	* po/fr.po:
	updated (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

2005-09-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/gpasswd.c: remove exit(1) after failure().

	* src/usermod.c: consolidate few #ifdef WITH_AUDIT .. #endif sections.

2005-09-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Makefile.am: added missing $(LDADD) in gpasswd_LDADD.

	* NEWS, libmisc/limits.c:
	fixed setup max address space limits (added missing break statement in case)
	spoted by Lasse Collin <lasse.collin@tukaani.org>
	(fix for non-PAM case)

	* configure.in: try find and use by default feactures:
	with_audit="yes"
	with_libcrack="no"
	with_libpam="yes"
	with_libskey="no"
	with_selinux="yes"
	Report on finish also S/Key and CrackLib support.

	* configure.in: cleanups.

	* src/Makefile.am: sort *_LDADD.

	* src/Makefile.am: added missing gpasswd_LDADD = $(LIBAUDIT).

	* src/groupadd.c, src/groupdel.c, src/groupmod.c, src/useradd.c, src/userdel.c, src/usermod.c, lib/defines.h, lib/prototypes.h, src/chage.c, src/gpasswd.c:
	indent code.

	* libmisc/Makefile.am: sort libmisc_a_SOURCES elements.

	* libmisc/audit_help.c: added shadow copyright text and indent file.

	* libmisc/audit_help.c:
	patr of auditing support not added on commiting audit changes.

	* src/Makefile.am: s/AUDIT/LIBAUDIT/

	* configure.in: added reporting on finish is auditing is enabled.
	Change to use shared libaudit. Aded missing AC_SUBST(LIBAUDIT).
	Break some to log lines.

	* src/Makefile.am, src/chage.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/useradd.c, src/userdel.c, src/usermod.c, NEWS, configure.in, lib/defines.h, lib/prototypes.h, libmisc/Makefile.am:
	auditing support added. Patch prepared by Peter Vrabec
	<pvrabec@redhat.com> basing on work by Steve Grubb from
	http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=159215 Now auditing
	support have commands: chage, gpasswd, groupadd, groupdel, groupmod,
	useradd, userdel, usermod.

	* po/pt.po: finish update (by Christian Perrier <bubulle@debian.org>).

2005-09-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pt.po, NEWS: updated (by Miguel Figueiredo <elmig@debianpt.org>).

2005-09-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/passwd.c:
	fix warning (initialization makes pointer from integer without a cast) in
	long_options[] entry.

	* po/fr.po, NEWS:
	partialy updated (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

2005-09-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chage.c: indent source sode.

	* src/chage.c, src/chfn.c, src/chsh.c, src/passwd.c, NEWS:
	change to use new selinux API for selinux_check_passwd_access()
	(patch from Fedora by Dan Walsh <dwalsh@redhat.com>).

2005-09-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/newgrp.1, man/newgrp.1.xml: finished rewrite.

	* etc/login.defs: moved from login.defs.linux.

	* src/login_nopam.c: use #ident.

	* etc/Attic/login.defs.hurd, etc/Attic/login.defs.linux, etc/Makefile.am:
	remove login.defs.hurd and login.defs.linux.

	* src/groupadd.c, src/useradd.c:
	as same as in man pages to useradd and groupadd change to 1000 default
	GID_MIN and UID_MIN (if not found in login.defs).

	* etc/login.defs: s/chkpasswd/chpasswd/

2005-08-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am, man/chsh.1.xml, man/limits.5.xml, man/login.access.5.xml, man/newgrp.1.xml, man/newusers.8.xml:
	fixed id= in <refentry>.

	* man/Attic/gpasswd.1, man/gpasswd.1.xml:
	fixed refentry id (must be 'gpasswd.1').

	* man/Makefile.am, man/newgrp.1.xml:
	raw version converted from roff using doclifter.

	* lib/exitcodes.h: new exit codes:
	#define E_PASSWD_NOTFOUND       14      /* not found password file */
	#define E_GROUP_NOTFOUND        16      /* not found group file */
	#define E_GSHADOW_NOTFOUND      17      /* not found shadow group file */

	* man/Attic/chage.1, man/chage.1.xml, lib/exitcodes.h:
	change to 15 (from 14) exit code in chage when shadow not found.

	* src/Attic/chsh_chkshell.c, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/groups.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/id.c, src/lastlog.c, src/login.c, src/login_nopam.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c, libmisc/pwd_init.c, libmisc/pwdcheck.c, libmisc/rlogin.c, libmisc/salt.c, libmisc/setugid.c, libmisc/setupenv.c, libmisc/shell.c, libmisc/strtoday.c, libmisc/sub.c, libmisc/sulog.c, libmisc/ttytype.c, libmisc/tz.c, libmisc/ulimit.c, libmisc/utmp.c, libmisc/valid.c, libmisc/xmalloc.c, libmisc/addgrps.c, libmisc/age.c, libmisc/basename.c, libmisc/chkname.c, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/console.c, libmisc/copydir.c, libmisc/entry.c, libmisc/env.c, libmisc/failure.c, libmisc/fields.c, libmisc/hushed.c, libmisc/isexpired.c, libmisc/limits.c, libmisc/list.c, libmisc/log.c, libmisc/loginprompt.c, libmisc/mail.c, libmisc/motd.c, libmisc/myname.c, libmisc/obscure.c, libmisc/pam_pass.c, libmisc/pwd2spwd.c, NEWS, lib/Attic/getpass.c, lib/Attic/rcsid.h, lib/Makefile.am, lib/commonio.c, lib/encrypt.c, lib/fputsx.c, lib/getdef.c, lib/groupio.c, lib/gshadow.c, lib/lockpw.c, lib/port.c, lib/pwauth.c, lib/pwio.c, lib/sgetgrent.c, lib/sgetpwent.c, lib/sgetspent.c, lib/sgroupio.c, lib/shadow.c, lib/shadowio.c:
	use #ident preprocesor directive istead RCID macro with content similar
	to example described in ident(1) man page (modern compilers like latest GCC
	removes not used functions by global optimization).
	So "ident /usr/bin/passwd" will show again some useable informations.

	* man/Makefile.am: added support for regenerate roff files from XML.
	Added depeing shadow-man-pages.pot on $(man_XMANS).

2005-08-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/login.1, man/login.1.xml, NEWS:
	added securetty(5) to SEE ALSO section (fixed Debian bug http://bugs.debian.org/325773).

	* po/pl.po: more updates.

	* configure.in:
	typo in handle --with-selinux. Fixes in xsltproc detection.

	* autogen.sh:
	added --enable-man and --enable-maintainer-mode to configure options.

	* man/Attic/chage.1, man/chage.1.xml, NEWS:
	added EXIT VALUES section (by Nicolas François <nicolas.francois@centraliens.net>).

	* man/Attic/passwd.1, man/passwd.1.xml:
	remove "Password expiry information" section (all options are described now
	in OPTIONS section). Describe -a and -k options.

	* NEWS, src/su.c:
	fixed twice copy environment which causes auth problems (bug was introduced in 4.0.12;
	fix by Nicolas François <nicolas.francois@centraliens.net>).

	* src/passwd.c, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po:
	s/Incorrect password for `%s'/Incorrect password for %s/ (one phrase for translate less).

	* src/login.c, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po:
	s/login: failure forking: %s/%s: failure forking: %s/ (one phrase for translate less).

	* po/pl.po: partialy updated.

2005-08-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/exitcodes.h, src/chage.c:
	s/E_NOT_SHADOWED/E_SHADOW_NOTFOUND/ and change value of this exit code to 14.

	* NEWS, lib/exitcodes.h, src/chage.c:
	differentiate the different failure causes by the exit value
	This will permit to adduser Debian script to detect if chage failed because the
	system doesn't have shadowed passwords (fix for http://bugs.debian.org/317012)
	Plain merge 443_chage_exit_values Debian patch.

	* man/Attic/pw_auth.3.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml, man/chage.1.xml, man/chfn.1.xml:
	use tabs in indentation (~10KB less in all xml files).

	* po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po:
	run "make update-po" and remove obsoleted strings.

	* src/expiry.c, src/login.c: remove #if 0 .. #endif code.

	* src/login.c: remove #if 1 .. #endif.

	* libmisc/obscure.c, libmisc/utmp.c, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, src/chage.c, src/login.c, src/logoutd.c, src/newgrp.c, src/su.c, src/useradd.c, NEWS:
	merge 010_more-i18ned-messages Debian patch which adds i18n support for few more messages
	(orginaly patch was prepared by Guillem Jover <guillem@debian.org>).

	* man/id/chsh.1:
	fix .SH (fix merged from 207_id-manpages debian patch).

2005-08-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* acinclude.m4: add aclocal macros (based on acinclude.m4 from glib):
	JH_PATH_XML_CATALOG: checks the location of the XML Catalog,
	JH_CHECK_XML_CATALOG: checks if a particular URI appears in the XML catalog.

	* man/Attic/useradd.8, man/useradd.8.xml:
	cleanups in "Changing the default values" section.

	* man/useradd.8.xml:
	replace <emphasis remap='I'></emphasis> by <replaceable></replaceable>.
	Other minor cleanups.

	* configure.in:
	fixed missing )] in AC_ARG_WITH(skey, ..) (thank for fix to Yuri Kozlov <kozlov.y@gmail.com>).

	* man/Attic/chsh.1, man/Attic/faillog.5, man/Attic/gshadow.5, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pw_auth.3.xml, man/Attic/shadow.3, man/Attic/suauth.5, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/chsh.1.xml, man/faillog.8.xml, man/groupadd.8.xml, man/gshadow.5.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/porttime.5.xml, man/shadow.3.xml, man/suauth.5.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml:
	typos, and change some arguments so they do not match the name of a
	command (fixes by Nicolas François <nicolas.francois@centraliens.net>).

	* NEWS, libmisc/chkname.c, man/Attic/groupadd.8, man/Attic/useradd.8, man/groupadd.8.xml, man/useradd.8.xml:
	fix regular expression describing alloved login/group names (pointed
	by Nicolas François <nicolas.francois@centraliens.net>)
	(correct is [a-z_][a-z0-9_-]*[$]).

	* man/Attic/useradd.8, man/useradd.8.xml:
	remove "Creating New Users" section and merge this directly in DESCRIPTION.
	Add <option></option> for -o in EXIT VALUES section.

	* po/ru.po, NEWS:
	update ru translations (by Yuri Kozlov <kozlov.y@gmail.com>).

2005-08-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/passwd.1, man/passwd.1.xml:
	removed "Account maintenance" section.

	* man/Attic/passwd.1, man/passwd.1.xml: partialy done rewrite.

	* po/ro.po:
	some fixes after review of the translation (by Sorin Batariuc <sorin@bonbon.net>).

	* man/Attic/lastlog.8, man/lastlog.8.xml:
	s/Print help message and exit./Display help message and exit./

	* man/Attic/chage.1, man/chage.1.xml: document -h,--help option.

	* man/Attic/groupadd.8, man/groupadd.8.xml:
	document -h,--help option. added <option></option> for -o in EXIT VALUES.
	Cleanups in SYNOPSIS section.

	* man/Attic/chage.1, man/Attic/faillog.8, man/chage.1.xml, man/faillog.8.xml:
	replace <emphasis remap='I'></emphasis> by <replaceable></replaceable>.

	* man/Attic/lastlog.8, man/lastlog.8.xml:
	document new -b,--before option.

	* po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/it.po, po/ja.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/el.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, src/lastlog.c:
	s/lastlog results/lastlog records/ in lastlog usage output.

	* man/Attic/lastlog.8, man/lastlog.8.xml:
	add "" aroud <command></command>.

	* po/vi.po, po/zh_CN.po, po/zh_TW.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, src/lastlog.c:
	alphabetic order options in lastlog usage output. Run "make -C po update-po".

	* src/lastlog.c, NEWS:
	added handle -b option which allow print only lastlog records older than
	specified DAYS (fix by <miles@lubin.us>).

	* libmisc/salt.c, NEWS:
	fixed for use login.defs::MD5_CRYPT_ENAB only if PAM support
	is disabled (fix by John Gatewood Ham <zappaman@buraphalinux.org>).

2005-08-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	use AC_HELP_STRING() in AC_ARG_ENABLE() and AC_ARG_WITH().
	Exit with error message if configure was runed --with-selinux
	and libselinux not found.

2005-08-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/chkname.c, NEWS, man/Attic/groupadd.8, man/Attic/useradd.8, man/groupadd.8.xml, man/useradd.8.xml:
	documents in CAVEATS section the limitations shadow places on user and
	group names (fix by Mike Frysinger <vapier@gentoo.org>).

	* src/passwd.c, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po:
	added missing -i, --inactive in usage() output.

2005-08-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, src/passwd.c, NEWS:
	passwd rewrited for use getopt_long().

	* man/Attic/chage.1, man/chage.1.xml: /warndays/--warndays/

	* man/Attic/pw_auth.3.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml, man/chage.1.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml:
	remove trailing spaces.

	* src/lastlog.c, src/login.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/suauth.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c, src/Attic/chsh_chkshell.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmems.c, src/groupmod.c, src/groups.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/id.c:
	reorder #includes, indentations and minor cleanups.

	* src/newgrp.c: indent code.

	* NEWS, src/newgrp.c:
	when newgrp process sits between parent and child shells, it should
	propagate STOPs from child to parent and CONTs from parent to child,
	otherwise e.g. bash's "suspend" command won't work.
	Fixed Debian http://bugs.debian.org/314727

2005-08-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: typo.

	* configure.in:
	add display short summary information on finish autoconf script.

	* NEWS, configure.in: start work on 4.0.13.

2005-08-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ru.po: updated for 4.0.12 (by Yuri Kozlov <yuray@id.ru>).

	* NEWS, po/sk.po:
	updated for 4.0.12 (by Peter Mann <Peter.Mann@tuke.sk>).

2005-08-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/nl.po, NEWS:
	updated for 4.0.12 (by cobaco (aka Bart Cornelis) <cobaco@linux.be>).

2005-08-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/fi.po:
	updated for 4.0.12 (by Tommi Vainikainen <thv+debian@iki.fi>).

	* NEWS, po/de.po:
	updated for 4.0.12 (by Frank Schmid <frank@cs-schmid.de>).

	* po/pt.po, NEWS:
	updated for 4.0.12 (by Miguel Figueiredo <elmig@debianpt.org>).

2005-08-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/cs.po:
	updated for 4.0.12 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* src/chpasswd.c, src/groupdel.c, src/newusers.c, src/useradd.c, src/userdel.c, src/usermod.c:
	remove duplicated #include <pwd.h>.

	* po/pl.po: finished update for 4.0.12.

	* src/useradd.c, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po:
	s/Not copying any file into it./Not copying any file from skel directory into it./

	* src/useradd.c, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po:
	break warning message longer than 80 characters.

	* po/pl.po: updated.

	* src/groupadd.c, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po:
	fixed missing \n in usage() output.

	* lib/getdef.c, src/login.c, src/newgrp.c, NEWS:
	remove using login.defs::CLOSE_SESSIONS variable and allways close PAM session.

2005-08-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in:
	realy enable shadow group support by default (pointed by
	Greg Schafer <gschafer@zip.com.au> and Peter Vrabec <pvrabec@redhat.com>).
	Indentations in --help output.

	* man/Attic/chage.1, man/chage.1.xml:
	s/occurrence/occurence/ (334_chage.1-typo Debian patch).

	* man/Attic/chfn.1, man/chfn.1.xml:
	s/may only change may only change/may only change/ (based on 336_chfn.1 Debian patch).

	* man/it/Makefile.am: cleanups (443_man_it_Makefile.am Debian patch).

	* man/Attic/userdel.8, man/userdel.8.xml: s/an NIS client/a NIS client/

	* man/Attic/useradd.8, man/useradd.8.xml: s/an NIS group/a NIS group/

	* man/Attic/lastlog.8, man/lastlog.8.xml:
	s/you have an high UID/you have a high UID/

	* man/Attic/lastlog.8, man/lastlog.8.xml:
	added missing <para></para> in AUTHORS section (cached by Nicolas).

	* po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po:
	run "make update-po".

	* po/POTFILES.in: added missing libmisc/pwdcheck.c. Sorted.

2005-08-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: s/22-07-2005/22-08-2005/

	* NEWS: schedule release 4.0.12 in 22-07-2005.

	* libmisc/setupenv.c, man/pl/login.defs.5, NEWS, etc/Attic/login.defs.hurd, etc/Attic/login.defs.linux, lib/getdef.c:
	removed handle login.defs::QMAIL_DIR variable.

	* libmisc/chowntty.c, NEWS:
	allow regular user to login on read-only root file system (not only for root).
	Patch by Nicolas François <nicolas.francois@centraliens.net>
	Fix for http://bugs.debian.org/52069

	* NEWS, man/Attic/usermod.8, man/usermod.8.xml:
	give the correct range for system users: 0-999 instead of 0-99
	(http://bugs.debian.org/286258)

	* man/Attic/chage.1, man/chage.1.xml: s/an password/a password/

	* man/Attic/chage.1, man/chage.1.xml, src/chage.c, NEWS:
	another maxdays fix based on 427_chage_expiry_0 Debian patch
	(fix for http://bugs.debian.org/78961).
	Better description -1 value passed in -E, -I and -M options.

	* src/gpasswd.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, NEWS:
	added flushing group nscd cache on exit.

	* src/pwck.c, src/pwconv.c, NEWS:
	added flushing passwd nscd cache on exit.

	* NEWS, src/usermod.c:
	fixed handle -p option (patch by Peter Vrabec <pvrabec@redhat.com>).
	Indented.

	* man/Attic/chage.1, man/chage.1.xml, NEWS, src/chage.c:
	use -1 as value for disable password inactivity.
	Patch by Peter Vrabec <pvrabec@redhat.com> which fixes:
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=109499
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=137498

2005-08-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po:
	do not copy files from skel directory if home directory exist and write
	warning message about not copying skel files.
	Patch by Peter Vrabec <pvrabec@redhat.com> which fixes:
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=143150
	https://bugzilla.redhat.com/beta/show_bug.cgi?id=158574
	https://bugzilla.redhat.com/beta/show_bug.cgi?id=80242

	* po/pl.po: updated.

2005-08-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c:
	s/spoll/spool/ (spoted by Nicolas François <nicolas.francois@centraliens.net>).

2005-08-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/su.c:
	ignore SIGINT while authenticating. A ^C could defeat the waiting
	period and permit brute-force attacks (fixed http://bugs.debian.org/288827).

2005-08-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/defines.h, NEWS, configure.in:
	added require ngettext (added [need-ngettext] to AM_GNU_GETTEXT() parameters)
	and stub prototype for ngettext() in lib/prototypes.h (neccessary if shadow
	compiled with disabled NLS support)
	Based on fixes by Martin Schlemmer <azarah@nosferatu.za.org>.

	* src/faillog.c: start using exitcodes.h.

	* NEWS, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/gshadow.5, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8, man/logoutd.8.xml, man/shadow.3.xml, man/sulogin.8.xml:
	regenerate all roff man pages using DocBook XSL Stylesheets 1.69.0.

	* src/chage.c, src/chpasswd.c, src/newusers.c, src/passwd.c, src/pwunconv.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c, NEWS:
	remove flushing shadow nscd cache (nscd do not caches shadow map).

2005-08-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/groupadd.c, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, NEWS:
	rewrited groupadd for use getopt_long().

	* src/chage.c: indent.

	* NEWS, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/userdel.c:
	do OPENLOG() before pam_start().

	* NEWS, src/groupadd.c: fixed double OPENLOG().

	* src/passwd.c, src/vipw.c, src/userdel.c: reorder nscd_flush_cache().

	* src/chfn.c, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po:
	cleanups in printf() translated messages for make translators work easier.

	* NEWS, src/chage.c: added flushing NSS shadow map on exit.

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, src/useradd.c:
	s/the the/the/

	* po/POTFILES.in: removed lib/{grpack,gspack,pwpack,sppack}.c.

	* NEWS, src/newusers.c:
	added flushing NSS passwd, shadow and group maps.

	* NEWS, src/chpasswd.c, src/useradd.c:
	added flushing NSS shadow map on exit.

	* lib/prototypes.h: removed outdated prototypes for lib/gsdbm.c.

	* NEWS, lib/Attic/grpack.c, lib/Attic/gspack.c, lib/Attic/pwpack.c, lib/Attic/sppack.c, lib/Makefile.am, lib/prototypes.h:
	remove lib/{grpack,gspack,pwpack,sppack}.c and prototypes from lib/prototypes.h (outdated).

	* lib/prototypes.h: removed outdated prototypes from lib/pwdbm.c.

2005-07-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/usermod.c: added flushing NSS shadow map.

2005-07-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chage.1, man/chage.1.xml:
	typo (s/passwordchanges/password changes/).

2005-07-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/getdef.c, src/su.c:
	ENV_SUPATH and ENV_PATH must be used independently to PAM.

	* lib/exitcodes.h: added E_BAD_ARG.

	* src/gpasswd.c: start use exitcodes.h.

	* lib/getdef.c: remove ENV_ROOTPATH def_table[] (not used).

2005-07-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chsh.c: start use exitcodes.h.

2005-07-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/Makevars, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po:
	added --no-location to po/Makevars::XGETTEXT_OPTIONS: shorter .po files.

	* NEWS, src/grpck.c, src/pwck.c:
	pwck: now pwck OPENLOG with correct name ("pwck" instead "pwsk"),
	pwck, grpck: replace all puts() with printf() - it fixes problems with extra blank
	lines printed in some messages
	(fixes by Alexander Gattin <arg@online.com.ua>)

2005-07-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/Makevars: added:
	MSGID_BUGS_ADDRESS = kloczek@pld.org.pl

2005-07-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chfn.c: start use #include "exitcodes.h",

	* lib/exitcodes.h: cleanups.

	* lib/Makefile.am, lib/exitcodes.h, src/chage.c:
	start separate all E_* exit codes to lib/exitcodes.h.

	* src/passwd.c, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po:
	use separated message "Password set to expire." instead "Password changed."
	on "passwd -e" (fix by Christian Perrier <bubulle@debian.org>).

	* NEWS, po/fr.po:
	updated (by Jean-Luc Coulon (f5ibh) <jean-luc.coulon@wanadoo.fr>).

	* NEWS, configure.in: start work on 4.0.12.

2005-07-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS, configure.in, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po:
	4.0.11.1 will be released tmorrow (21-07-2005).

	* configure.in, NEWS:
	fixed configure.in: now is possible build shadow with enabled/disabled shadow group
	support (thanks for report symptoms of the bug to Greg Schafer <gschafer@zip.com.au>).

	* po/sv.po, NEWS: update finished (by Per Olofsson <pelle@dsv.su.se>)

	* po/sv.po: partialy updated (by Per Olofsson <pelle@dsv.su.se>).

2005-07-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: start work on 4.0.12.

2005-07-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/sub.c:
	fixed compilation warning about incompatible implicit declaration of built-in
	function printf: added "#include <stdio.h>".

	* src/groupadd.c:
	move #ifdef USE_PAM .. #endif #includes outside #ifdef SHADOWGRP .. #endif.

	* libmisc/pwdcheck.c:
	added missing "#include <stdio.h>" (fix compilation with PAM disabled).

	* po/ro.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/pl.po, po/pt_BR.po, po/nl.po, po/nn.po, po/nb.po, po/ko.po, po/ja.po, po/it.po, po/he.po, po/id.po, po/fr.po, po/bs.po, po/ca.po, po/da.po, po/el.po, po/es.po, po/eu.po, po/fi.po:
	run "make update-po".

	* src/su.c:
	move declaration of pamh nad caught variables to #ifdef USE_PAM .. #endif.

	* po/pl.po, NEWS: updated pl translation.

2005-07-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/sk.po:
	updated for 4.0.11 (by Peter Mann <Peter.Mann@tuke.sk>).

2005-07-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/cs.po:
	updated for 4.0.11 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

2005-07-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/de.po, NEWS:
	updated for 4.0.11 (by Frank Schmid <frank@cs-schmid.de>).

2005-07-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/pt.po:
	updated for 4.0.11 (by Miguel Figueiredo <elmig@debianpt.org>).

2005-07-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/stats: reorder gsub().

	* po/ru.po: cleanups.

	* po/ru.po, NEWS:
	updated for 4.0.11 (by Yuri Kozlov <yucoz@yandex.ru>).

2005-07-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/getdef.c:
	move MAIL_DIR variable from def_table[] to part independent to USE_PAM
	(still used in userdel/usermod).

	* NEWS, man/Attic/pwck.8, man/pwck.8.xml:
	document -q option (based on Debian patch for fix http://bugs.debian.org/309408)
	Rewrited OPTIONS section and better SYNOPSIS.

	* NEWS, po/da.po:
	- updated for 4.0.11 (by Claus Hindsgaul <claus_h@image.dk>).

	* NEWS, src/su.c:
	ignore SIGINT while authenticating. A ^C could defeat the waiting period and
	permit brute-force attacks. Also ignore SIGQUIT.
	Fixed: http://bugs.debian.org/52372 and http://bugs.debian.org/288827

	* po/fi.po, NEWS:
	- updated for 4.0.11 (by Tommi Vainikainen <thv+debian@iki.fi>).

	* po/ro.po: - updated Project-Id-Version field.

	* NEWS, po/ro.po:
	- updated for 4.0.11 (by Sorin B. <sorin@bonbon.net>).

2005-07-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/Attic/lastlog.8, man/lastlog.8.xml:
	document that lastlog is a sparse file, and don't need to be rotated.
	http://bugs.debian.org/219321

	* src/chage.c: use E_USAGE=2 as usage() exit code.

	* NEWS, po/es.po:
	updated for 4.0.11 (by Ruben Porras <nahoo82@telefonica.net>).

	* src/useradd.c: cleanups in usage() oyput.

	* po/zh_TW.po, po/vi.po, po/zh_CN.po, po/uk.po, po/tl.po, po/tr.po, po/sv.po, po/sq.po, po/sk.po, po/ro.po, po/ru.po, po/pt.po, po/pt_BR.po, po/pl.po, po/nb.po, po/nl.po, po/nn.po, po/ko.po, po/it.po, po/ja.po, po/he.po, po/id.po, po/fr.po, po/eu.po, po/fi.po, po/es.po, po/da.po, po/de.po, po/el.po, po/bs.po, po/ca.po, po/cs.po:
	cleanups in usage() output.

	* NEWS: release 4.0.11 is sheduled to 18-06-2005.

2005-07-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/login.1, man/login.1.xml, NEWS:
	better explain the respective roles of login, init and getty with regards
	to the utmp file (based on 441_manpages-shadow.5 Debian patch)

	* man/Attic/su.1, man/groupdel.8.xml, man/su.1.xml, man/Attic/groupdel.8:
	s/presense/presence/; s/filesystem/file system/
	(sed on 440_manpages-login.1 Debian patch)

	* man/pl/Attic/shadowconfig.8, man/pl/Makefile.am, man/ja/Attic/shadowconfig.8, man/ja/Makefile.am, man/it/Attic/shadowconfig.8, man/Attic/shadowconfig.8, man/Attic/shadowconfig.8.xml, man/Makefile.am, NEWS:
	removed shadowconfig(8) man page (will be maintained in Debian shadow pkg repository).

	* man/it/sg.1: added.

	* man/it/Makefile.am: more files in man_MANS.

	* man/it/Makefile.am: move pwunconv.8 to man_MANS.

	* man/useradd.8.xml, man/Attic/useradd.8:
	updated after rewrite for for getopt_long() in useradd (-D and -k options
	idescription must be finished).

	* src/useradd.c, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, NEWS:
	rewrited for use getopt_long().

	* po/stats: more gsub().

2005-07-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/newgrp.c:
	indent source code and use fix for handle splitted groups unconditionaly.

	* lib/nscd.c: indent.

	* NEWS, src/newgrp.c:
	add fix for handle splitted NIS groups: extends the functionality that,
	if the requested group is given, all groups of the same GID are tested for
	membership of the requesting user.
	(fix by Christian Mudra <C.Mudra@science-computing.de>

	* lib/nscd.c, NEWS:
	for some reason doing the INVALIDATE call with two write()'s fails.
	Do one writev() call instead. http://bugs.gentoo.org/show_bug.cgi?id=80413
	(submited by Martin Schlemmer <azarah@gentoo.org>)

	* NEWS, lib/nscd.c:
	merge nscd-socket-path patch from Fedora: newer glibc's have a different nscd socket
	location (/var/run/nscd/socket instead /var/run/.nscd_socket).

2005-07-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/stats: improved.

	* man/Attic/groupadd.8, man/groupadd.8.xml, NEWS:
	document -o option in groupadd(8).

	* configure.in: s/'"$<foo>" != "no"'/'"$<foo>" = "yes"'/

	* NEWS, configure.in, lib/Makefile.am, lib/pwauth.c:
	S/Key support is back.

	* po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po:
	run "make update-po".

	* po/pl.po: updated.

	* src/useradd.c: s,key=value,KEY=VALUE,

	* src/groupadd.c, NEWS, man/Attic/groupadd.8, man/groupadd.8.xml:
	change -O option to -K and document it in man page.

	* man/Attic/useradd.8, man/useradd.8.xml, src/useradd.c:
	s/NAME=VALUE/KEY=VALUE/; s/key=value/KEY=VALUE/

	* src/chfn.c, src/groupadd.c, src/groupmems.c, src/login.c, src/passwd.c, src/vipw.c:
	sort cases in switch (flag) {}.

	* src/gpasswd.c, src/groupadd.c, src/groupmems.c, src/groupmod.c, src/passwd.c, src/useradd.c, src/usermod.c:
	sort getopt() optstring.

	* src/useradd.c:
	remove A: from getopt() optstring (the same bug as in usermod).

	* src/usermod.c:
	remove A: from getopt() optstring (it was for handle AUTH_METHODS code but now
	it is not used option). Catched by Thorsten Kukuk <kukuk@suse.de>.

	* src/usermod.c, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po:
	indent source code. Added usermod error message about -a option usage to translated messages.

	* po/POTFILES.in: mistake s,chage_chkshell.c,chsh_chkshell.c,

	* po/POTFILES.in: s,libmisc/chkshell.c,src/chage_chkshell.c,

	* man/Attic/usermod.8, man/usermod.8.xml, src/usermod.c, NEWS:
	added -a option. This flag can only be used in conjunction with the -G
	option. It cause usermod to append user to the current supplementary group list.
	(patch by Peter Vrabec <pvrabec@redhat.com>)

	* libmisc/Attic/chkshell.c, libmisc/Makefile.am, src/Attic/chsh_chkshell.c, src/Makefile.am:
	move libmisc/chkshell.c to src/chsh_chkshell.c. check_shell() is used only by chsh.

2005-07-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* Attic/acconfig.h, NEWS, configure.in:
	finish move all autoheader templates from acconfig.h to configure.in.

	* src/chage.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS:
	added missing \n in chage error messages.

	* po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/bs.po:
	run "make update-po".

	* src/usermod.c: move all #include in one place.

	* src/useradd.c: s/-O/-K/

	* man/Attic/useradd.8, man/useradd.8.xml:
	cleanups in Note: in -K description.

	* NEWS, man/Attic/useradd.8, man/useradd.8.xml, src/useradd.c:
	change -O option to -K and document it in man page.

	* man/Attic/useradd.8, man/useradd.8.xml:
	added separated <cmdsynopsis></cmdsynopsis> for -D description and remove using </srb> tags from
	<refsynopsisdiv id='synopsis'>.

	* src/login.c:
	replace #ifdef USE_PAM .. #endif #ifndef USE_PAN .. #endif by
	#ifdef USE_PAM .. #else .. #endif.

	* src/su.c: conditiona code reorganization.

	* src/login.c: remove one #ifndef USE_PAM .. #endif.

	* libmisc/setupenv.c: move setup $MAIL to !USE_PAM.

	* libmisc/setupenv.c, src/su.c:
	consolidate two sections of code #ifndef USE_PAM to one.

	* src/su.c, src/sulogin.c, libmisc/setupenv.c, libmisc/tz.c, src/login.c, NEWS:
	fixed erroneous warning messages about some login.defs variables when used with PAM
	(fix by DJ Lucas <dj@linuxfromscratch.org>)

2005-07-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in, libmisc/getdate.y, libmisc/utmp.c, src/logoutd.c:
	remove non-USG code.

	* Attic/acconfig.h, configure.in:
	start moving all autoheader templates from acconfig.h to configure.in.

	* configure.in: remove not used AC_DEFINE(HAVE_LIBCRYPT).

	* Attic/acconfig.h, NEWS, configure.in:
	stop with error message if crypt() not found. Remove --with{,out}-libcrypt switch.

	* src/login.c: fixed use SYSLOG macro.

2005-07-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/login_nopam.c: fixed use SYSLOG macro.

2005-07-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/login.c:
	setup limits and umask (using login.defs ULIMITS and UMASK variables) only when
	PAM support is disabled (it is task for pam_limits and pam_umask modules).

2005-06-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/sulogin.c, src/login.c, src/login_nopam.c, NEWS:
	use SYSLOG macro instead syslog() which saves the locale, sets the locale to C,
	sends the message and restores the locale (fix by Nicolas François <nicolas.francois@centraliens.net>).

	* NEWS, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/userdel.8, man/Attic/usermod.8, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmod.8.xml, man/userdel.8.xml, man/usermod.8.xml:
	in SEE ALLSO section added refer to gpasswd(8)
	(suggested by Mike Frysinger <vapier@gentoo.org>)

	* NEWS, configure.in: start work on 4.0.11.

2005-06-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: +1 day release 4.0.10 date.

	* po/pl.po: kill fuzzy.

	* po/de.po: partial update by Frank Schmid <frank@cs-schmid.de>.

2005-06-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ca.po: run "make update-po".

	* po/sk.po: updated sk translation by Peter Mann <Peter.Mann@tuke.sk>.

2005-06-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: typo.

2005-06-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: typo.

	* po/pl.po: updated for 4.0.10.

	* po/ru.po, NEWS: updated ru translation by maintainer.

	* NEWS: added past releases dates. Cleanups.

	* man/Attic/shadowconfig.8: merge version generated from XML file.

	* po/ca.po, po/cs.po, po/da.po, po/fi.po, NEWS:
	translations updated by maintainers.

2005-06-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chage.c, po/zh_TW.po, po/vi.po, po/zh_CN.po, po/tl.po, po/tr.po, po/uk.po, po/sk.po, po/sq.po, po/sv.po, po/ro.po, po/ru.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/eu.po, po/fi.po, po/fr.po, po/de.po, po/el.po, po/es.po, po/ca.po, po/cs.po, po/da.po, po/bs.po (usage):
	s/EXPIRE/EXPIRE_DATE/.

	* po/pl.po: start update for 4.0.10.

	* src/usermod.c, src/useradd.c, src/userdel.c, src/id.c, src/newgrp.c, src/su.c, po/zh_TW.po, po/zh_CN.po, po/vi.po, po/uk.po, po/tr.po, po/tl.po, po/sv.po, po/sq.po, po/sk.po, po/ru.po, po/pt_BR.po, po/ro.po, po/pt.po, po/pl.po, po/nn.po, po/nl.po, po/nb.po, po/ko.po, po/ja.po, po/it.po, po/id.po, po/he.po, po/fr.po, po/eu.po, po/fi.po, po/es.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po:
	s/uid/UID/ in all commnets and messages.

	* libmisc/failure.c, libmisc/limits.c, lib/pwio.c:
	s/uid/UID/ in comments.

	* src/usermod.c, src/useradd.c, src/groupadd.c, src/groupmod.c, src/id.c, src/newgrp.c, po/zh_TW.po, po/zh_CN.po, po/vi.po, po/uk.po, po/tr.po, po/tl.po, po/sv.po, po/sq.po, po/sk.po, po/ru.po, po/ro.po, po/pt_BR.po, po/pt.po, po/pl.po, po/nn.po, po/nl.po, po/nb.po, po/ko.po, po/ja.po, po/it.po, po/he.po, po/id.po, po/fr.po, po/fi.po, po/eu.po, po/es.po, po/el.po, po/da.po, po/de.po, po/cs.po, po/bs.po, po/ca.po, libmisc/limits.c, lib/groupio.c:
	s/gid/GID/ in all comments and messages.

	* src/gpasswd.c, src/login.c, src/passwd.c, src/chage.c, src/chfn.c, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po:
	one message in i18n messages less: use in all places "Permission denied" instead
	"permission denied".

	* libmisc/getdate.y:
	remove extern for gmtime(), localtime() and mktime() and instead add #include <time.h>.

	* libmisc/entry.c: removed extern for fgetpwent().

	* NEWS, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/gshadow.5, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/login.defs.5, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/pw_auth.3, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8:
	now most of the man pages now are generated from XML files so in case any submiting
	any chages to this resources please make diff fies to XML files.

	* man/Attic/pw_auth.3.xml: cleanups.

	* man/grpck.8.xml, man/passwd.1.xml:
	correctly code EXIT VALUES section using <variablelist>. Cleanups.

	* man/shadow.3.xml: cleanups.

2005-06-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ja/Attic/mkpasswd.8, man/ja/Makefile.am, man/pl/Attic/mkpasswd.8, man/pl/Makefile.am:
	remove ja and pl mkpasswd.8 man pages.

2005-06-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pwck.8.xml, man/useradd.8.xml, man/userdel.8.xml:
	correctly code EXIT VALUES section.

	* Attic/acconfig.h: removed DES_RPC and OPIE templates.

	* src/Attic/mkpasswd.c, src/Makefile.am, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS, man/Attic/mkpasswd.8, man/Attic/mkpasswd.8.xml, man/Makefile.am, po/POTFILES.in, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po:
	removed mkpasswd.

	* man/Makefile.am: do not install mkpasswd(8) man page.

	* src/Makefile.am: move mkpasswd.c to EXTRA_DIST.

	* man/passwd.5.xml:
	use <itemizedlist mark='bullet'> for describe passwd fields. Remove outdated
	information about additional fields in comment field. Cleanups.

	* man/newusers.8.xml: cleanups.

	* man/gshadow.5.xml:
	use <itemizedlist mark='bullet'> for gshadow fields desscription.

	* man/shadow.5.xml: cleanups.

	* man/shadow.5.xml:
	use <itemizedlist mark='bullet'> for describe shadow fields.

	* man/Attic/pw_auth.3.xml: cleanups.

	* man/Attic/pw_auth.3.xml: use correct <refname>.

	* man/Attic/pw_auth.3.xml: cleanups.

	* man/groupdel.8.xml, man/groupmod.8.xml:
	correctly code EXIT VALUES section.

	* man/groupadd.8.xml: cleanups.

	* man/Attic/mkpasswd.8.xml: added missing <variablelist> tag.

	* man/usermod.8.xml: cleanups.

	* man/usermod.8.xml: remove <sbr/> tags from SYNOPSIS section.

	* man/faillog.8.xml: cleanups.

	* man/faillog.5.xml:
	put struct faillog definition in <programlisting></programlisting>.

	* man/chsh.1.xml, man/chpasswd.8.xml: cleanups.

	* man/groupadd.8.xml:
	seems I found good way for code EXIT VALUES section.

	* man/shadow.3.xml:
	put meanings of each field spwd struct in <itemizedlist mark='bullet'>.

	* man/shadow.3.xml:
	place definition of struct spwd in <programlisting></programlisting>.

	* NEWS, src/userdel.c:
	userdel now deletes user groups from /etc/gshdow as well as /etc/group.
	Fix by Nicolas François <nicolas.francois@centraliens.net>.
	http://bugs.debian.org/99442

	* src/usermod.c, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, NEWS, po/bs.po, po/ca.po, po/cs.po:
	fixed bug in usermod ad run "make -C po update-po".
	When relocating a user's home directory, don't fail and remove the new
	home directory if we can't remove the old home directory for some
	reason; the results can be spectularly poort if, for instance, only
	the rmdir() fails. Patch prepared by Timo Lindfors <lindi-spamtrap@newmail.com>.
	http://bugs.debian.org/166369

2005-06-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/login.c: indent.

	* man/Attic/pw_auth.3.xml, man/Attic/shadowconfig.8.xml, man/chage.1.xml, man/faillog.8.xml, man/groupmems.8.xml, man/gshadow.5.xml, man/login.1.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml:
	cleanups.

2005-06-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/chage.1.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/faillog.5.xml:
	cleanups.

	* man/login.1.xml: rewrited FILES section.

	* man/id.1.xml, man/lastlog.8.xml, man/gshadow.5.xml: cleanups.

	* man/groups.1.xml: typos.

	* man/chfn.1.xml, man/expiry.1.xml, man/gpasswd.1.xml: cleanups.

2005-06-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS:
	last patch for UTMPX was submited by by Nicolas François <nicolas.francois@centraliens.net>

	* libmisc/failure.c, libmisc/failure.h, NEWS:
	use also UTMPX API instead UTMP on failure (login was by affected this when shadow
	was builded without PAM support).

	* NEWS, src/login.c:
	the PAM session needs to be closed as root, thus before change_uid()
	http://bugs.debian.org/53570 http://bugs.debian.org/195048 http://bugs.debian.org/211884

	* man/Attic/passwd.1, man/passwd.1.xml:
	s/compatiblity/compatibility/ (fix by Christian Perrier <bubulle@kheops.frmug.org>).

2005-06-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/Attic/chfn.1, man/chfn.1.xml:
	give more details about the influence of login.defs on what's allowed to
	users (based on Debian patches).

	* NEWS, src/su.c:
	fix syslogs to be less ambiguous. Use old:new format instead of old-new
	because '-' can appear in usernames.
	http://bugs.debian.org/213592

	* NEWS, src/login.c:
	made login's -f option also able to use the username after -- if none
	was passed as it's optarg
	http://bugs.debian.org/53702

	* po/POTFILES.in, NEWS, libmisc/Attic/setup.c, libmisc/Makefile.am:
	not used now (removed).

	* man/Attic/usermod.8, man/usermod.8.xml:
	s/inactive_time/inactive_days/ in -f parameter in SYNOPSIS (fix by Christian
	Perrier <bubulle@debian.org>).

2005-06-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/grpck.8, man/grpck.8.xml:
	typo: s/incorrectable/uncorrectable/ (by A Costa <agcosta@gis.net>).

	* man/Attic/gshadow.5, man/gshadow.5.xml:
	typos: s/folowing/following/; s/encryped/encrypted/; s/supercedes/supersedes/
	(by A Costa <agcosta@gis.net>).

	* man/Attic/shadow.5, man/shadow.5.xml:
	typos: s/encryped/encrypted/; s/supercedes/supersedes/
	(by A Costa <agcosta@gis.net>)

2005-06-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/login.c, NEWS:
	check for hushed login and pass PAM_SILENT if true.
	http://bugs.debian.org/48002

	* src/login.c, NEWS:
	fixed loggin of username on successful login (was using the normal username,
	when it should have used pam_user) http://bugs.debian.org/47819

2005-06-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/zh_TW.po: updated (by Tetralet <tetralet@pchome.com.tw>).

	* NEWS, po/ca.po: updated (by Guillem Jover <guillem@debian.org>).

	* man/de/passwd.1:
	added small comment with marker usefull for translators.

2005-05-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Attic/mkpasswd.c, src/chpasswd.c, src/faillog.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/su.c, src/useradd.c, src/userdel.c, src/usermod.c, lib/encrypt.c, lib/getdef.c, lib/gshadow.c, lib/pwauth.h, lib/shadow.c, libmisc/failure.c, libmisc/isexpired.c, libmisc/salt.c:
	indent all.

	* src/chage.c, src/chpasswd.c, src/expiry.c, src/login.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, lib/Attic/sppack.c, lib/defines.h, lib/lockpw.c, lib/prototypes.h, lib/sgetspent.c, lib/shadow.c, lib/shadowio.c, libmisc/age.c, libmisc/entry.c, libmisc/isexpired.c, libmisc/pwd2spwd.c, libmisc/pwdcheck.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, Attic/acconfig.h, NEWS, configure.in:
	remove using SHADOWPWD #define so now shadow is allways builded with shadow
	password support.

2005-05-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/chage.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/vi.po, po/zh_CN.po, po/zh_TW.po, NEWS, man/Attic/chage.1, man/chage.1.xml:
	rewrite for use getopt_long().

2005-05-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: start working on 4.0.10.

	* man/Makefile.am: remove shadow-man-pages.pot target from all.

2005-05-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/encrypt.c, NEWS:
	fixed passwd segfault in non-PAM connfiguration (submited by Greg Schafer <gschafer@zip.com.au>).

	* po/sv.po: upsdate (by Christian Perrier <bubulle@debian.org>).

	* NEWS, src/newgrp.c:
	fixed NULL pointer dereference - getlogin() and ttyname() can
	return NULL which is not checked (http://bugs.debian.org/162303).

	* man/Attic/su.1, man/pwconv.8.xml, man/su.1.xml, man/Attic/pwconv.8:
	fixed typo (s,similiar,similar,).

2005-05-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/ro.po: updated by Sorin B. <sorin@bonbon.net>.

	* po/ru.po, NEWS: updated by yu-koz <yu-koz@yandex.ru>.

2005-05-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ro.po: few updates by Sorin Batariuc <sorin@bonbon.net>.

2005-05-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ru.po: updated (by Yuri Kozlov <yuray@id.ru>).

2005-05-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/vi.po:
	completed translations for HEAD (by Clytie Siddall <clytie@riverland.net.au>).

2005-05-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/LINGUAS, po/vi.po: added new vi translation.

	* NEWS, lib/getdef.c:
	leaves the table as it is, and changes from the binary search to
	a sequential one (fix by Lucas Correia Villa Real <lucasvr@gobolinux.org>).

	* man/Attic/passwd.1, man/passwd.1.xml:
	make bold passwd and chfn commands.

2005-04-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/usermod.8.xml, man/vipw.8.xml: cleanups.

2005-04-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/shadowconfig.8.xml, man/gpasswd.1.xml, man/groups.1.xml, man/grpck.8.xml, man/login.defs.5.xml, man/passwd.1.xml, man/pwck.8.xml, man/sulogin.8.xml, man/useradd.8.xml:
	replace <emphasis remap='B'></emphasis> by <command></command>.

	* po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, src/lastlog.c:
	fixed lastlog --help message (s,--login,--user,) http://bugs.debian.org/249611

	* man/Attic/mkpasswd.8.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml:
	use <varlistentry></varlistentry> in FILES section. Cleanups.

	* man/expiry.1.xml, man/chsh.1.xml, man/chpasswd.8.xml, man/chfn.1.xml, man/porttime.5.xml, man/Attic/pw_auth.3.xml:
	cleanups.

	* man/Attic/vipw.8, man/vipw.8.xml:
	small fix: s,vi,vi(1), (reported by Helge Kreutzmann <kreutzm@itp.uni-hannover.de> in
	http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=260636).
	s,VISUAL,$VISUAL; s,EDITOR,$EDITOR,

2005-04-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/login.1.xml: fixed bold (use <command></command>). Cleanups.

	* man/Attic/login.1: fixed typo in bold.

	* man/chage.1.xml: fixed italic. Cleanups.

	* man/Attic/chage.1: fixed typo in italic.

	* man/login.defs.5.xml:
	fixed italic (use <filename></filename> istead italic). Cleanups.

	* man/Attic/login.defs.5: fixed typo in italic.

	* man/vipw.8.xml: fixed italic (use <filename></filename>).

	* man/Attic/vipw.8: typo in italic.

	* man/Makefile.am:
	added target for generate shadow-man-pages.pot. List all now useable xml files
	in man_XMANS variable.

	* man/pwconv.8.xml:
	fixed bold. Use in more places <command></command> istead bold.

	* man/Attic/login.defs.5: typo in bold.

	* man/su.1.xml:
	removed comment. Use <variablelist></variablelist> in Files secstion.
	Fixed bold.

	* man/Attic/pwconv.8, man/Attic/su.1: typo in bold.

2005-04-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: start work on 4.0.9.

	* po/nl.po: kill fuzzy.

	* man/Attic/chage.1:
	reverte last commit (by mistake commited experimental version generated from XML file).

	* NEWS, po/nl.po:
	updated for 4.0.8 (by "cobaco (aka Bart Cornelis)" <cobaco@linux.be>).

	* po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po:
	two typos (s,specyfied,specified,; s,maiximum,maximum,).

	* NEWS, po/sk.po:
	updated for 4.0.8 (by Peter Mann <Peter.Mann@tuke.sk>).

	* src/lastlog.c: typo (s,specyfied,specified,)

	* src/faillog.c: typo (s,maiximum,maximum,).

2005-04-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/chage.1.xml, man/chfn.1.xml, man/chsh.1.xml, man/expiry.1.xml, man/gpasswd.1.xml, man/groups.1.xml, man/id.1.xml, man/login.1.xml, man/passwd.1.xml, man/su.1.xml:
	added <refmiscinfo class="sectdesc">User Commands</refmiscinfo> in <refmeta></refmeta>.

	* man/Attic/mkpasswd.8.xml, man/Attic/pw_auth.3.xml, man/Attic/shadowconfig.8.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/vigr.8.xml:
	Use encoding="UTF-8" and DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN".

	* man/userdel.8.xml, man/usermod.8.xml, man/vigr.8.xml, man/vipw.8.xml, man/Attic/mkpasswd.8.xml, man/Attic/pw_auth.3.xml, man/Attic/shadowconfig.8.xml, man/chage.1.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml:
	better formation using "xmlindent -l 80 -d 2".

2005-04-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/it/Attic/shadowconfig.8, man/it/chsh.1, man/it/expiry.1, man/it/faillog.5, man/it/faillog.8, man/it/getspnam.3, man/it/groups.1, man/it/grpck.8, man/it/grpconv.8, man/it/grpunconv.8, man/it/id.1, man/it/lastlog.8, man/it/login.1, man/it/logoutd.8, man/it/newgrp.1, man/it/porttime.5, man/it/pwck.8, man/it/shadow.3, man/it/shadow.5, man/it/su.1, man/it/vipw.8, NEWS, man/it/Makefile.am, man/it/chage.1, man/it/chfn.1, man/it/chpasswd.8:
	updated it man pages: chfn.1, chsh.1, groups.1, grpck.8, grpconv.8, grpunconv.8,
	id.1, lastlog.8, login.1, newgrp.1, pwunconv.8, shadow.5, vigr.8, vipw.8.
	new it man pages: chage.1, chpasswd.8, expiry.1, faillog.5, faillog.8,
	getspnam.3, logoutd.8, porttime.5, pwck.8, shadow.3, shadowconfig.8, su.1.
	(by Danilo Piazzalunga <danilopiazza@libero.it>)

	* po/uk.po:
	cleanups in plural forms (by Roman Festchook <roma@polesye.net>).

	* man/Attic/chage.1, man/Attic/mkpasswd.8.xml, man/Attic/pw_auth.3.xml, man/Attic/shadowconfig.8.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vipw.8.xml:
	reformated using xemacs.

2005-04-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po, NEWS:
	updated for 4.0.8 (by Christian Perrier <bubulle@kheops.frmug.org>).

	* NEWS, po/eu.po: updated for 4.0.8 (by ^pi^ <piarres@gmail.com>).

	* NEWS, po/uk.po:
	updated for 4.0.8 (by Roman Festchook <roma@polesye.net>).

	* po/cs.po:
	updated for 4.0.8 (by Miroslav Kure <kurem@upcase.inf.upol.cz>).

	* po/da.po, NEWS:
	updated for 4.0.8 (by Claus Hindsgaul <claus_h@image.dk>).

	* po/ko.po, NEWS:
	updated for 4.0.8 (by Changwoo Ryu <cwryu@debian.org>).

	* po/fi.po: kill one fuzzy (by Tommi Vainikainen <thv+debian@iki.fi>).

2005-04-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/chpasswd.8.xml: Rewrited by hand & xemacs.

	* man/chfn.1.xml: cleanups in <refentry> tag.

	* man/chfn.1.xml: Rewrited by hand & xemacs.

	* NEWS, po/pt.po:
	updated for 4.0.8 (by Miguel Figueiredo <elmig@debianpt.org>).

	* po/es.po, NEWS: updated (by Ruben Porras <nahoo@inicia.es>).

2005-04-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/useradd.8:
	fixed typos in useadd syntax (in SYNOPSIS section) catched using doclifter.

	* man/Attic/mkpasswd.8.xml, man/Attic/pw_auth.3.xml, man/Attic/shadowconfig.8.xml, man/chfn.1.xml, man/chpasswd.8.xml, man/chsh.1.xml, man/expiry.1.xml, man/faillog.5.xml, man/faillog.8.xml, man/getspnam.3.xml, man/gpasswd.1.xml, man/groupadd.8.xml, man/groupdel.8.xml, man/groupmems.8.xml, man/groupmod.8.xml, man/groups.1.xml, man/grpck.8.xml, man/grpconv.8.xml, man/grpunconv.8.xml, man/gshadow.5.xml, man/id.1.xml, man/lastlog.8.xml, man/limits.5.xml, man/login.1.xml, man/login.access.5.xml, man/login.defs.5.xml, man/logoutd.8.xml, man/newusers.8.xml, man/passwd.1.xml, man/passwd.5.xml, man/porttime.5.xml, man/pwck.8.xml, man/pwconv.8.xml, man/pwunconv.8.xml, man/sg.1.xml, man/shadow.3.xml, man/shadow.5.xml, man/su.1.xml, man/suauth.5.xml, man/sulogin.8.xml, man/useradd.8.xml, man/userdel.8.xml, man/usermod.8.xml, man/vigr.8.xml, man/vipw.8.xml:
	raw version converted using doclifter.

	* configure.in: remove handle --with-lib{opie,skey}.

	* man/de/chsh.1:
	synced with english version (by Simon Brandmair <sbrandmair@gmx.net>).

	* man/Attic/usermod.8: improved -o description.

	* man/de/passwd.1:
	added translation EXIT VALUES section (by Simon Brandmair <sbrandmair@gmx.net>).

	* NEWS, po/it.po:
	updated it translation (by Danilo Piazzalunga <danilopiazza@libero.it>).

2005-04-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po:
	cleanups.

	* po/pl.po: updated.

	* src/usermod.c:
	use the same error message ("%s: PAM authentication failed\n") on fail
	authentication as in other tools.

	* po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po:
	run "make update-po".

	* src/login.c, src/login_nopam.c:
	fixed build with disabled PAM support: move bad_time_notify() and check_nologin()
	back to src/login.c but use this functions #ifndef USE_PAM.

	* NEWS, lib/Makefile.am, lib/pwauth.c:
	remove not working OPIE and SKEY support.

	* configure.in: typo (s,SELinuux,SELinux,).

	* NEWS: typos.

	* NEWS: chage, useradd, usermod: reduce multiple OPENLOG() calls.

	* src/useradd.c, src/usermod.c: fix multiple OPENLOG() calls.

	* src/chage.c: cleanups.

	* src/chage.c: fix multiple OPENLOG() calls.

	* src/chage.c:
	use E_SUCCESS/E_NOPERM #defines instead 0/1 in exit() arguments.

2005-04-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/passwd.c:
	adjust also syslog message on usage -S option without permission.
	Consolidate SELinix and non-SELinux code.

	* po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, NEWS, src/passwd.c:
	fix #61313 Debian bug: "passwd -S root" (as a normal user) should not
	display "You may not change the password for root.

	* NEWS, man/Attic/passwd.1:
	fix #160477 Debian bug: improve -S output description.

	* man/de/passwd.1:
	new translation by Simon Brandmair <sbrandmair@gmx.net> with merged all
	changes between revision 1.2 a 1.5.

2005-04-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/passwd.1, man/pl/passwd.1: bold passwd and chage commands.

	* NEWS, src/vipw.c:
	fixed race condition in vipw (Debian #242407 bug; fix by Alexander Gattin
	<arg@online.com.ua>).

	* man/pl/Attic/chage.1.xml, man/pl/chage.1:
	synced with english version.

	* man/Attic/chage.1, man/chage.1.xml:
	add info about what mean -1 passed n expiredate parameter (based on #304542
	Debian bug; submited by Federico Grau <grauf@rfa.org>).

2005-04-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fi.po, NEWS:
	updated translation (by Tommi Vainikainen <tvainikan@cc.hut.fi>).

	* man/hu/passwd.1, man/it/passwd.1, man/ja/passwd.1, man/pl/passwd.1, man/Attic/passwd.1, man/de/passwd.1, man/es/passwd.1:
	cleanups and unifications in SEE ALSO section.

2005-04-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	Info documentation says about AC_GNU_SOURCE: "should be called before any
	macros that run the C compiler". So move this macro on top configure.in for
	avoid autoconf warnings.

	* configure.in:
	AC_SYS_LARGEFILE() performs checking is fseeko() is avalaible so "fseeko" can
	be removed from AC_CHECK_FUNCS() parameters.

	* NEWS, configure.in: Remove using AC_PROG_GCC_TRADITIONAL macro.
	Add using AC_GNU_SOURCE macro for kill compilation warnings about implicit
	declaration of function `fseeko'.

	* po/cs.po: killed fuzzy (by Miroslav Kure <kurem@debian.cz>).

	* man/ja/newgrp.1, man/pl/newgrp.1, NEWS, man/Attic/newgrp.1, man/hu/newgrp.1:
	newgrp uses /bin/sh (not bash).

	* man/Attic/gpasswd.1, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/id.1, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/pwck.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8:
	describe /etc/group in FILES section as "group account information".

	* man/Attic/grpck.8:
	describe /etc/passwd in FILES section as "user account information".

	* po/stats: small script for generate translations statistics.

	* NEWS, po/cs.po: Updated by Miroslav Kure <kurem@debian.cz>.

	* man/chage.1.xml, man/Attic/chage.1, man/Attic/expiry.1, man/Attic/login.1, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/passwd.1, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/sulogin.8:
	describe /etc/shadow in FILES section as "secure user account information".

	* man/Attic/newgrp.1:
	Reformated paragraph. s,Bourne shell,\fBbash\fR shell,

	* NEWS, man/Attic/newgrp.1:
	fix #251926, #166173, #113191 Debian bugs: explain why editing /etc/group
	(without gshadow) doesn't permit to use newgrp.

	* po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po:
	added/fixed Plural-Forms: header entries. Run "make update-po".

	* po/pl.po:
	added Plural-Forms: header entry and updated for last change in
	libmisc/failure.c.

	* libmisc/failure.c:
	break message text with failure login since last login.

	* libmisc/failure.c:
	Use ngettext instead of string concatenation and static number of cases.
	Patch by Tommi Vainikainen <tvainika@cc.hut.fi>.

2005-04-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/cs.po:
	new translation maintainer: Miroslav Kure <kurem@debian.cz>.

2005-04-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: updated for 4.0.8.

2005-04-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, src/faillog.c:
	changed faillog records display format for allow fit in 80 columns all
	faillog atributies.

	* po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po:
	run "make update-po". Updated pl.po.

	* src/faillog.c (usage): typo (s,IDAYS,DAYS,).

	* man/Attic/faillog.8, NEWS:
	updated after rewrite faillog command for use getopt_long().

	* src/faillog.c:
	Add handle -h,--help option. Show in usage output information about
	-t,--time option. Remove handle -p option.

	* po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po:
	run "make update-po".

	* po/POTFILES.in: updated.

	* man/Attic/gpasswd.1: typo (s,fB,\fB,).

2005-04-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/ja/login.1:
	updated ja man page for Debian #95213 bug (by Kenshi Muto <kmuto@debian.org>).

	* src/chage.c, src/chfn.c, src/chsh.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/grpck.c, src/passwd.c, src/pwck.c, src/useradd.c, src/userdel.c, src/usermod.c, NEWS, lib/Attic/grdbm.c, lib/Attic/gsdbm.c, lib/Attic/pwdbm.c, lib/Attic/spdbm.c, lib/Makefile.am, lib/gshadow.c, lib/shadow.c:
	next round of cleanups: removed NDBM code (unused).

	* src/login.c: consilidate some !USE_PAM lines.

	* src/login.c, src/login_nopam.c:
	move bad_time_notify() and check_nologin() to src/login_nopam.c.

	* lib/prototypes.h: remove not used login_desrpc() prototype.

	* lib/Attic/rad64.c, lib/encrypt.c, lib/prototypes.h, lib/Makefile.am:
	remove lib/rad64 with not used c64i() and i64c() functions.

	* lib/encrypt.c:
	remove "#ifdef SW_CRYPT .. #endif" and "#ifdef DOUBLESIZE .. #endif" unused code.

	* lib/encrypt.c: remove "#ifdef MD5_CRYPT .. #endif" unused code.

	* libmisc/salt.c:
	remove prototypes for *l64a() and add #include <stdlib.h>. Remove unused
	now code (old style random salt generator).

	* src/chage.c: cleanups.

	* src/chpasswd.c:
	remove prototypes for *l64a() and add #include <stdlib.h>.

	* src/login.c: remove login_fbtab() prototype.

	* src/chage.c:
	remove prototypes for a64l() and *l64a() and add #include <stdlib.h>.

2005-04-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ru/passwd.5, man/zh_CN/chfn.1, man/zh_CN/chpasswd.8, man/zh_CN/chsh.1, man/zh_CN/groupadd.8, man/zh_CN/groupdel.8, man/zh_CN/groupmod.8, man/zh_CN/useradd.8, man/zh_CN/userdel.8, man/zh_CN/usermod.8, man/zh_TW/chfn.1, man/zh_TW/chsh.1, man/zh_TW/groupadd.8, man/zh_TW/groupdel.8, man/zh_TW/groupmod.8, man/zh_TW/useradd.8, man/zh_TW/userdel.8, man/zh_TW/usermod.8, man/ko/chfn.1, man/ko/chsh.1, man/ko/groups.1, man/ko/id.1, man/ko/login.1, man/ko/passwd.5, man/ko/su.1, man/pt_BR/gpasswd.1, man/pt_BR/groupadd.8, man/pt_BR/groupdel.8, man/pt_BR/groupmod.8, man/pt_BR/shadow.5, man/ja/Attic/mkpasswd.8, man/ja/Attic/pw_auth.3, man/ja/chage.1, man/ja/chfn.1, man/ja/chpasswd.8, man/ja/chsh.1, man/ja/expiry.1, man/ja/faillog.8, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupmod.8, man/ja/groups.1, man/ja/grpck.8, man/ja/id.1, man/ja/lastlog.8, man/ja/limits.5, man/ja/login.1, man/ja/login.access.5, man/ja/login.defs.5, man/ja/newgrp.1, man/ja/passwd.1, man/ja/porttime.5, man/ja/pwck.8, man/ja/shadow.3, man/ja/su.1, man/ja/suauth.5, man/ja/sulogin.8, man/ja/useradd.8, man/ja/userdel.8, man/ja/usermod.8, man/ja/vipw.8, man/hu/chfn.1, man/hu/chsh.1, man/hu/gpasswd.1, man/hu/groups.1, man/hu/id.1, man/hu/login.1, man/hu/newgrp.1, man/hu/passwd.1, man/hu/su.1, man/id/chsh.1, man/id/login.1, man/id/useradd.8, man/it/chfn.1, man/it/chsh.1, man/it/gpasswd.1, man/it/groupadd.8, man/it/groupdel.8, man/it/groupmod.8, man/it/groups.1, man/it/grpck.8, man/it/id.1, man/it/lastlog.8, man/it/login.1, man/it/passwd.5, man/it/shadow.5, man/it/useradd.8, man/it/userdel.8, man/it/usermod.8, man/it/vipw.8, man/de/chfn.1, man/de/chsh.1, man/de/login.1, man/de/passwd.1, man/de/passwd.5, man/de/su.1, man/de/vipw.8, man/es/login.1, man/es/passwd.1, man/es/su.1, man/fr/chage.1, man/fr/chpasswd.8, man/fr/chsh.1, man/fr/faillog.5, man/fr/gpasswd.1, man/fr/groups.1, man/fr/id.1, man/fr/passwd.1, man/fr/passwd.5, man/fr/shadow.5, man/fr/su.1, man/fr/useradd.8, man/fr/userdel.8, man/fr/usermod.8, man/cs/groups.1, man/cs/id.1, man/cs/lastlog.8, man/cs/passwd.5, man/cs/shadow.5, man/cs/su.1, man/pl/Attic/mkpasswd.8, man/pl/Attic/pw_auth.3, man/pl/Attic/shadowconfig.8, man/pl/chage.1, man/pl/chfn.1, man/pl/chpasswd.8, man/pl/chsh.1, man/pl/expiry.1, man/pl/faillog.5, man/pl/faillog.8, man/pl/gpasswd.1, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmems.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/lastlog.8, man/pl/limits.5, man/pl/login.1, man/pl/login.access.5, man/pl/login.defs.5, man/pl/logoutd.8, man/pl/newgrp.1, man/pl/newusers.8, man/pl/passwd.1, man/pl/passwd.5, man/pl/porttime.5, man/pl/pwck.8, man/pl/pwconv.8, man/pl/shadow.3, man/pl/shadow.5, man/pl/su.1, man/pl/suauth.5, man/pl/sulogin.8, man/pl/useradd.8, man/pl/userdel.8, man/pl/vipw.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/expiry.1, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/grpck.8, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.defs.5, man/Attic/newgrp.1, man/Attic/passwd.1, man/Attic/porttime.5, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/usermod.8, man/Attic/vipw.8:
	more replaces "-" by "\-" (s,\\-,-,g; s,-,\\-,g).

	* man/pl/usermod.8: finish sync with english version.

	* man/hu/login.1, man/pl/login.1, NEWS, man/Attic/login.1, man/de/login.1:
	removed fragment about abilities pass environment variables in login prompt.

	* man/Attic/gpasswd.1, man/Attic/newgrp.1:
	fixes by Nicolas Nicolas François <nicolas.francois@centraliens.net> (not all
	commited).

2005-04-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/gshadow.5, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/limits.5:
	replace all "-" by "\-" (s,\\-,-,; s,-,\\-,).

	* man/cs/groups.1: cleanups.

	* NEWS, src/su.c:
	fixed use of SU_WHEEL_ONLY in su. Now su realy is avalaible for wheel group
	members. Thanks to Mike Frysinger <vapier@gentoo.org> for report:
	http://bugs.gentoo.org/show_bug.cgi?id=80345

	* man/pl/Attic/chage.1.xml:
	converted from roff using doclifter. Rewrited by hand. Probably will be
	removed after prepare infrastructure for translate man pages using gettext
	but temporary I need this for some experiments.

	* src/login.c: remove unused #ifded LOGIN_FBTAB .. #endif code.

	* configure.in, libmisc/Attic/login_access.c, libmisc/Makefile.am, src/Makefile.am, src/login.c, src/login_nopam.c:
	move libmisc/login_access.c to src/login_mopam.c.
	Remove using LOGIN_ACCESS #define. Now LOGIN_ACCESS is equal to !USE_PAM.
	In src/login_nopam.c will be cumulated non-PAM specyfic login code.

	* src/lastlog.c, src/login.c, src/useradd.c, src/usermod.c, libmisc/log.c:
	cleanups: remove using #include "lastlog_.h".

	* src/login.c: fixed build with PAM support disabled.

	* src/login.c: remove "#ifdef HUP_MESG_FILE .. #endif" code.

	* src/login.c: reindent using -l80.

	* man/Attic/chage.1, man/chage.1.xml:
	s/chage/chage command/ in DESCRIPTION.

	* man/chage.1.xml:
	converted from roff using doclifter. Rewrited by hand.

	* man/Attic/chage.1, man/Attic/chfn.1, man/Attic/faillog.8, man/Attic/groupmod.8, man/Attic/pwconv.8, man/Attic/useradd.8, man/Attic/usermod.8:
	cleanups.

	* man/Attic/pwconv.8: fixed typo: s,fI,\fI,

	* po/POTFILES.in: remove libmisc/login_{desrpc,krb}.c.

	* lib/getdef.c, libmisc/Attic/login_desrpc.c, libmisc/Attic/login_krb.c, libmisc/Makefile.am, src/login.c, NEWS, autogen.sh, configure.in:
	drop never finished kerberos and des_rpc support.

	* man/it/chfn.1: cleanups.

2005-04-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in:
	fixed UTMP path detection (by Kelledin <kelledin@users.sf.net>).

	* man/fr/chsh.1: typo.

	* man/de/Makefile.am, man/de/passwd.5:
	imported from Deutscher manpages.

	* man/cs/Makefile.am, man/cs/groups.1, man/cs/lastlog.8, man/cs/su.1:
	new files imported from Czech man-pages.

	* man/pl/faillog.8, man/pl/groupmems.8, man/pl/id.1, man/pt_BR/groupadd.8, man/pt_BR/groupmod.8, man/zh_CN/groupadd.8, man/zh_CN/groupmod.8, man/zh_CN/useradd.8, man/zh_CN/usermod.8, man/zh_TW/groupadd.8, man/zh_TW/groupmod.8, man/zh_TW/useradd.8, man/zh_TW/usermod.8, man/fr/chage.1, man/fr/chpasswd.8, man/fr/passwd.1, man/hu/chsh.1, man/it/groupadd.8, man/it/groupmod.8, man/it/usermod.8, man/ja/chage.1, man/ja/chfn.1, man/ja/chsh.1, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupmod.8, man/ja/login.1, man/ja/passwd.1, man/ja/useradd.8, man/ja/usermod.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chsh.1, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/id.1, man/Attic/login.1, man/Attic/passwd.1, man/Attic/useradd.8, man/de/chfn.1, man/de/chsh.1, man/de/login.1, man/de/passwd.1:
	cleanups: aded missing \fR.

	* man/Attic/gpasswd.1, man/Attic/gshadow.5, man/Makefile.am, NEWS:
	added new file (by Nicolas Nicolas François <nicolas.francois@centraliens.net>).

2005-03-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/chage.1, man/pl/chfn.1, man/pl/chsh.1, man/pl/gpasswd.1:
	added missing \fR.

	* man/pl/groupmod.8: typo: s,\fI,\fR,

	* man/pl/login.1, man/pl/passwd.1: cleanups: aded missing \fR.

	* man/pl/sulogin.8: cleanups.

	* man/pl/useradd.8: cleanups: aded missing \fR.

	* man/pl/usermod.8: partialy synced with english version.

	* man/Attic/usermod.8: typo.

	* NEWS, man/Attic/usermod.8:
	fixed #302388 Debian bug: added separated -o option description.

	* lib/getdef.c:
	FAILLOG_ENAB, LOGIN_STRING moved to code "#ifndef USE_PAM" dependent.

	* lib/pwauth.c, lib/pwauth.h: enable pw_auth() only #ifndef USE_PAM.

	* src/userdel.c, src/usermod.c, src/vipw.c, src/Attic/mkpasswd.c, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmems.c, src/groupmod.c, src/groups.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/suauth.c, src/sulogin.c, src/useradd.c, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, libmisc/Attic/login_access.c, libmisc/Attic/login_krb.c, libmisc/addgrps.c, libmisc/age.c, libmisc/chkname.h, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/copydir.c, libmisc/env.c, libmisc/failure.c, libmisc/failure.h, libmisc/getdate.h, libmisc/hushed.c, libmisc/isexpired.c, libmisc/limits.c, libmisc/loginprompt.c, libmisc/motd.c, libmisc/pam_pass.c, libmisc/pwdcheck.c, libmisc/rlogin.c, libmisc/setugid.c, libmisc/setupenv.c, libmisc/shell.c, libmisc/strtoday.c, libmisc/sulog.c, libmisc/ttytype.c, libmisc/utmp.c, libmisc/xmalloc.c, NEWS, lib/Attic/getpass.c, lib/Attic/grdbm.c, lib/Attic/grpack.c, lib/Attic/gsdbm.c, lib/Attic/gspack.c, lib/Attic/pwdbm.c, lib/Attic/pwpack.c, lib/Attic/rad64.c, lib/Attic/rcsid.h, lib/Attic/spdbm.c, lib/Attic/sppack.c, lib/commonio.c, lib/commonio.h, lib/defines.h, lib/encrypt.c, lib/faillog.h, lib/fputsx.c, lib/getdef.c, lib/getdef.h, lib/groupio.c, lib/groupio.h, lib/gshadow.c, lib/gshadow_.h, lib/lockpw.c, lib/port.c, lib/port.h, lib/prototypes.h, lib/pwauth.c, lib/pwauth.h, lib/pwio.c, lib/pwio.h, lib/sgetgrent.c, lib/sgetpwent.c, lib/sgetspent.c, lib/sgroupio.c, lib/sgroupio.h, lib/shadow.c, lib/shadowio.c, lib/shadowio.h, lib/utent.c:
	reindent all source code using -l80.

	* libmisc/.indent.pro, src/.indent.pro, lib/.indent.pro: -l80 added.

	* lib/gshadow.c, NEWS:
	rewrited group count to dynamic (by John Newbigin <jnewbigin@ict.swin.edu.au >).

	* po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tl.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po:
	run "make update-po".

	* src/login.c: use allways "\n%s login: " login prompt.

	* src/login.c: removed radius support (even not compiles).

	* doc/Attic/README.mirrors, doc/Makefile.am: removed.

	* src/userdel.c (update_user): removed next redundant closing }.

	* src/userdel.c: remove using unused NO_REMOVE_MAILBOX #define.

	* src/userdel.c (update_user): removed redundant closing }.

2005-03-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/getdef.c:
	move PASS_MAX_DAYS, PASS_MIN_DAYS and PASS_WARN_AGE to part PAM not dependent
	(used in useradd, pwconv).

	* configure.in, src/Makefile.am:
	move define LOCALEDIR using AC_DEFINE_UNQUOTED() to src/Makefile.am::AM_CPPFLAGS.

	* man/Attic/pwconv.8: typo in bold.

	* doc/Attic/INSTALL: removed.

	* doc/Attic/README.sun4, doc/Makefile.am: removed outdated README.sun4.

2005-03-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: put mine data in Last-Translator: field.

	* src/newusers.c:
	use the same as in useradd default UMASK (022 instead 077) if diffrent not
	defined in login.defs.

	* NEWS, libmisc/copydir.c:
	added SELinux changes (based on Fedora patch).

	* NEWS: typo.

	* man/Attic/login.defs.5: typo in bold.

	* src/chfn.c, src/chsh.c, lib/getdef.c:
	move CHFN_AUTH, CHSH_AUTH variables from login.defs to part !USE_PAM dependent.
	Use "auth required pam_unix.so" in /etc/pam.d/{chfn,chsh} for force enter password
	on use chfn/chsh.

	* lib/getdef.c: added CHSH_AUTH variable in def_table[] table.

	* src/chsh.c: s/CHFN_AUTH/CHSH_AUTH/

	* man/Attic/shadow.5, man/Attic/passwd.5:
	add more accurate information about what contains field with encrypted password in
	each passwd/shadow line (reported by Mike Brodbelt).

	* autogen.sh: reorder.

	* lib/getdef.c:
	CRACKLIB_DICTPATH, ENV_HZ, ENV_PATH, ENV_ROOTPATH, ENV_SUPATH, ENV_TZ,
	ENVIRON_FILE, FTMP_FILE, ISSUE_FILE, LASTLOG_ENAB, MAIL_CHECK_ENAB, MAIL_DIR,
	MAIL_FILE, MD5_CRYPT_ENAB, MOTD_FILE, NOLOGINS_FILE, OBSCURE_CHECKS_ENAB,
	PASS_ALWAYS_WARN, PASS_CHANGE_TRIES, PASS_MAX_DAYS, PASS_MAX_LEN, PASS_MIN_DAYS,
	PASS_MIN_LEN, PASS_WARN_AGE, PORTTIME_CHECKS_ENAB, SU_WHEEL_ONLY, QMAIL_DIR,
	QUOTAS_ENAB, ULIMIT variables moved to code "#ifndef USE_PAM" dependent.

	* configure.in:
	fix importand typo: added missing ",". Now LOGIN_ACCESS realy is defined only
	when PAM is not enabled.

	* libmisc/obscure.c, libmisc/limits.c:
	all functions from this file are "#ifndef USE_PAM" dependent.

	* libmisc/setugid.c (change_uid):
	removed dead code depndent on "#ifdef BSD".

	* libmisc/ttytype.c (ttytype):
	removed dead code depend on "defined(SUN) || defined(BSD) || defined(SUN4)".

	* src/login.c (setup_tty): remove dead code.

	* libmisc/rlogin.c:
	fix compilation warning: replace #include <unistd.h> by #include <netdb.h>
	where ruserok() is declared.

2005-03-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: kill one fuzzy entry.

2005-03-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, libmisc/log.c:
	fixed create lastlog entry fo users never loged in on non-PAM
	variant of login (fix by <oracular@ziplip.com>).

2005-03-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, etc/Attic/login.defs.linux, etc/login.defs, lib/getdef.c, man/pl/login.defs.5:
	remove handle login.defs::NOLOGIN_STR (never used).

2005-02-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/shadow.5:
	added missing '\&' in line starting with '\.', which causes groff to skip
	it entirely (fix submited by Danilo Piazzalunga <danilopiazza@libero.it>).

	* TODO: cleanups.

2005-02-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c, NEWS:
	useradd: fixes a potential security problem when mailbox is created in
	useradd.
	Patch and comment by Koblinger Egmont <egmont@uhulinux.hu>:
	Only two arguments are passed to the open() call though it expects three
	because O_CREAT is present. Hence the permission of the file first becomes
	some random garbage found on the stack, and an attacker can perhaps open
	this file and hold it open for reading or writing before the proper
	fchmod() is executed. (Actually, we could also pass the final "mode" to
	the open() call and then save the consequent fchmod().)

2005-02-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/LINGUAS, po/tl.po:
	added tl translation (fron Debian resources).

2005-02-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/chage.c, src/chfn.c, src/chsh.c, src/passwd.c:
	SELinux changes: added changes in chage, chfn, chsh, passwd for allow
	construct more grained user password/accuunt properties on SELinux
	policies level. Patch originally based on RH changes (submited by Chris
	PeBenito <pebenito@gentoo.org>)

2005-02-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po, NEWS:
	updated translation (by Jean-Luc Coulon <jean-luc.coulon@wanadoo.fr>) from
	Debian resources.

2005-01-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: open work on 4.0.8.

2005-01-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po:
	"make update-po".

2005-01-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, po/it.po:
	updated it translations (by Danilo Piazzalunga <danilopiazza@libero.it>).

2005-01-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/rlogin.c: remove ruserok() prototyle and #include <unistd.h>.

	* lib/getdef.c: remove strtol() prototype (it comes with <stdlib.h>).

	* po/da.po, po/es.po, po/nl.po, po/pl.po, po/pt.po:
	"Project-Id-Version: shadow 4.0.7".

	* NEWS, po/fi.po:
	updated fi translation (by Tommi Vainikainen <thv+debian@iki.fi>).

2005-01-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/da.po, po/es.po, po/pl.po, po/pt.po: kill fuzzy entries.

	* po/nl.po, NEWS:
	updated nl translations (by cobaco (aka Bart Cornelis)" <cobaco@linux.be>).

	* lib/Makefile.am (libshadow_la_LIBADD): removed snprintf.h.

	* NEWS, po/LINGUAS, po/zh_TW.po:
	added zh_TW translation (from Debian resources).

	* po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po:
	"make update-po".

	* src/Attic/mkpasswd.c, src/passwd.c, src/userdel.c, src/chage.c, src/chfn.c, src/chsh.c, src/gpasswd.c, src/groups.c, src/login.c:
	"less means better" added fixes which makes english texts more consistent
	especially with capitalization issues. Based on fixes by Tommi Vainikainen
	<thv+debian@iki.fi> (make all text begining from lower case .. not upper).
	This patch cuts i18n entries in each po/*po file from 420 to 402.

2005-01-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: added pt to updated translations.

	* lib/defines.h: reverte last change (mistake).

	* po/pt.po:
	updated translation by Miguel Figueiredo <elmig@debianpt.org>.

2005-01-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: typo.

	* NEWS: update da, es and pl (100%) translations.

	* po/pl.po: finish translations.

	* po/da.po: updated translations by Claus Hindsgaul <claus_h@image.dk>.

	* NEWS, TODO: Typos found by Claus Hindsgaul <claus_h@image.dk>.

	* po/es.po: Updates from Ruben Porras <nahoo@inicia.es>.

	* lib/defines.h: - remove usong shadow_.h.

	* po/pl.po: kill fuzzy.

	* NEWS, lib/Attic/grent.c, lib/Attic/lastlog_.h, lib/Attic/md5.c, lib/Attic/md5.h, lib/Attic/md5crypt.c, lib/Attic/mkdir.c, lib/Attic/putgrent.c, lib/Attic/putpwent.c, lib/Attic/putspent.c, lib/Attic/pwent.c, lib/Attic/rename.c, lib/Attic/rmdir.c, lib/Attic/shadow_.h, lib/Attic/snprintf.c, lib/Attic/snprintf.h, lib/Attic/strcasecmp.c, lib/Attic/strdup.c, lib/Attic/strerror.c, lib/Attic/strstr.c, lib/Makefile.am:
	remove unused now files in lib/ directory.

	* po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/POTFILES.in, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po:
	Now correctly shadow passes "make distcheck".

	* NEWS: typo.

2005-01-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/faillog.c, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sq.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, NEWS:
	switch faillog ro use getopt_long().

	* etc/pam.d/su: aded line with "session required pam_env.so".

2004-12-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/de/Makefile.am, man/de/vigr.8, man/de/vipw.8, NEWS:
	added de vigr(8), vipw(8) man pages (from Debian resources).

2004-12-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/LINGUAS, po/ro.po, po/sq.po, NEWS:
	added ro, sq translations (from Debian resources).

2004-12-20  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	added checing is fseeko() function is avalaibabe in system: added fseeko to
	AC_CHECK_FUNCS parameters.

	* lib/Makefile.am:
	fixed warning message about incorrect try linking non-PIC code with shared
	library: removed $(top_builddir)/libmisc/libmisc.a from libshadow_la_LIBADD.

	* NEWS:
	- final entry about fixed large file support in lastlog and faillog.

	* src/vipw.c, lib/Attic/pwent.c, lib/Attic/grent.c:
	use fseeko() instead fseek(). This not realuy neccessary because in this
	cases fseek() was used for move to begin of file. This only for minimize
	external functions count.

	* src/faillog.c:
	fixes for allow operate on large files by faillog: use fseeko() instead
	fseek().

	* src/lastlog.c:
	fixes for allow operate lastlog on large files: use fseeko() instead fseek()
	and do not casrt file offsets to unsigned long (based on large-file patch
	from FC).

	* src/faillog.c: fixed typo in usage().

2004-12-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/newgrp.1: fixed typo in bold macro.

2004-12-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/chpasswd.8: remove bold from NAZWA section.

2004-12-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/faillog.c: remove using Prog variable.

	* configure.in, NEWS:
	fixed large file support: added AC_SYS_LARGEFILE macro to autoconf.

	* man/Attic/groupmod.8, man/pl/groupmod.8: separate OPTIONS section.

	* man/pl/chpasswd.8: sync with english version.

	* man/Attic/chpasswd.8:
	bold "chpasswd" command name in CAVEATS section.

	* man/Attic/chpasswd.8: s/protect/protected/

	* man/pl/lastlog.8: cleanups.

	* man/Attic/chpasswd.8, man/Attic/lastlog.8, man/Attic/newusers.8:
	remove bold from NAME section.

	* man/it/groupadd.8, man/it/useradd.8: separate OPZIONI section.

	* man/pl/groupmems.8: fixes in OPCJE section.

	* man/Attic/chpasswd.8: more cleanups.

2004-12-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chage.1, man/Attic/chfn.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.5, man/Attic/pw_auth.3, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadowconfig.8, man/Attic/suauth.5, man/Attic/useradd.8:
	Fixed varoiuse typos and misspeling based partialy on patch from Bug#141322
	from Debian (submited by Christian Perrier <bubulle@debian.org>).

	* man/Attic/chpasswd.8: more cleanups.

	* man/pl/faillog.8, man/Attic/faillog.8, man/ja/faillog.8:
	remove from OPTIONS section information about avalaibability on some systems
	faillog database in other location thad listed in FILES section.

	* man/Attic/chpasswd.8: updated.

	* man/fr/faillog.5:
	fixed FICHIERS secttion: corrected change to italic on /var/log/faillog.

	* src/faillog.c:
	move main() to the end of file and reorder rest functions. Now declararion
	finction prototypes can be removed.

2004-12-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: updated.

	* man/pl/lastlog.8: synced with current english version.

	* man/Attic/lastlog.8: use the same style as in chpasswd(8).

	* po/uk.po, po/zh_CN.po, po/tr.po, po/sv.po, po/ru.po, po/sk.po, po/pt_BR.po, po/pt.po, po/pl.po, po/nn.po, po/nl.po, po/nb.po, po/ko.po, po/ja.po, po/he.po, po/id.po, po/it.po, po/fi.po, po/fr.po, po/es.po, po/eu.po, po/el.po, po/da.po, po/de.po, po/cs.po, po/ca.po, po/bs.po:
	"make update-po" after rewrite lastlog.

	* src/lastlog.c: Rewrite for use the same style as in chpasswd.c.
	Move open lastlog file after commadline option parsing so now --help option
	can be used by user without read access to lastlog file.

	* src/chpasswd.c:
	s/display this help and exit/display this help message and exit/ in ussage()
	output.

	* po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po:
	"make update-po".

	* src/chpasswd.c:
	Added handle -h|--help option. Improved and updated ussage() output.

2004-12-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/tr.po, po/uk.po, po/zh_CN.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/da.po, po/de.po, po/el.po, po/bs.po, po/ca.po, po/cs.po:
	"make update-po" and resolve fuzzy with last change in src/chpasswd.c.

	* src/chpasswd.c, NEWS:
	switch chpasswd to use getopt_long() and adds a --md5 option
	(by Ian Gulliver <ian@penguinhosting.net>).

	* NEWS, configure.in: start work on 4.0.7.

2004-11-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: cleanups.

	* po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/bs.po, po/ca.po, po/cs.po, po/da.po:
	removed not used translations.

	* NEWS, src/su.c:
	fix adding of pam_env env variables to environment (Martin Schlemmer <azarah@nosferatu.za.org>).

	* NEWS, configure.in:
	fixed filling MAIL_SPOOL_DIR and MAIL_SPOOL_FILE variables which was allways
	empty (Gregorio Guidi <g.guidi@sns.it>)

	* NEWS: updated.

	* src/useradd.c, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po:
	do not translate variable names from /etc/default/useradd during "useradd -D".

2004-11-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/zh_CN/groupadd.8, man/zh_CN/groupmod.8, man/zh_CN/useradd.8, man/zh_CN/usermod.8, man/zh_TW/groupadd.8, man/zh_TW/groupmod.8, man/zh_TW/useradd.8, man/zh_TW/usermod.8, man/it/groupadd.8, man/it/groupmod.8, man/it/useradd.8, man/it/usermod.8, man/ja/groupadd.8, man/ja/groupmod.8, man/ja/useradd.8, man/ja/usermod.8, man/pl/groupadd.8, man/pl/groupmod.8, man/pl/useradd.8, man/pl/usermod.8, man/pt_BR/groupadd.8, man/pt_BR/groupmod.8, man/Attic/groupadd.8, man/Attic/groupmod.8, man/Attic/useradd.8, man/fr/useradd.8, man/fr/usermod.8, man/id/useradd.8:
	correction: groups/users with gid/uid 0 and 999 are reserved for system accounts.

	* man/zh_CN/groupmod.8, man/zh_CN/useradd.8, man/zh_CN/usermod.8, man/zh_TW/groupmod.8, man/zh_TW/useradd.8, man/zh_TW/usermod.8, man/id/useradd.8, man/it/groupadd.8, man/it/groupmod.8, man/it/useradd.8, man/it/usermod.8, man/ja/groupadd.8, man/ja/groupmod.8, man/ja/useradd.8, man/ja/usermod.8, man/pl/groupadd.8, man/pl/groupmod.8, man/pl/useradd.8, man/pl/usermod.8, man/pt_BR/groupmod.8, man/Attic/groupadd.8, man/Attic/groupmod.8, man/Attic/useradd.8, man/fr/useradd.8, man/fr/usermod.8:
	zgroups/users with gid/uid 0 and 499 are typically reserved for system accounts.

2004-11-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/Attic/mkpasswd.8, man/pl/chage.1, man/pl/chsh.1, man/pl/faillog.8, man/pl/groupadd.8, man/pl/groupmems.8, man/pl/groupmod.8, man/pl/lastlog.8, man/pl/useradd.8, man/pl/userdel.8, man/pl/usermod.8, man/Attic/chage.1, man/Attic/chsh.1, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupmems.8, man/Attic/lastlog.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8:
	separated OPTIONS section.

	* lib/commonio.c: reverte last change.

	* libmisc/pwdcheck.c:
	one word fix .. ommited "else" was removed. Now security bug which allow
	unauthorized account properties modification is realy closed.

2004-10-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/commonio.c:
	add matchpathcon to create the files correctly when they do not exist (based
	on patch from FC).

	* man/Attic/passwd.1: fixed two typos ("/" in incorrect place).

2004-10-27  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* etc/pam.d/useradd: - added header

	* etc/pam.d/chfn, etc/pam.d/chsh, etc/pam.d/userdel: - fixed header

2004-10-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* etc/pam.d/chfn, etc/pam.d/chsh, etc/pam.d/userdel:
	added missing template/example PAM service config files for chfn, chsh, userdel.

	* NEWS, configure.in: start 4.0.6.

2004-10-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/Attic/adduser.8, man/pl/Makefile.am, man/Attic/adduser.8, man/Makefile.am, man/fr/Attic/adduser.8, man/fr/Makefile.am, man/id/Attic/adduser.8, man/id/Makefile.am, man/it/Attic/adduser.8, man/it/Makefile.am, man/ja/Attic/adduser.8, man/ja/Makefile.am, NEWS:
	remove adduser(8) roff include man page to useradd(8).

	* lib/Makefile.am: more fixes for non-inst libmisc.

	* libmisc/Makefile.am, src/Makefile.am, NEWS:
	change libmisc to private static library.

	* etc/pam.d/Makefile.am: typo.

2004-10-24  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* po/pl.po: - more translation/formatting fixes

	* po/pl.po: - updated translation

	* po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/bs.po:
	- make update-po, updated usage() translation

	* src/useradd.c: - syntax fix for useradd in usage()

	* po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po:
	- usage() formatting and other fixes

	* po/fi.po: - proper UTF

	* po/pl.po: - pl translation fixes/updates by Jakub Bogusz

2004-10-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* etc/pam.d/chage, etc/pam.d/chpasswd, etc/pam.d/groupadd, etc/pam.d/groupdel, etc/pam.d/groupmod, etc/pam.d/newusers, etc/pam.d/useradd, etc/pam.d/usermod:
	use default path to PAM modules.

	* etc/pam.d/Attic/shadow, etc/pam.d/Makefile.am, etc/pam.d/chage, etc/pam.d/chpasswd, etc/pam.d/groupadd, etc/pam.d/groupdel, etc/pam.d/groupmod, etc/pam.d/login, etc/pam.d/newusers, etc/pam.d/usermod:
	Remove shadow PAM config file. Added PAM config files for: chage, chpasswd,
	groupadd, groupdel, groupmod, login, newusers.

	* po/zh_CN.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po:
	"make update-po".

	* configure.in: reverte previous incorrect commit.

	* NEWS, src/su.c:
	add pam_open_session() support. If builded without PAM support
	propagate $DISPLAY and $XAUTHORITY environment variables.
	Based on http://www.gentoo.org/cgi-bin/viewcvs.cgi/sys-apps/shadow/files/shadow-4.0.4.1-su-pam_open_session.patch?rev=1.1

2004-10-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: cleanups.

	* lib/defines.h:
	define syslog() depending on ENABLE_NLS (not on HAVE_SETLOCALE).

2004-10-23  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/fr/Makefile.am: - killed non-existent manpage

2004-10-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/copydir.c, NEWS:
	when placing symlinks into /etc/skel copy_tree of libmisc/copydir.c will
	properly create the symlink in the destination directory but not change the
	ownership to the target user/group. This makes httpd Option
	SymlinkIfOwnerMatch break for default weg pages including symlinks placed
	into /etc/skel/public_html for example.
	http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=66819

2004-10-11  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Makefile.am:
	seems I foud CorrectWay(tm) for add some symlinks on install target.

	* po/pl.po: more fixes.

	* po/pl.po: added missing \n.

	* src/chage.c, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, NEWS, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po:
	more verbose/human readable -l output. This output is much more beter for
	send directly via email for each users as message with account status (for
	example as message with warning about account/password expiration).

	* configure.in: start prepare for 4.0.5.

	* src/Makefile.am, libmisc/Makefile.am, lib/Makefile.am, configure.in:
	move LOCALEDIR to autoheader variables. Remove redefining DEFS in
	Makefile.am (not neccessary now).

	* src/chage.c, src/chpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/grpck.c, src/logoutd.c, src/newusers.c, src/pwck.c, src/useradd.c, src/userdel.c, src/usermod.c, NEWS:
	applied OWL shadow-4.0.4.1-owl-pam-auth.diff patch by Solar Designer
	<solar@openwall.com>:
	  Moved the PAM authentication in user management commands after
	  command-line parsing, made it use separate service names for each command.
	  Use constant strings rather than argv[0] for syslog ident in the user
	  management commands.

	* man/Attic/useradd.8:
	reword the useradd manpage a little to make it more clear. Fix from:
	http://www.gentoo.org/cgi-bin/viewcvs.cgi/sys-apps/shadow/files/shadow-4.0.4.1-useradd-manpage-update.patch?rev=1.1

	* configure.in: added libselinux detection.

	* lib/Makefile.am, lib/commonio.c, lib/commonio.h, NEWS, autogen.sh, configure.in:
	added SELinux support (basing on patch from Gentoo).

	* man/fr/Makefile.am (man_MANS): added getspnam.3.

2004-10-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pt.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/bs.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nl.po, po/nn.po, po/pl.po, src/groupadd.c, src/groupmod.c:
	English grammar fix: s/is a not a valid group name/is not a valid group name/
	(pointed by Mike Frysinger <vapier@gentoo.org>).

2004-10-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/userdel.c:
	When removing a user with userdel, userdel always exits 1 (fixed).
	Based on http://bugs.gentoo.org/show_bug.cgi?id=66687.

2004-08-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	Use AC_SEARCH_LIBS() for inet_ntoa(), socket(), gethostbyname() probing (instead AC_CHECK_FUNC()).

2004-08-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am: shadow(3) man page moved to man_MANS.

	* libmisc/ttytype.c: Removed getenv() prototype (it is in <stdlib.h>).

	* src/Attic/mkpasswd.c:
	Removed fgetsx() prototype (it is in lib/prototypes.h).

	* man/it/vigr.8: Fixed typo (s/wipw/vipw/).

2004-08-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: Typo.

	* po/tr.po, po/uk.po, po/zh_CN.po, po/bs.po, po/cs.po, po/de.po, po/el.po, po/es.po, po/eu.po, po/fi.po, po/fr.po, po/he.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/nb.po, po/nn.po, po/pl.po, po/pt.po, po/ru.po, po/sk.po, po/sv.po:
	Run "make update-po".

	* po/ca.po, po/da.po, po/nl.po, po/pt_BR.po: Converted to UTF-8.

	* po/LINGUAS: Typo.

	* po/nb.po, po/nl.po, po/nn.po, po/pt.po, po/pt_BR.po, po/tr.po, po/zh_CN.po, NEWS, po/LINGUAS, po/bs.po, po/ca.po, po/da.po, po/eu.po, po/he.po, po/id.po:
	New translations: bs, ca, da, eu, he, id, nb, nl, nn, pt, pt_BR, tr,
	zh_CN (stolen froM Debian)

	* man/Attic/grpck.8, man/Attic/mkpasswd.8, man/Attic/pwck.8, man/pl/Attic/mkpasswd.8, man/pl/grpck.8, man/pl/pwck.8:
	Corrected section number.

2004-08-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/zh_TW/chfn.1, man/zh_TW/chsh.1, man/zh_TW/groupadd.8, man/id/chsh.1, man/id/login.1, man/it/chfn.1, man/pl/chage.1, man/pl/groupadd.8, man/pl/groupmems.8, man/pl/lastlog.8, man/pl/login.1, man/pt_BR/groupadd.8, man/zh_CN/chfn.1, man/zh_CN/chsh.1, man/de/login.1, man/de/su.1, man/fr/chsh.1, man/fr/passwd.1, man/fr/usermod.8, man/hu/chfn.1, man/Attic/chage.1, man/Attic/groupadd.8, man/Attic/groupmems.8, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/usermod.8:
	Options description in alphabetical order.

	* NEWS, src/login.c:
	Applied 036_pam_access_with_preauth.patch Debian patch submited by Bjorn
	Torkelsson <Bjorn.Torkelsson@hpc2n.umu.se>: add support for PAM account
	management to restrict access using pam_access when login is invoked with -f.

2004-06-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/getspnam.3: added roff link to shadow(3).

	* man/Makefile.am (man_MANS): added getspnam.3.

2004-06-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, lib/commonio.c, lib/getdef.c, src/vipw.c:
	Applied OWL shadow-4.0.4.1-owl-check-reads.diff patch by Solar Designer.
	Add checking for read errors in commonio and vipw/vigr (not doing so could
	result in data loss when the records are written back).

	* NEWS: Add note about apply shadow-4.0.4.1-owl-tmp.diff OWL patch.

	* src/useradd.c, configure.in:
	Remove looking for mkstemp() prototype and allways use mkstemp() (removed
	using mktemp if mkstemp() not found).
	Partialy based on tmp OWL patch by Solar Designer <solar@openwall.com>.

	* NEWS, libmisc/pwdcheck.c:
	Fixed securirty bug which allow unauthorized account properties modification.
	Affected tools: chfn and chsh.
	Bug was discovered by Martin Schulze <joey@infodrom.org>.

2004-05-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: typo.

	* NEWS, po/LINGUAS, po/it.po:
	added it translation (by Danilo Piazzalunga <danilopiazza@libero.it>).

2004-05-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: typos.

	* po/sk.po: updated (by Peter Mann <Peter.Mann@tuke.sk>).

2004-05-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/sk.po: run "make update-po".

	* NEWS, po/LINGUAS, po/sk.po:
	added sk translation (by Mann <Peter.Mann@tuke.sk>, submited by Christian
	Perrier <bubulle@kheops.frmug.org>).

2004-05-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	Use autoconf cache variables for file and directory location tests (by
	Maciej W. Rozycki  <macro@ds2.pg.gda.pl>).

2004-05-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/passwd.5:
	Correct path directory delimiters (by Maciej W. Rozycki <macro@ds2.pg.gda.pl>).

	* libmisc/xmalloc.c (malloc):
	Remove the declaration (by Maciej W. Rozycki <macro@ds2.pg.gda.pl>).

2004-04-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/login.c, NEWS:
	Fixed handle -f option: now it works correctly without specify "-h
	<host>" if open login session localy is required (thanks for help
	investigate bug for Krzysztof Kotlenga).

	* po/es.po: Updated (by Ruben Porras <nahoo82@telefonica.net>).

2004-04-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/cs.po, po/de.po, po/el.po, po/fi.po, po/fr.po, po/ja.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	Run "update-po".

2004-04-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/es.po: Updated to current (by run "update-po").

	* po/es.po: Converted to utf-8.

	* po/LINGUAS: Added es.

	* po/es.po, NEWS:
	Added es translation (by Ruben Porras <nahoo82@telefonica.net>).

2004-04-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/ko.po, NEWS:
	Updated ko translations (by Changwoo Ryu <cwryu@debian.org>).

2004-04-02  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fi.po: iconv -f iso8859-9 -t utf8

2004-03-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/age.c:
	Use endsgent() conditionaly depending on SHADOWGRP (fix submited by Gabor Z.
	Papp <gzp@papp.hu>).

	* po/LINGUAS, po/fi.po, NEWS:
	Added fi translation (by Tommi Vainikainen <thv@iki.fi>).

	* README: Fixed shadow and shadow-commit lists on-line archives URLs.

2004-01-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in, man/fr/Makefile.am, man/hu/Makefile.am, man/it/Makefile.am:
	New version 4.0.4.1
	bug fixes in automake files for generate correct tar ball on "make dist":
	added midsiing "EXTRA_DIST = $(man_MANS)" in man/*/Makefile.am.

	* man/ko/Makefile.am: New version 4.0.4.1
	bug fixes in automake files for generate correct tar ball on "make dist":
	added missing "EXTRA_DIST = $(man_MANS)" in man/*/Makefile.am.

	* man/de/Makefile.am, man/es/Makefile.am: New version 4.0.4.1
	bug fixes in automake files for generate correct tar ball on "make dist":
	added midsiing "EXTRA_DIST = $(man_MANS)" in man/*/Makefile.am.

	* configure.in: Fixed checking is avalaible st_rdev in struct stat.

2004-01-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: Typo.

	* man/pl/useradd.8: Cleanups in SYNOPSIS.

2004-01-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: Cleanups.

2004-01-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: Cleanups after autoupdate.

2004-01-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/groupadd.c, po/sv.po, po/uk.po, po/ru.po, po/ko.po, po/pl.po, po/fr.po, po/ja.po, po/el.po, po/cs.po, po/de.po, man/zh_TW/groupadd.8, man/zh_CN/groupadd.8, man/pt_BR/groupadd.8, man/pl/groupadd.8, man/ja/groupadd.8, man/it/groupadd.8, man/Attic/groupadd.8, NEWS:
	Added missing information about -f options in groupadd usage mesage (document
	this also in man page).

2003-12-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/Attic/lastlog_.h, libmisc/log.c, libmisc/utmp.c, src/lastlog.c, src/login.c:
	More time() or gettimeofday() prevention overwrite memory on 64bit arch
	(partialy based on patch from MDK).

	* po/sv.po, po/uk.po, po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po:
	Post remove TCFS support "make update-po".

	* man/Makefile.am: Removed getspnam.3 from EXTRA_DIST.

	* po/POTFILES.in: Removed lib/tcfsio.c.

	* lib/Attic/tcfsio.c, lib/Attic/tcfsio.h, lib/Makefile.am, src/passwd.c, src/userdel.c, NEWS, configure.in, doc/Attic/README.pam:
	Removed TCFS support (tcfs is dead).

	* configure.in:
	Added using AM_MAINTAINER_MODE. AC_INIT without parameters.

	* Attic/acconfig.h, configure.in:
	Cleanups on autoheadres level: use AC_DEFINE(VAR, VAL, [Comment]) for
	USE_PAM, HAVE_TCFS and TCFS_GDBM_SUPPORT.

	* src/newusers.c, src/useradd.c, Attic/acconfig.h, autogen.sh, lib/Attic/pwpack.c, NEWS:
	Remove all old BSD_QUOTA dependent code.

2003-12-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/Makefile.am, libmisc/Makefile.am, src/Makefile.am:
	Removed -I$(top_srcdir) from INCLUDES (isn't neccessary becaus this is in
	DEFAULT_INCLUDES) - slightly shorter compile output.

	* Makefile.am, configure.in:
	Added using AM_GNU_GETTEXT([external]) - removed intl SUBDIRS.
	Added locale.h to AC_CHECK_HEADERS() - lib/defines.h have part which depends
	on HAVE_LOCALE_H.

	* lib/nscd.h: Added missing newline at end of file.

	* Attic/acconfig.h: Remove unused (#un)defines.

	* autogen.sh: Typo.

	* autogen.sh: Much more simpler script - use autoreconf.

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	"make update-po".

2003-12-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/LINGUAS: Languages list for gettext 1.12.x.

2003-10-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: Kill fuzzy entries.

2003-10-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/usermod.8:
	Typo: missing "." on end of sentence (submited by Stepan Kasal <kasal@ucw.cz>).

2003-09-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po, po/cs.po, po/de.po, po/el.po, NEWS:
	convert all po/*.po files to utf-8.

2003-09-05  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* po/ru.po: - fixed header

2003-07-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po, po/ru.po, po/sv.po, po/uk.po, libmisc/pam_pass.c, po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po:
	Otput "passwd: password updated successfully\n" message on successfull
	password change (based on Debian changes).

	* src/newgrp.c: Remove work around for unsecure gettext.

2003-06-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c, src/usermod.c:
	Added initializing memory in variables when get_groups() function is not called,
	and memory allocated for user_groups is not initialized (in both useradd and
	usermod when -G options is used and in usermod when -l option is used).
	That causing segfaults sometimes.
	This fix is importand but not critical because usermod and usermod aren't suid
	root.
	Problem reported and fixed by Alexey Voinov <voins@altlinux.ru>.

2003-06-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/login.1: Fixed FILES section.

	* src/chfn.c, src/chpasswd.c, src/chsh.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/grpconv.c, src/grpunconv.c, src/id.c, src/login.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/suauth.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c:
	Indented.

	* src/chage.c: Move *flg variables to global.

	* Attic/acconfig.h: Comment for USG.

2003-05-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/de/chfn.1, man/de/login.1:
	Fixed section name (s/NAME/BEZEICHNUNG/).

	* man/de/chfn.1, man/de/chsh.1: Sync FILES section with en version.

	* man/Attic/login.1: Typo (s/avr/var/).

	* man/de/login.1: Sync FILES section with en man version.

	* man/de/chfn.1, man/de/chsh.1, man/de/login.1: Remove ^M from EOL.

	* man/de/login.1, man/de/Makefile.am, man/de/chfn.1, man/de/chsh.1, NEWS:
	Next round updates from Josef Spillner <josef@ggzgamingzone.org>: update
	chsh(1), login(1) and added new chfn(1) german man pages.

	* NEWS: Added info about remove d_passwd(5), dialups(5) man pags.

2003-05-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, TODO, src/chfn.c, src/chpasswd.c, src/chsh.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/passwd.c, src/pwunconv.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c:
	One TODO entry gone: fix nscd flushing databases on change (use
	per service flushing method instead HUPing nscd process).

	* lib/Makefile.am, lib/commonio.c, lib/nscd.c, lib/nscd.h, libmisc/Attic/nscd.c, libmisc/Attic/nscd.h, libmisc/Makefile.am:
	Move nscd.{c,h} from libmisc/ to lib/.
	Fix warning about implicit declaration of function `nscd_flush_cache' in lib/commonio.c.

	* lib/pwauth.h: Fix pw_auth() prototype.

	* libmisc/Attic/nscd.c, libmisc/Attic/nscd.h, libmisc/Makefile.am:
	Added header file for nscd communication functions.

	* libmisc/chkname.c (good_name):
	fixed warning about comparison between pointer and integer.

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	"make update-po".

	* src/useradd.c (main):
	chain create_mail() and small fix in usage message.

	* src/userdel.c: Removed AUTH_METHODS code.

	* lib/pwauth.c: Fixed pw_auth() prototype.

	* src/sulogin.c, src/usermod.c: Removed AUTH_METHODS code.

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	"make update-po".

	* src/useradd.c: Indent.

	* man/ja/Attic/pwauth.8, man/ja/Makefile.am, man/pl/Attic/pwauth.8, man/pl/Makefile.am, src/passwd.c, src/useradd.c, NEWS, lib/pwauth.c, man/Attic/pwauth.8, man/Makefile.am:
	Cleanups continuations: removed old AUTH_METHODS dependent code,
	removed also pwauth(8) man page.

	* man/pl/Makefile.am (man_MANS): remove d_passwd.5 man page.

	* src/useradd.c, src/usermod.c, po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	Cleanups in usage messages.

	* src/newgrp.c: Cleanups in comments.

	* po/uk.po, po/sv.po, po/ru.po, po/pl.po, po/ko.po, po/ja.po, po/fr.po, po/el.po, po/de.po, po/cs.po:
	"make update-po".

	* lib/getdef.c (main): remove gettextize error messages from test code.

	* NEWS: Cleanups.

2003-05-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c, man/pl/useradd.8, po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po, NEWS, TODO, etc/useradd, man/Attic/useradd.8:
	Added handle by useradd /etc/defaults/useradd::CREATE_MAIL_SPOOL={yes|no}.
	Now on adding user account can be added also created empty user mail
	spool. Curent code handle only mailbox.
	TODO: add handle create user mail spool in maildir format.

	* TODO: Typo.

	* src/chage.c (usage): fix missing ")".
	(main): updated commented description.

	* src/useradd.c: Indent.

	* man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8:
	Minor cleanups.

	* man/Attic/chage.1, man/pl/chage.1:
	Rewrite for use claissic list form options descriptions.

	* man/pl/groupadd.8:
	s/Polecenie groupadd posiada opcje:/Polecenie groupadd posiada następujące opcje:/

	* TODO: ALL:
	move base passwd/shadow/group/gshadow operation to module for allow write
	diffrent backend modules for db, NIS, LDAP and others. Default backend it
	will be choose depending on /etc/nsswitch.conf and allow overrride this by
	-r <repository> options (where the <repository> can be file, db, nis
	nisplus, ldap .. like on /etc/nsswitch.conf in service column).
	passwd have old piece of code with handling -r option and it will be good
	finish this and propagate on other shadow tools for allow operate on other
	user databases by well known tools.

	useradd:
	add handle /etc/defaults/useradd::CREATE_MAIL_SPOOL={yes,no} for allow
	create empty mail spool for added user.

	* man/pl/Attic/d_passwd.5, man/pl/Attic/dialups.5: Removed.

	* man/Attic/groupmems.8: Close few \fB by add \fR.

	* man/Attic/groupadd.8, man/Attic/groupmems.8: Minor cleanups.

2003-05-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/grpconv.c, src/grpunconv.c, src/pwconv.c, src/pwunconv.c:
	Move non-SHADOWPWD stub code to end of file (like in chage.c) and do not use
	gettextized message.

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	"make update-po".

	* src/chage.c, NEWS:
	Now all code depend on SHADOWPWD. If shadow will not be configured on
	autoconf level for using shadow possword chage is olny stub which informs
	"chage not configured for shadow password support."

	* man/it/Makefile.am: Removed EXTRA_DIST (not neccessary).

	* man/es/Makefile.am: Removed groups.1 (doen't exist es groups(1)).

	* man/de/Makefile.am (man_MANS): added login.1.

	* man/de/Makefile.am: Removed EXTRA_DIST (isn't neccessary now).

	* man/hu/Makefile.am, man/ja/Makefile.am, man/ko/Makefile.am, man/pl/Makefile.am, man/de/Makefile.am, man/fr/Makefile.am, NEWS, man/Makefile.am:
	Install groups(1) man page (moved from EXTRA_DIST to man_MANS).

	* po/.cvsignore:
	Added files generated by gettextize from gettext 0.11.5.

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	Updated after removing dialup tools.

	* po/POTFILES.in: Removed lib/{dialchk,dialup}.c and src/dpasswd.c.

2003-05-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/shell.c (shell): do not gettexitize DEBUG message.

	* src/chsh.c, src/grpconv.c, src/login.c, src/logoutd.c, src/sulogin.c, src/vipw.c, libmisc/Attic/login_access.c, libmisc/getdate.y, libmisc/limits.c, libmisc/obscure.c, libmisc/setupenv.c, lib/Attic/getpass.c, lib/pwauth.c:
	Removed "#if 0 .. #endif" dead code.

	* libmisc/utmp.c: Fixed unterminated #if.

	* libmisc/Attic/login_access.c (resolve_hostname):
	cleanup: removed #if 1 .. #endif.

	* libmisc/.cvsignore: Added getdate.c.

	* libmisc/Attic/getdate.c:
	Removed - this file is generated by bison/yacc.

	* configure.in:
	Change file name passwd in AC_INIT argument from lib/dialchk.c to src/passwd.c.

	* src/su.c:
	Removed dead code (#if 0 .. #endif) with call motd() and mailcheck()
	(was commnted because GNU su doesn't do this).

2003-05-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Attic/dpasswd.c, src/login.c, src/Makefile.am, man/pl/Attic/dpasswd.8, man/pl/Makefile.am, man/ja/Attic/dpasswd.8, man/ja/Makefile.am, man/Attic/dpasswd.8, man/Makefile.am, lib/Attic/dialchk.c, lib/Attic/dialchk.h, lib/Attic/dialup.c, lib/Attic/dialup.h, lib/Makefile.am, lib/getdef.c, etc/Attic/login.defs.linux, etc/login.defs, NEWS:
	Removed old dpasswd and DIALUPS_CHECK_ENAB login.defs handling code from login.

	* doc/Attic/ANNOUNCE, doc/Makefile.am, NEWS: Removed old doc/ANNOUNCE.

	* src/login.c, lib/getdef.c, etc/Attic/login.defs.linux, NEWS:
	Remove NO_PASSWORD_CONSOLE code.

2003-05-03  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/pwd2spwd.c, libmisc/utmp.c, libmisc/entry.c, libmisc/isexpired.c, lib/sgetspent.c, lib/shadow.c, lib/Attic/putpwent.c, lib/Attic/pwent.c, lib/Attic/pwpack.c, lib/defines.h, lib/pwio.c, lib/sgetpwent.c, Attic/acconfig.h, configure.in:
	Remove old SVR4, ATT_AGE, ATT_COMMENT dependent code.

	* src/chage.c:
	Remove some ageing code which was not used if SHADOWPWD isn't defined.
	Now handling mindays, maxdays and lastday also depends on SHADOWPWD.

2003-05-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/shadowconfig.8, man/Attic/su.1, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8:
	Reformated.

	* etc/login.defs:
	Use FHS 2.x compliant paths to lastlog, sulog, mail spool and also change
	ENV_SUPATH to PATH=/sbin:/bin:/usr/sbin:/usr/bin and
	ENV_PATH to PATH=/bin:/usr/bin

	* old/Attic/Makefile.am, old/Attic/Makefile.linux, old/Attic/Makefile.sun4, old/Attic/Makefile.svr4, old/Attic/Makefile.xenix, old/Attic/config.h.linux, old/Attic/config.h.sun4, old/Attic/config.h.svr4, old/Attic/config.h.xenix, old/Attic/orig-config.h, old/Attic/pwconv-old.8, old/Attic/pwconv-old.c, old/Attic/pwconv.8, old/Attic/pwd.h.m4, old/Attic/pwunconv-old.8, old/Attic/pwunconv-old.c, old/Attic/pwunconv.8, old/Attic/scologin.c, old/Attic/vipw.8:
	Removed old stuff.

2003-04-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po, po/ru.po, po/sv.po, po/uk.po, po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po:
	make update-po

	* src/su.c: Remove not mached #endif after removing ATT_AGE code.

	* man/ko/passwd.5: Remove ^M from end of line.

	* src/chage.c, src/chpasswd.c, src/login.c, src/newusers.c, src/passwd.c, src/pwunconv.c, src/su.c, src/useradd.c, Attic/acconfig.h, NEWS, configure.in:
	Removed old ATT_AGE (account ageing in passwd file) dependent code.

	* po/pl.po: Fix chage and lastlog messages.

2003-04-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/limits.c, src/logoutd.c:
	More utmp/utmpx fixes: use endutend() or endutxend() depending on HAVE_UTMPX_H.

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	Run "make update-po" after remove SVR4 code and fix duplicated entries in sv.po.

	* NEWS, src/login.c, src/logoutd.c, src/useradd.c:
	Remove old SVR4 and SVR4_SI86_EUA dependent code from login, useradd and
	logoutd.

2003-04-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/usermod.8: Remove "OD TŁUMACZA" section.

	* man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmod.8, man/pl/grpck.8, man/pl/passwd.1, man/pl/pwck.8, man/pl/useradd.8, man/pl/userdel.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/grpck.8, man/Attic/passwd.1, man/Attic/pwck.8, man/Attic/useradd.8, man/Attic/userdel.8:
	Added EXIT VALUES section with full description exit codes.

	* src/groupadd.c: Typo (s/nut/not/).

	* man/Attic/shadowconfig.8: Merge changes from Debian.

	* NEWS, man/Attic/passwd.5:
	Remove text about password aging from passwd(5) (based on Debian changes).

	* po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po, src/lastlog.c, man/Attic/lastlog.8, man/it/lastlog.8, man/ja/lastlog.8, man/pl/lastlog.8:
	More unification in lastlog command syntax.

	* man/Attic/lastlog.8, man/it/lastlog.8, man/ja/lastlog.8, man/pl/lastlog.8:
	Unifications in SYNOPSIS.

	* man/it/gpasswd.1, man/it/groupadd.8, man/it/groupdel.8, man/it/groupmod.8, man/it/grpck.8, man/it/lastlog.8, man/it/useradd.8, man/it/userdel.8, man/it/usermod.8:
	Remove ^M from end of line.

	* man/Attic/gpasswd.1, man/Attic/groupadd.8:
	Indentation in FILES section.

	* src/pwconv.c, src/useradd.c, src/userdel.c:
	s/bad command syntax/invalid command syntax/

	* src/userdel.c:
	Indent by hand (seems indent have problems with complex conditions).

	* man/ru/Makefile.am: man_MANS: s#passwd.1#passwd.5#

	* po/pl.po: s/nie mogę/nie można/

	* po/fr.po: Emoticon removed.

	* NEWS, configure.in, man/Makefile.am, man/ru/.cvsignore, man/ru/Makefile.am, man/ru/passwd.5:
	Added ru passwd(1) man page from KSI resources.

	* man/zh_CN/Makefile.am, man/zh_CN/chfn.1, man/zh_CN/chsh.1, man/zh_TW/Makefile.am, man/zh_TW/chfn.1, man/zh_TW/chsh.1, man/ja/Attic/dpasswd.8, man/ja/Attic/mkpasswd.8, man/ja/Attic/pw_auth.3, man/ja/Attic/pwauth.8, man/ja/Attic/shadowconfig.8, man/ja/Makefile.am, man/ja/chage.1, man/ja/chfn.1, man/ja/chpasswd.8, man/ja/chsh.1, man/ja/expiry.1, man/ja/faillog.5, man/ja/faillog.8, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/groups.1, man/ja/grpck.8, man/ja/id.1, man/ja/lastlog.8, man/ja/limits.5, man/ja/login.1, man/ja/login.access.5, man/ja/login.defs.5, man/ja/logoutd.8, man/ja/newgrp.1, man/ja/newusers.8, man/ja/passwd.1, man/ja/passwd.5, man/ja/porttime.5, man/ja/pwck.8, man/ja/pwconv.8, man/ja/shadow.3, man/ja/shadow.5, man/ja/su.1, man/ja/suauth.5, man/ja/sulogin.8, man/ja/useradd.8, man/ja/userdel.8, man/ja/usermod.8, man/ja/vipw.8, NEWS, man/cs/Makefile.am, man/cs/id.1:
	Added chch(1), chfn(1) man pages from chinese man pages translation
	project.
	Added id(1) man page czech man pages translation project.
	Updated ja man pages and added expiry(1).

	* man/hu/groups.1, man/hu/login.1:
	Remove info about $HOME/.profile from FILES section (this does not depends
	stricte on shadow).

	* configure.in, man/Makefile.am, man/es/Makefile.am:
	Added es man pages to ac/am suit.

	* man/es/.cvsignore, man/hu/.cvsignore, man/pt_BR/.cvsignore, man/zh_CN/.cvsignore, man/zh_TW/.cvsignore:
	Added .cvsignore files.

	* man/hu/Makefile.am, man/hu/su.1:
	Added su(1) man page from hungarian man pages translation project.

2003-04-26  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: Ready for gettext 0.11.5, automake 1.7.4, autoconf 2.57.
	Many cleanups and unifications in man pages.

	* man/pt_BR/gpasswd.1, man/pt_BR/groupadd.8, man/pt_BR/groupdel.8, man/pt_BR/groupmod.8, man/pt_BR/shadow.5, man/zh_CN/chpasswd.8, man/zh_CN/groupadd.8, man/zh_CN/groupdel.8, man/zh_CN/groupmod.8, man/zh_CN/useradd.8, man/zh_CN/userdel.8, man/zh_CN/usermod.8, man/zh_TW/groupadd.8, man/zh_TW/groupdel.8, man/zh_TW/groupmod.8, man/zh_TW/useradd.8, man/zh_TW/userdel.8, man/zh_TW/usermod.8, man/ko/login.1, man/ko/su.1, man/pl/chage.1, man/pl/chfn.1, man/pl/chsh.1, man/pl/expiry.1, man/pl/gpasswd.1, man/pl/groupmems.8, man/pl/groups.1, man/pl/id.1, man/pl/lastlog.8, man/pl/login.1, man/pl/newgrp.1, man/pl/passwd.1, man/pl/su.1, man/pl/sulogin.8, man/pl/useradd.8, man/pl/usermod.8, man/ja/Attic/mkpasswd.8, man/ja/chage.1, man/ja/chfn.1, man/ja/chsh.1, man/ja/faillog.5, man/ja/faillog.8, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/groups.1, man/ja/grpck.8, man/ja/id.1, man/ja/lastlog.8, man/ja/limits.5, man/ja/login.1, man/ja/login.access.5, man/ja/logoutd.8, man/ja/newgrp.1, man/ja/passwd.1, man/ja/passwd.5, man/ja/porttime.5, man/ja/pwck.8, man/ja/shadow.3, man/ja/shadow.5, man/ja/su.1, man/ja/suauth.5, man/ja/sulogin.8, man/ja/useradd.8, man/ja/userdel.8, man/ja/usermod.8, man/hu/chsh.1, man/hu/gpasswd.1, man/hu/groups.1, man/hu/login.1, man/hu/newgrp.1, man/hu/passwd.1, man/it/gpasswd.1, man/it/groupadd.8, man/it/groupdel.8, man/it/groupmod.8, man/it/grpck.8, man/it/lastlog.8, man/it/shadow.5, man/it/useradd.8, man/it/userdel.8, man/it/usermod.8, man/cs/shadow.5, man/es/su.1, man/fr/chage.1, man/fr/faillog.5, man/fr/gpasswd.1, man/fr/shadow.5, man/fr/su.1, man/fr/userdel.8, man/fr/usermod.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8:
	Fixes: correct utmp/wtmp paths.
	Unifications: bold commnanda and italify other file names.
	Other minor changes and cleanups and unifications.

	* libmisc/limits.c: More utmpx/utmp fixes.

	* src/chpasswd.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmems.c, src/groupmod.c, src/id.c, src/login.c, src/newgrp.c, src/passwd.c, src/useradd.c, src/userdel.c, src/usermod.c, po/cs.po, po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po, po/sv.po, po/uk.po:
	Usage help message unification (s/usage:/Usage:/).

	* TODO: Missing "are".

	* src/logoutd.c, src/userdel.c, NEWS:
	Handle also utmpx if avalaile in userdel and logoutd.

2003-04-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/sulogin.c: Remove unused utent declaration.

	* src/sulogin.c, src/login.c:
	Remove #include <utmp.h> and <utmpx.h>. This comes with #include "prototypes.h".

	* lib/prototypes.h:
	"#include <utmp.h>" or "#include <utmpx.h>" depending on HAVE_UTMPX_H.

	* libmisc/failure.c:
	Remove "#include <utmp.h>" (this is included in failure.h).

	* configure.in:
	On detect mail spool directory location try first /var/mail.

2003-04-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/Attic/getdate.c, libmisc/Attic/login_access.c, libmisc/Attic/login_desrpc.c, libmisc/Attic/login_krb.c, libmisc/Attic/nscd.c, libmisc/Attic/setup.c, libmisc/entry.c, libmisc/env.c, libmisc/failure.c, libmisc/fields.c, libmisc/hushed.c, libmisc/isexpired.c, libmisc/limits.c, libmisc/list.c, libmisc/log.c, libmisc/loginprompt.c, libmisc/mail.c, libmisc/motd.c, libmisc/myname.c, libmisc/obscure.c, libmisc/pam_pass.c, libmisc/pwd2spwd.c, libmisc/pwd_init.c, libmisc/pwdcheck.c, libmisc/rlogin.c, libmisc/salt.c, libmisc/setugid.c, libmisc/setupenv.c, libmisc/shell.c, libmisc/strtoday.c, libmisc/sub.c, libmisc/sulog.c, libmisc/ttytype.c, libmisc/tz.c, libmisc/ulimit.c, libmisc/utmp.c, libmisc/valid.c, libmisc/xmalloc.c, libmisc/Attic/chkshell.c, libmisc/addgrps.c, libmisc/age.c, libmisc/basename.c, libmisc/chkname.c, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/console.c, libmisc/copydir.c:
	Indent all using current .indent.pro settings.

	* po/Makevars: New file neccessary for gettext >=0.11.5.

	* man/Makefile.am: Removed getspnam.3 from man_MANS (dos not exist).

	* po/de.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/ru.po:
	Fixes after filtering gettext 0.11.5 (missing headers elements, inforrect
	format strings).

2003-04-21  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, man/de/passwd.1:
	updated german passwd(1) man page (by Josef Spillner <josef@ggzgamingzone.org>)

2003-03-12  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* po/pl.po: - updated; terminology unification

2003-02-28  Paweł Gołaszewski  <blues@pld.org.pl>

	* etc/login.defs: - missing "MD5_CRYPT_ENAB  yes" added

2003-01-20  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* configure.in: - added Makefiles for man/zh_{CN,TW}

	* man/Makefile.am, man/zh_CN/Makefile.am, man/zh_CN/chpasswd.8, man/zh_CN/groupadd.8, man/zh_CN/groupdel.8, man/zh_CN/groupmod.8, man/zh_CN/useradd.8, man/zh_CN/userdel.8, man/zh_CN/usermod.8, man/zh_TW/Makefile.am, man/zh_TW/groupadd.8, man/zh_TW/groupdel.8, man/zh_TW/groupmod.8, man/zh_TW/useradd.8, man/zh_TW/userdel.8, man/zh_TW/usermod.8:
	- added zh man pages from MDK (2 x 6) and from cman (1)

2003-01-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ja/shadow.3, man/pl/shadow.3, man/Attic/shadow.3:
	sync spwd structure declaration with current glibc declaration (tahnks for
	point this bug to Michael Kerrisk <michael.kerrisk@gmx.net>).

	* man/pl/faillog.5: s/konsolę/terminal/

2002-12-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Makefile.am: typo (s/EXTRA_DOST/EXTRA_DIST/).

2002-10-14  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Makefile.am:
	fixed making vigr symlink to vipw (not vipw to vigr) in install-exec-hook (fix submited by
	Dimitar Zhekov <jimmy@is-vn.bg>).

	* debian/Attic/login.copyright, debian/Attic/login.postinst, debian/Attic/login.postrm, debian/Attic/login.preinst, debian/Attic/login.prerm, debian/Attic/logoutd.init, debian/Attic/passwd.conffiles, debian/Attic/passwd.copyright, debian/Attic/passwd.cron, debian/Attic/passwd.init, debian/Attic/passwd.postinst, debian/Attic/passwd.postrm, debian/Attic/porttime, debian/Attic/rules, debian/Attic/secure-su.README, debian/Attic/secure-su.conffiles, debian/Attic/secure-su.copyright, debian/Attic/secure-su.postrm, debian/Attic/secure-su.preinst, debian/Attic/securetty, debian/Attic/shadowconfig.sh, debian/Attic/Makefile.am, debian/Attic/changelog, debian/Attic/checksums, debian/Attic/control, debian/Attic/control.gnu, debian/Attic/control.linux, debian/Attic/login.conffiles, Makefile.am, configure.in:
	removed debian directory.

2002-10-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, src/newgrp.c:
	Use CLOSE_SESSIONS depending code only when USE_PAM.
	The problem was reported by Mattias Webjorn Eriksson using Slackware
	8.1 and reproduced it using slackware-current (9.0beta) (fix submited by
	Simon Williams <simon@no-dns-yet.org.uk>).

2002-10-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ja/login.1, man/ja/logoutd.8, man/pl/login.1, man/pl/logoutd.8, man/Attic/login.1, man/Attic/logoutd.8, man/hu/login.1:
	changed utmp and wtmp files paths (s#/etc/utmp/#/var/run/utmp#; s#/etc/wtmp#/var/log/wtmp#)

	* po/ru.po, configure.in: added ru translation (from KSI resources).

2002-09-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, libmisc/failure.c:
	libbmisc/failure.c (too_many_failures): incorrect if() condition in non-PAM
	dependent code in fail login handling (fixed by Krzysztof Oledzki <ole@ans.pl>).

2002-08-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/useradd.8, man/Attic/useradd.8, NEWS:
	document useradd and groupadd -M option in en and pl man pages
	(by Jakub Mikusek <mick3y@o.k.pl>).

	* configure.in: start prepare 4.0.4.

2002-03-18  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/ja/Attic/dpasswd.8, man/ja/Attic/shadowconfig.8, man/ja/chpasswd.8, man/ja/faillog.8, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/id.1, man/ja/lastlog.8, man/ja/login.defs.5, man/ja/newusers.8, man/ja/su.1, man/ja/useradd.8, man/ja/userdel.8, man/ja/usermod.8, man/ja/vipw.8:
	- updated to man-pages-ja-20020315 (except cvs tags)

2002-03-15  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* TODO: - remove already done pl man updates from the list

2002-03-13  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ko/.cvsignore, man/ko/Makefile.am, man/ko/chfn.1, man/ko/chsh.1, man/ko/groups.1, man/ko/id.1, man/ko/login.1, man/ko/newgrp.1, man/ko/passwd.5, man/ko/su.1:
	added ko man pages.

	* man/de/.cvsignore, man/de/Makefile.am:
	automake files for de man pages.

	* TODO: updated.

	* man/it/.cvsignore, man/it/Makefile.am, man/id/.cvsignore, man/id/Attic/adduser.8, man/id/Makefile.am, man/id/useradd.8, man/Makefile.am, man/cs/.cvsignore, man/cs/Makefile.am, man/fr/.cvsignore, man/fr/Makefile.am, configure.in, NEWS:
	added cs, de, fr, id, it, ko man pages to ac/am.

2002-03-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/sv.po, po/uk.po, po/cs.po, po/de.po, po/el.po:
	"make update-po"

	* po/de.po, NEWS, configure.in:
	added de translation (by Frank Schmid <frank@cs-schmid.de>).

	* NEWS: added info about Solar patch for man pages.

2002-03-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/it/usermod.8, man/it/vigr.8, man/it/vipw.8, man/it/Attic/adduser.8, man/it/chfn.1, man/it/chsh.1, man/it/gpasswd.1, man/it/groupadd.8, man/it/groupdel.8, man/it/groupmod.8, man/it/groups.1, man/it/grpck.8, man/it/grpconv.8, man/it/grpunconv.8, man/it/id.1, man/it/lastlog.8, man/it/login.1, man/it/newgrp.1, man/it/passwd.1, man/it/passwd.5, man/it/pwconv.8, man/it/pwunconv.8, man/it/shadow.5, man/it/useradd.8, man/it/userdel.8, man/id/Attic/adduser.8, man/id/chsh.1, man/id/login.1, man/fr/Attic/adduser.8, man/fr/chage.1, man/fr/chpasswd.8, man/fr/chsh.1, man/fr/faillog.5, man/fr/gpasswd.1, man/fr/groups.1, man/fr/id.1, man/fr/newgrp.1, man/fr/passwd.1, man/fr/passwd.5, man/fr/shadow.5, man/fr/su.1, man/fr/useradd.8, man/fr/userdel.8, man/fr/usermod.8, man/es/login.1, man/es/passwd.1, man/es/su.1, man/de/chsh.1, man/de/groups.1, man/de/login.1, man/de/passwd.1, man/de/su.1, man/cs/passwd.5, man/cs/shadow.5:
	added some raw cs, de, es, fr, id, it man pages from national
	man pages translation projects (all man pages not yet added to Makefile.am
	files because all need some work).

	* man/hu/chfn.1, man/hu/id.1:
	added id(1) chfn(1) from hu man pages translation project (it need some work
	because this documents describes GNU version id and chfn from util-linux).

	* man/hu/Makefile.am, man/hu/login.1:
	added login(1) man page from hu man pages translation project.

	* po/POTFILES.in: updated (suath.c moved to src/).

	* src/Makefile.am: added su_SOURCES with "su.c suauth.c".

	* libmisc/Makefile.am:
	remove suauth.c from libmisc_la_SOURCES (varialbles and functions from
	this file are usesd only in su).

	* libmisc/Attic/suauth.c, src/suauth.c: move suauth.c o src/.

	* libmisc/Attic/suauth.c:
	move "struct passwd pwent" outside #ifdef SU_ACCESS.

2002-03-09  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/pl/chage.1, man/pl/chfn.1, man/pl/chsh.1, man/pl/expiry.1, man/pl/gpasswd.1, man/pl/groups.1, man/pl/id.1, man/pl/login.1, man/pl/newgrp.1, man/pl/passwd.1, man/pl/su.1:
	- sync with en versions

	* man/Attic/login.1, man/Attic/newgrp.1, man/Attic/passwd.1, man/Attic/su.1, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chsh.1, man/Attic/expiry.1, man/Attic/gpasswd.1, man/Attic/groups.1, man/Attic/id.1:
	- update to chage.1; formatting/typo fixes

2002-03-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/uk.po, po/ko.po, po/pl.po, po/sv.po, po/ja.po, po/cs.po, po/el.po, po/fr.po:
	"make update-po"

2002-03-09  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/pt_BR/groupadd.8, man/pt_BR/groupdel.8, man/pt_BR/groupmod.8, man/pt_BR/shadow.5, man/pl/userdel.8, man/pl/usermod.8, man/pl/sulogin.8, man/pl/useradd.8, man/pl/pwconv.8, man/pl/su.1, man/pl/Attic/mkpasswd.8, man/pl/Attic/pwauth.8, man/pl/newgrp.1, man/pl/passwd.5, man/pl/login.defs.5, man/pl/chpasswd.8, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmems.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/login.1, man/hu/groups.1, man/hu/newgrp.1, man/ja/Attic/mkpasswd.8, man/ja/Attic/pw_auth.3, man/ja/Attic/pwauth.8, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/groups.1, man/ja/grpck.8, man/ja/id.1, man/ja/lastlog.8, man/ja/login.1, man/ja/login.defs.5, man/ja/newgrp.1, man/ja/passwd.5, man/ja/pwck.8, man/ja/shadow.5, man/ja/su.1, man/ja/sulogin.8, man/ja/useradd.8, man/ja/userdel.8, man/ja/usermod.8, man/ja/vipw.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8:
	- further "SEE ALSO" references sorting

2002-03-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadow.5, man/Attic/su.1, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8, man/Attic/chpasswd.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/login.1, man/Attic/login.defs.5, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.5, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Makefile.am:
	merged shadow-4.0.0-owl-man.patch by Solar Designer <solar@openwall.com>.

	* NEWS: updated for 4.0.3.

	* libmisc/Attic/suauth.c, libmisc/utmp.c, src/login.c, src/su.c:
	swapped utent dnd pwent efinition/extern and now shadow source can be configured
	--with-shared (fix by Dimitar Zhekov <jimmy@is-vn.bg>).

2002-03-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: start prepare 4.0.3.

	* src/Makefile.am:
	use ln -sf instead ln -s in install-exec-hok (fix pointed by Dimitar Zhekov
	<jimmy@is-vn.bg>).

2002-03-02  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/pl/passwd.1: sync with en version

	* man/Attic/passwd.1: - they -> his/her, user's
	- typos
	- fix sentence about "writing down"

	* man/Attic/passwd.1: relocation by NAKANO Takeo

2002-02-28  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/hu/passwd.1: missing "-"

	* man/ja/Attic/shadowconfig.8, man/ja/passwd.5, man/ja/shadow.5:
	- updated to man-pages-ja-20020215

2002-02-23  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* po/cs.po, po/fr.po, po/pl.po, po/sv.po, po/uk.po, man/pl/useradd.8:
	- typos in pl/useradd.8; commented out unsupported -r option description
	- useradd "usage" formatting fixes
	- fix translation in uk.po

2002-02-18  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: release 4.0.2.

2002-02-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* Attic/shadow-utils.spec.in, Makefile.am, configure.in, shadow.spec.in:
	rename spec file s/shadow-utils.spec/shadow.spec/

	* po/cs.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/sv.po, po/uk.po:
	update-po before release.

	* po/ko.po, po/pl.po: cleanups.

2002-02-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/Attic/adduser.8, man/pl/grpconv.8, man/pl/grpunconv.8, man/pl/pwunconv.8, man/pl/sg.1, man/pl/vigr.8, man/ja/Attic/adduser.8, man/ja/grpconv.8, man/ja/grpunconv.8, man/ja/pwunconv.8, man/ja/sg.1, man/ja/vigr.8, man/hu/sg.1, man/Attic/adduser.8, man/Attic/grpconv.8, man/Attic/grpunconv.8, man/Attic/pwunconv.8, man/Attic/sg.1, man/Attic/vigr.8:
	placa ".so man<level>/<man_page>.<level>" in roff .so includes (seems some
	man page viewers do not handles correctly man documents without subdirectory
	name in roff .so incude).

2002-01-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/sv.po, po/uk.po, po/cs.po, po/el.po, NEWS:
	resolve many fuzzy translations also all this which may cause problems on
	displaing long uid/gid.

	* src/id.c, po/ko.po, po/pl.po, po/sv.po, po/uk.po, po/cs.po, po/el.po, po/fr.po, po/ja.po:
	drop translate some messages in id output (about {,e}{u,g}id).

2002-01-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* README: s#password: cvs#password: [empty password]#

2002-01-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: two new entries.

	* libmisc/chkname.c (good_name):
	allow usernames ending with "$" for allow create machine
	acounts for samba (thanks for point this problem in 4.0.1 by
	Jerome Borsboom <borsboom@tch.fgg.eur.nl>).

	* src/pwck.c, src/useradd.c, po/pl.po, po/sv.po, po/uk.po, po/cs.po, po/el.po, po/fr.po, po/ja.po, po/ko.po:
	s/invalid user name `%s'/invalid user name '%s'/

2002-01-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in:
	fix in libpam_misc detection (removed one "," AC_CHECK_LIB()).
	Thanks to Silvan Minghetti for report this.

2002-01-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: start prepare to 4.0.2.

	* po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/sv.po, po/uk.po, po/cs.po:
	updated.

	* configure.in: It is good time to release 4.0.1.

	* libmisc/.indent.pro, lib/.indent.pro: added -pcs option.

	* TODO: some things goes out other in.

	* src/newgrp.c, NEWS:
	added ability to log session closes in newgrp (look at long nice comments
	inside source code :_) by Joseph Parmelee <jparmele@wildbear.com>.

	* src/groupadd.c, src/useradd.c:
	next part fixes for handle long UID/GID (by Thorsten Kukuk <kukuk@suse.de>).

	* lib/getdef.c, lib/getdef.h:
	adeded getdef_unum(): get unsigned numerical value from table of
	definitions (Thorsten Kukuk <kukuk@suse.de>).

	* NEWS: updated.

	* libmisc/isexpired.c:
	remove "#if defined(SHADOWPWD)" (not removed during remove AGING).

	* etc/Makefile.am: useradd config file added to EXTRA_DIST.

2002-01-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/sv.po, po/uk.po, po/cs.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po:
	update.

	* src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, src/vipw.c, src/.indent.pro, src/Attic/dpasswd.c, src/Attic/mkpasswd.c, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupmems.c, src/groupmod.c, src/groups.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/id.c, src/lastlog.c, src/login.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c:
	Add -pcs to .indent.pro file and reindent all code.
	Remove "\n" from all SYSLOG() messages.

	* NEWS: s/SuSe/SuSE/

2001-12-22  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/useradd.8, man/Attic/useradd.8: documment -o option.

	* man/pl/usermod.8, man/pl/chfn.1, man/pl/chsh.1, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/id.1, man/pl/login.1, man/pl/newgrp.1, man/pl/passwd.1, man/pl/su.1, man/pl/useradd.8, man/pl/userdel.8:
	correct package name (s/shadow-password/shadow/).

	* src/chage.c, src/expiry.c, src/login.c, src/passwd.c, src/su.c, libmisc/age.c, libmisc/isexpired.c, NEWS, configure.in:
	Finish integrate AGING code into SHADOWPW.
	Remove handle old HAVE_USERSEC_H code.

	* po/uk.po: typo.

	* man/pl/passwd.1, man/ja/passwd.1, man/Attic/chpasswd.8, man/Attic/dpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1:
	cleanups.

	* src/Attic/dpasswd.c, src/Attic/mkpasswd.c, src/expiry.c, src/grpck.c, src/id.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/chfn.c, src/chsh.c, po/ja.po, po/ko.po, po/pl.po, po/sv.po, po/uk.po, po/cs.po, po/el.po, po/fr.po, man/Attic/useradd.8:
	standarize usage messages syntax.

	* man/pl/useradd.8, man/pl/usermod.8, man/pl/vipw.8, man/pl/userdel.8:
	removed duplicated man page text.

	* src/chage.c, po/ja.po, po/ko.po, po/pl.po, po/sv.po, po/uk.po, po/cs.po, po/el.po, po/fr.po:
	standarize usage meissages syntax.

	* src/chage.c, NEWS (main):
	merge part Solar shadow-4.0.0-owl-pam-auth.diff patch with reorder
	nitialize PAM and checkin is chage is runed by root or not - now chage can be
	runed from non-root account for checking by user own accout information.

	* src/pwck.c: indent source.

	* src/pwck.c (main): remove old work around for Slackware bug.

2001-12-20  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/ja/Attic/adduser.8, man/ja/Makefile.am, man/ja/limits.5, man/ja/pwconv.8:
	- updated to man-pages-ja-20011215

2001-11-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/grpck.c:
	remove check for a Slackware bug (make sure GID is not -1; it was special
	meaning for some syscalls).

	* src/newgrp.c, src/pwck.c, src/su.c, src/useradd.c, src/usermod.c, src/groupadd.c, src/groupmod.c, src/id.c, NEWS:
	fixes for handle/print correctly 32bit uid/gid (Thorsten Kukuk <kukuk@suse.de>).

	* src/chage.c: - break usage vomment line.

	* lib/defines.h:
	removed bunch spaces on end line in conditionale #include <errno.h>
	which in some cases dissallow compile correctly shadow (thanks for
	Silvan Minghetti <bullet@users.sourceforge.net>).

2001-11-17  Michał Moskal  <malekith@pld.org.pl>

	* NEWS:
	- mention fix for SEGV when using pwck -s on /etc/passwd file with
	  empty lines in it

	* lib/commonio.c:
	- installed fix for SEGV when using pwck -s on /etc/passwd file with
	  empty lines in it

2001-11-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/chkname.c, NEWS:
	next merge from Solar patches (shadow-4.0.0-owl-check_names.diff) but only
	part this patch with checking login name matching; checking is login
	string isn't longer than possible probably it will be good prepare using
	_POSIX_LOGIN_NAME_MAX from <bits/posix1_lim.h>

2001-11-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: typos.

	* NEWS: added info about new hu man pages.

	* NEWS: updated.

2001-11-16  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* man/ja/Attic/pw_auth.3, man/ja/Attic/pwauth.8, man/ja/passwd.5, man/ja/porttime.5, man/ja/pwck.8, man/ja/shadow.3, man/ja/shadow.5, man/ja/su.1, man/ja/suauth.5, man/ja/sulogin.8, man/ja/userdel.8, man/ja/usermod.8, man/ja/Attic/dpasswd.8, man/ja/Attic/mkpasswd.8, man/ja/Makefile.am, man/ja/chage.1, man/ja/chfn.1, man/ja/chpasswd.8, man/ja/chsh.1, man/ja/faillog.5, man/ja/faillog.8, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/grpck.8, man/ja/lastlog.8, man/ja/login.1, man/ja/login.access.5, man/ja/login.defs.5, man/ja/logoutd.8, man/ja/newgrp.1, man/ja/passwd.1:
	- updated to man-pages-ja-20011115.tar.gz

	* man/ja/groups.1: 3c26de91cfd359c0b7c36ca3cd3e170d  groups.1

	* man/ja/grpconv.8: 402190c04b8df45e20afd01e3acd0da4  grpconv.8

	* man/ja/grpunconv.8: 402190c04b8df45e20afd01e3acd0da4  grpunconv.8

	* man/ja/id.1: 3edc687b1c09bbdd170553f326a71711  id.1

	* man/ja/newusers.8: c2ecaa6ddffe07de2c39be3aefb5bcae  newusers.8

	* man/ja/pwunconv.8: 402190c04b8df45e20afd01e3acd0da4  pwunconv.8

	* man/ja/Attic/shadowconfig.8:
	f79300c0db64fd961443177c88605087  shadowconfig.8

	* man/ja/useradd.8: 3333b9a2e5a388a472fb05106d65a596  useradd.8

	* man/ja/vigr.8: 42825938683e54e391897ea100001af1  vigr.8

	* man/ja/vipw.8: 0cb8db0f1f19de7690f0ef9baeceb919  vipw.8

2001-11-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/Attic/getpass.c:
	one fix warning from Solar shadow-4.0.0-owl-warnings.diff.

	* src/chage.c, lib/defines.h:
	move "#include <errno.h>" to /lib/defines.h.

	* configure.in: added AC_CHECK_HEADERS(errno.h)

	* src/chage.c: apply shadow-4.0.0-owl-chage-drop-priv.diff and
	shadow-4.0.0-owl-chage-ro-no-lock.diff by Solar Designer <solar@openwall.com>.
	Added locks which are needed when doing r/w accesses, not when running as root.
	If root does read-only, there's no lock needed. Added missing
	"#include <errno.h>" for above.

2001-11-14  Andrzej Krzysztofowicz  <ankry@pld.org.pl>

	* configure.in: - added hu directory antry

	* man/Makefile.am: - groups.1 moved to EXTRA_DIST
	- added hu directory entry

	* man/ja/Makefile.am: - sorted
	- shadow.3 moved to EXTRA_DIST

	* man/pl/Makefile.am: - sorted
	- added entries for new pages
	- EXTRA_DIST synced with man/Makefile.am

	* man/hu/Makefile.am, man/hu/chsh.1, man/hu/gpasswd.1, man/hu/groups.1, man/hu/newgrp.1, man/hu/passwd.1, man/hu/sg.1:
	- man pages from Debian

	* man/Attic/groupmems.8: - typo

	* man/pl/expiry.1, man/pl/groupmems.8: - translated pages

2001-11-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/Makefile.am:
	fix building with cracklib enabled: $(LIBCRACK) added to libmisc_la_LIBADD.

	* src/useradd.c: typo.

2001-11-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Attic/dpasswd.c, src/gpasswd.c, src/groupadd.c, src/groupmod.c, src/grpck.c, src/lastlog.c, src/login.c, src/passwd.c, src/pwck.c, src/userdel.c, src/usermod.c, src/chage.c, src/chfn.c, src/chsh.c, libmisc/utmp.c:
	removed prototypes which are defined in libc header files
	(Thorsten Kukuk <kukuk@suse.de>).

	* libmisc/Attic/nscd.c, libmisc/Makefile.am, lib/commonio.c:
	implemetn better reloading the nscd cache (per NSS map)
	by Thorsten Kukuk <kukuk@suse.de>

	* src/login.c, libmisc/setupenv.c:
	fixed warnings "not used but defined" on compile using gcc 3.0.x
	by bulletpr00ph <bullet@users.sourceforge.net>.

2001-10-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: New entries for 4.0.1.

	* po/pl.po: few more pl translations.

	* po/cs.po, po/el.po, po/fr.po, po/ja.po, po/ko.po, po/pl.po, po/sv.po, po/uk.po:
	"make update-po".

	* po/ja.po, po/ko.po, configure.in:
	added ja, ko translations found in SuSe.

2001-10-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c: sort alphabetically *flg variables.

	* debian/Attic/Makefile.am, debian/Attic/tar.c: removed.

2001-10-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/ja/Makefile.am, man/ja/sg.1, man/pl/Makefile.am, man/pl/sg.1, man/pl/vigr.8, man/Attic/sg.1, man/Attic/vigr.8, man/Makefile.am:
	added vigr(1) man page as roff .so link to vipw(1),                                                                             - added sg(1) man page as roff .so link to newgrp(1).

	* src/Makefile.am:
	added install symlinks newgrp -> sg, vipw -> vigr in install-exec-hook target.

2001-10-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* lib/Makefile.am (libshadow_la_SOURCES):
	reverte last change and added rcsid.h,
	(EXTRA_DIST): added missing "\".

	* src/Makefile.am: (DEFS):
	- fix -DLOCALEDIR in DEFS,
	- added -DHAVE_CONFIG_H,
	- removed @DEFS@.

	* lib/Makefile.am:
	added missing shadow_.h file to libshadow_la_SOURCES.

2001-09-08  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* Makefile.am (AUTOMAKE_OPTIONS):
	version changed to 1.5 and added dist-bzip2.

	* lib/Makefile.am, libmisc/Makefile.am, src/Makefile.am:
	add .indent.pro to EXTRA_DIST.

	* etc/Makefile.am, etc/useradd: add example /etc/defaults/useradd.

2001-09-07  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* TODO: last touch.

	* TODO: more TODO.

	* lib/commonio.c, NEWS:
	Fix bug discovered and fixed by Marcel Ritter <Marcel.Ritter@rrze.uni-erlangen.de>
	Due to a big buffer size in lib/commonio.c this error does only appear
	if a line gets longer than 4096 bytes (there are probably very few people
	stumbling across this).
	Ths bug can be exposed by trashing /etc/groups file using useradd with script:
		#!/bin/sh
		typeset -i NUM
		NUM=0
		groupadd demogroup
		while [ $NUM -le 1000 ]; do
		   useradd -g demogroup -G demogroup -p "NONE" user$NUM
		   NUM=$NUM+1
		done

2001-09-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/groups.c, src/id.c, src/newgrp.c, src/useradd.c, src/usermod.c, libmisc/addgrps.c, NEWS:
	remove limit 32 to groups per user (the same user can belong to
	more than 32 groups) by use sysconf(_SC_NGROUPS_MAX) instead constant
	NGROUPS_MAX (patch by Radu Constantin Rendec <radu.rendec@ines.ro>)
	NOTE: it probably need testing on other system for add some conditionals
	for using sysconf(_SC_NGROUPS_MAX) or NGROUPS_MAX constant.

2001-08-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* etc/pam.d/Makefile.am, etc/pam.d/useradd: added file for useradd.

2001-08-24  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c (set_defaults):
	handle correctly error open/create useradd default config
	filei (based on orginal post to bugtraq).

	* TODO: documment in pt_BR, ja man pages -s {pw,grp}ck option.

	* libmisc/sulog.c, NEWS:
	remove limit to 6 chars logged tty name (apply 012_libmisc_sulog.c.diff Debian
	patch).

	* man/pl/Attic/shadowconfig.8, man/Attic/shadowconfig.8:
	- aply 021_man_shadowconfig_usr_doc.diff debian patch.

	* src/Makefile.am, lib/Makefile.am:
	use $(top_builddir) in .la files paths (for allow correct compile if
	$(top_builddir) isn't the same as $(top_srcdir)).

	* po/.cvsignore, po/Attic/ChangeLog: removed ChangeLog.

2001-08-18  Michał Moskal  <malekith@pld.org.pl>

	* src/grpck.c: - fixed getopt() call, thnx to arekm

2001-08-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: - include last changes to list changes in version 4.0.0.

2001-08-14  Michał Moskal  <malekith@pld.org.pl>

	* NEWS: - mention new -s options

	* man/pl/grpck.8, man/pl/pwck.8, man/Attic/grpck.8, man/Attic/pwck.8:
	- documented new -s options

	* src/grpck.c, src/pwck.c: - added -s option to sort output files

	* lib/groupio.c, lib/groupio.h, lib/pwio.c, lib/pwio.h, lib/sgroupio.c, lib/sgroupio.h, lib/shadowio.c, lib/shadowio.h:
	- added pw_sort, gr_sort, sgr_sort and spw_sort functions

	* lib/commonio.c, lib/commonio.h:
	- added commonio_sort{,_wrt} functions

2001-08-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/Attic/ChangeLog, po/uk.po, configure.in:
	added uk translation (Roman Festchook <roma@polesye.net>).

	* src/logoutd.c (mani):
	s/ut->ut_libe/ut->ut_user/ on prepare strin with user name for syslog
	line (reported by Roman Festchook <roma@polesye.net>).

2001-07-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* Attic/acconfig.h: - added missing USG.

2001-07-04  Marek Michałkiewicz  <marekm@pld.org.pl>

	* lib/commonio.c:
	fix buffer overflow (not a security hole) in commonio_setname

2001-06-28  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS: entry about dropping support one argument pam_strerror().

	* libmisc/pam_pass.c, src/login.c, src/su.c, Attic/acconfig.h, configure.in, lib/defines.h, lib/pam_defs.h:
	drop detecting is pam_strerror() need one or two arguments. Instead using
	PAM_STRERROR() macro use directly pam_strerror() function with two arguments.
	pam_strerror() with one argument is obsoleted.

	* configure.in:
	pass display error message if libpam_misc not found in correct argument
	AC_CHECK_LIB().

	* configure.in:
	added checking for libpam_misc if libpam found and if libpam_misc is avalaible
	add them to $LIBPAM. Othervise exit fron autoconf script with error message.
	Now shadow compiles if pam support is enabled.

2001-06-28  Marek Michałkiewicz  <marekm@pld.org.pl>

	* libmisc/copydir.c: fix overwriting existing file (add O_TRUNC)

2001-06-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* configure.in: remove intl/po2tbl.sed from AC_OUTPUT().

	* configure.in:
	removed add md5.o md5crypt.o conditionaly to $LIBOBJS (this is obsoleted).
	In current version ndling md5 functionality is included conditionaly
	inside md5.c and md5crypt.c source files.

	* lib/Attic/md5.c: added comments for #endif.

	* configure.in: also do not use SU_ACCESS when PAM is used.

	* configure.in:
	- check pam directly by AC_CHECK_LIB() (PAM from PLD is now fixed an also other
	  PAM implementation must be fixed for this method checkin is libpam is avalaible;
	  sorry .. no way this is plain linking procedure bug),
	- use AC_DEFINE(LOGIN_ACCES) only when PAM isn't used.

2001-06-23  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/Makefile.am:
	add LDADD for groupmod and usermod, as they use PAM too

	* src/login.c, src/su.c: fix uninitialized variable failcount
	skip '*' in pw_shell for subsystem root

2001-06-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/login.c: use "extern int login_access()" only if !USE_PAM.

	* src/Makefile.am:
	added LDADD rules for programs which uses PAM and cracklib.

2001-06-23  Marek Michałkiewicz  <marekm@pld.org.pl>

	* libmisc/chowntty.c:
	allow root login even on read-only root filesystem

	* libmisc/Makefile.am: add -DHAVE_CONFIG_H to DEFS

2001-06-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* autogen.sh: run configure by default with --disable-desrpc,
	fix: --with-libpam (not --with-pam).

2001-06-23  Marek Michałkiewicz  <marekm@pld.org.pl>

	* libmisc/chowntty.c:
	libmisc/chowntty.c (chown_tty): move perror() before syslog() call
	which might change errno.

	* man/pl/login.defs.5, man/Attic/login.defs.5:
	(UMASK): Default value is 077, not 0 - see NEWS for shadow-3.3.2-951106.

2001-06-23  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* NEWS, configure.in: prepare for release 4.0.0 version.

	* configure.in: remove commented line.

2001-06-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/pl.po: fixed charset (must be iso-8859-2).

	* man/Makefile.am, man/ja/.cvsignore, man/ja/Attic/dpasswd.8, man/ja/Attic/mkpasswd.8, man/ja/Attic/pw_auth.3, man/ja/Attic/pwauth.8, man/ja/Makefile.am, man/ja/chage.1, man/ja/chfn.1, man/ja/chpasswd.8, man/ja/chsh.1, man/ja/faillog.5, man/ja/faillog.8, man/ja/gpasswd.1, man/ja/groupadd.8, man/ja/groupdel.8, man/ja/groupmod.8, man/ja/grpck.8, man/ja/lastlog.8, man/ja/login.1, man/ja/login.access.5, man/ja/login.defs.5, man/ja/logoutd.8, man/ja/newgrp.1, man/ja/passwd.1, man/ja/passwd.5, man/ja/porttime.5, man/ja/pwck.8, man/ja/pwconv.8, man/ja/shadow.3, man/ja/shadow.5, man/ja/su.1, man/ja/suauth.5, man/ja/sulogin.8, man/ja/userdel.8, man/ja/usermod.8, configure.in, NEWS:
	added ja man pages.

2001-05-30  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/Attic/shadowconfig.sh, src/Makefile.am, debian/Attic/Makefile.am, debian/Attic/shadowconfig.sh:
	move shadowconfig.sh to debian/

	* src/Makefile.am: added missing -I${top_srcdir} to INCLUDES.

	* lib/Makefile.am: empty DEFS and INCLUDES="-I$(top_srcdir)".

	* libmisc/Makefile.am:
	empty DEFS and INCLUDES="-I$(top_srcdir) -I$(top_srcdir)/lib".

2001-03-05  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/.indent.pro, lib/.indent.pro, libmisc/.indent.pro:
	directory indent config file is -kr -i8 -bad (indent open this file and
	read options if options not specyfied in commnad line).

	* autogen.sh (conf_flags): added --with-pam.

	* NEWS: start complette next release information.

2001-02-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* shlib/Attic/Makefile.am, shlib/Attic/Makefile.in.saved: - removed.

	* src/Makefile.am, libmisc/Makefile.am, lib/Makefile.am:
	Rewrited automake suit for building lib, libmisc and src (now this look much
	better). Also for all is now used libtool in proper way.

	* configure.in:
	- added useing AM_DISABLE_SHARED, AM_ENABLE_STATIC for disable compile shared
	  libraries and enable static,
	- some cosmetics.

	* Makefile.am (SUBDIRS): reorder libmisc must be before lib.

2001-02-01  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pt_BR/Makefile.am: - added man_MANS to EXTRA_DIST.

2001-01-31  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/Makefile.am, man/pt_BR/Makefile.am, man/pt_BR/gpasswd.1, man/pt_BR/groupadd.8, man/pt_BR/groupdel.8, man/pt_BR/groupmod.8, man/pt_BR/shadow.5, configure.in:
	include pt_BR man pages for gpasswd(1), groupadd(1), groupdel(8),
	groupmod(8), shadow(5).

2001-01-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* TODO: - updated.

	* man/pl/Attic/dpasswd.8, man/pl/chage.1, man/pl/chfn.1, man/pl/chpasswd.8, man/pl/chsh.1, man/pl/faillog.5, man/pl/faillog.8, man/pl/gpasswd.1, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/lastlog.8, man/pl/login.1, man/pl/newgrp.1, man/pl/newusers.8, man/pl/passwd.1, man/pl/su.1, man/pl/useradd.8, man/pl/userdel.8, man/pl/vipw.8, man/Attic/dpasswd.8, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/su.1, man/Attic/useradd.8, man/Attic/usermod.8, man/Attic/vipw.8:
	many small cleanups, fixes also removed commented obsoleted texts.

2001-01-25  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* autogen.sh: add to conf_flags --disable-shared.

	* man/pl/Attic/d_passwd.5, man/pl/Attic/dialups.5, man/pl/Attic/dpasswd.8, man/pl/Attic/mkpasswd.8, man/pl/Attic/pw_auth.3, man/pl/Attic/pwauth.8, man/pl/Attic/shadowconfig.8, man/pl/chage.1, man/pl/chfn.1, man/pl/chpasswd.8, man/pl/chsh.1, man/pl/faillog.5, man/pl/faillog.8, man/pl/gpasswd.1, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/lastlog.8, man/pl/limits.5, man/pl/login.1, man/pl/login.access.5, man/pl/login.defs.5, man/pl/logoutd.8, man/pl/newgrp.1, man/pl/newusers.8, man/pl/passwd.1, man/pl/passwd.5, man/pl/porttime.5, man/pl/pwck.8, man/pl/pwconv.8, man/pl/shadow.3, man/pl/shadow.5, man/pl/su.1, man/pl/suauth.5, man/pl/sulogin.8, man/pl/useradd.8, man/pl/userdel.8, man/pl/usermod.8, man/pl/vipw.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/shadowconfig.8, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/vipw.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/expiry.1, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmems.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/limits.5, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8:
	put or move to top cemmented Id cvs keyword,
	(passwd.1): documment -e option (patch from Debian),
	(userdel.1): remove commented obsoleted options.

	* man/Makefile.am:
	put all files in man_MANS and EXTRA_DIST in alphabethic order.

	* src/chpasswd.c, src/pwunconv.c:
	remove from comments program description and history logs.

	* src/Makefile.am: move groups to bin_PROGRAMS.

2000-12-19  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/su.c: Based on Debian modyfications:
	(main): #endif /* USE_PAM */ #ifdef USE_PAM replaced by #else,
	(main): removed some dead code (scoped by #if 0 .. #endif).
	(main): call to re-establish SIGINT to right place.

	* man/pl/passwd.1: Removed SEE ALSO to shadow(3) and passwd(3).

	* man/pl/shadow.5, man/Attic/shadow.5: Removed SEE ALSO to shadow(3).

	* man/Attic/passwd.1:
	Removed SEE ALSO to passwd(3) and commented shadow(3).

2000-12-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/useradd.c (main):
	use "useradd" instead "shadow in pam_start() parameters - this
	allow use separated pam config file for useradd (for example for allow
	specified non-root user for add user).

2000-11-29  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* TODO: remove write expiry(1) man page.

	* man/Attic/expiry.1, man/Makefile.am:
	added expiry(1) man page from Debian.

	* man/pl/lastlog.8, man/Attic/lastlog.8:
	updated man pages for whole dispaly syntax.

	* src/lastlog.c (main): fixed command line syntax description.

	* src/lastlog.c (main):
	display correctly and full current commnad line lastlog syntax
	and also output this string using gettext.

	* src/lastlog.c (main):
	merge src_lastlogin.c patch from debian with use getopt_long()
	instead getopt() for add handling --help, --user, --time switches and
	dipslay useage message on -h, --help and as default action.

2000-11-17  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* src/groupmems.c, po/el.po, po/fr.po, po/pl.po, po/sv.po, po/POTFILES.in, po/cs.po:
	added i18n support for src/groupmems.c.

	* src/useradd.c:
	* (set_defaults): use mkstemp() if avalaible. Othereise use mktemp().

	* configure.in: * added checking for mkstemp().

	* src/useradd.c: * (set_defaults): use mkstemp() instead mktemp(),
	* (mani): fix compilation error in previouse RH patch (removed using nflg).

2000-11-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* TODO: - groupmems need some work on add PAM and i18n support.

	* src/groupmems.c, man/Attic/groupmems.8:
	Added raw version groupmems program for administer members of a user's
	primary group. groupmems was written by George Kraft IV <gk4@us.ibm.com>
	and this tool have BSD license.

	* src/Attic/patchlevel.h, src/Makefile.am:
	patchlevel.h, Makefile.am: removed patchlevel.h file,
	Makefile.am: removed bindir, sbindir (this comes with autoconf).

2000-11-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* TODO: - write expire man page.

2000-10-16  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* old/Attic/pwconv-old.8, old/Attic/pwconv.8, old/Attic/pwunconv-old.8, old/Attic/pwunconv.8, man/pl/Attic/mkpasswd.8, man/pl/Attic/pw_auth.3, man/pl/Attic/pwauth.8, man/pl/login.defs.5, man/pl/logoutd.8, man/pl/newgrp.1, man/pl/newusers.8, man/pl/passwd.1, man/pl/porttime.5, man/pl/pwck.8, man/pl/shadow.3, man/pl/su.1, man/pl/sulogin.8, man/pl/useradd.8, man/pl/userdel.8, man/pl/usermod.8, man/pl/Attic/dpasswd.8, man/pl/chage.1, man/pl/chfn.1, man/pl/chpasswd.8, man/pl/chsh.1, man/pl/faillog.5, man/pl/faillog.8, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmod.8, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/lastlog.8, man/pl/login.1, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, debian/Attic/login.copyright, debian/Attic/passwd.copyright, debian/Attic/secure-su.copyright, doc/Attic/ANNOUNCE, doc/Attic/LSM, doc/Attic/README, doc/Attic/README.linux:
	Julianne F. Haugh new contact adress.

	* NEWS: - summary chanfes for 20001016.

	* doc/Attic/README.shadow-paper, doc/Makefile.am:
	- removed outdated README.shadow-paper.

	* configure.in: - release 20001016.

2000-10-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/Makefile.am, man/Makefile.am: fixes in man/{,po}/Makefile.am:
	- $(man_MANS) added to EXTRA_DISTS,
	- do not install by default groups.1, id.1, pw_auth.3, shadow.3, pwauth.8,
	  sulogin.8, dpasswd.8 (moved to EXTRA_DISTS),

2000-10-15  Marek Michałkiewicz  <marekm@pld.org.pl>

	* lib/commonio.c (reload_nscd): Disable for now because not every
	version of nscd can handle it, unless ENABLE_NSCD_SIGHUP defined.

2000-10-15  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* libmisc/pwdcheck.c, libmisc/Makefile.am: - added missing pwdcheck.c.

	* configure.in: - removed old/Makefile from AC_OUTPUT list.

2000-10-12  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* README: - fixed information about RO cvs access.

	* NEWS: - summary changes description for shadow-20001012.

	* configure.in: - release changed to 20001012.

	* etc/Makefile.am: - removed shells and suauth from EXTRA_DIST.

	* doc/Makefile.am: - removed README.debian from EXTRA_DIST.

	* libmisc/Makefile.am: - removed pwdcheck.c from libmisc_a_SOURCES.

	* debian/Attic/Makefile.am: - removed FILES from EXTRA_DIST.

	* contrib/Makefile.am: - s/udbachk.v012.tgz/udbachk.tgz/

	* doc/Makefile.am: - removed CHANGES (this file was moved to ../NEWS).

2000-10-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/Attic/ChangeLog: - add empty file (gettext requires this).

2000-10-10  Arkadiusz Miśkiewicz  <misiek@pld.org.pl>

	* README: typos fixed

2000-10-10  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* Makefile.am: - added shadow-utils.spec.in to EXTR_DIST.

	* redhat/Attic/shadow-utils.spec.in: - obsoleted.

	* Attic/stamp-h.in: - removed (this file is autogenerated by autoconf).

	* po/pl.po, po/sv.po, po/cs.po, po/el.po, po/fr.po:
	- update before release.

	* doc/Attic/LSM: - new maintainer and new primary site.

	* Makefile.am: - README added to EXTRA_DIST.

	* README: - added README with all shadow sites and resources details.

	* Attic/shadow-utils.spec.in: - partialy rewrited.

	* configure.in: - change version to 20001010.

	* Makefile.am: - added NEWS to EXTRA_DIST.

	* Makefile.am, TODO: - added TODO.

	* doc/Attic/CHANGES, NEWS: - rename doc/CHANGES -> NEWS.

2000-10-09  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* redhat/Attic/Makefile.am, redhat/Attic/README, redhat/Attic/shadow-970616-fix.patch, redhat/Attic/shadow-970616-glibc.patch, redhat/Attic/shadow-970616-rh.patch, redhat/Attic/shadow-970616-utuser.patch, redhat/Attic/shadow-970616.login.defs, redhat/Attic/shadow-970616.useradd, redhat/Attic/shadow-utils-970616.spec, Attic/shadow-utils.spec.in, Makefile.am, configure.in:
	- remove redhat/ directory with obsoleted files.

	* po/.cvsignore, src/.cvsignore, man/.cvsignore, man/pl/.cvsignore, .cvsignore, libmisc/.cvsignore:
	- shut up cvs.

	* man/Makefile.am: - removed redundant ${man_MANS} from EXTRA_DIST.

	* src/useradd.c:
	- fix a security bug (adduser could overwrite previously existing
	  groups (shadow-19990827-group.patch from RH),

	* po/cs.po, po/el.po, po/fr.po, po/pl.po, po/sv.po:
	- "make updated-po".

	* man/pl/Makefile.am, man/pl/grpconv.8, man/pl/grpunconv.8, man/pl/pwunconv.8, man/Attic/grpconv.8, man/Attic/grpunconv.8, man/Attic/pwunconv.8, man/Makefile.am:
	- added man pages for grpconv(8), grpunconv(8), pwunconv(8) (.so link to
	  pwconv(8))

	* man/pl/Attic/adduser.8, man/pl/Makefile.am, man/Attic/adduser.8, man/Makefile.am:
	- added man page for adduser(8) (.so link to useradd(8)).

	* po/Attic/doit:
	- removed (in po/Makefile.in.in exist special update-po target).

	* etc/pam.d/passwd, etc/pam.d/su: - cosmetics.

	* etc/pam.d/Attic/shadow: - sample PAM config file for shadow utils.

	* etc/pam.d/Makefile.am: - added shadow to EXTRA_DIST

	* src/chpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/newusers.c, src/useradd.c, src/userdel.c, src/usermod.c:
	- bind to shadow PAM file instead userdb (mainly PAMimication all shadow
	  utils is used for proper updating db files but in real this can be used
	  for perform many other tasks).

	* src/Makefile.am: - added linking with @LIBPAM@ all PAMified tools.

	* src/chpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/newusers.c, src/useradd.c, src/userdel.c, src/usermod.c:
	- added PAM support (bind to common "userdb" PAM authentication description
	  file).

	* src/chage.c: - added PAM support.

2000-10-06  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* autogen.sh:
	- added autogen.sh script which prepare raw source code from cvs to use.

2000-10-04  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* man/pl/useradd.8, man/pl/userdel.8, man/pl/usermod.8, man/pl/vipw.8:
	- merged changes from PTM.

	* man/pl/Makefile.am:
	- simplified: use only man_MANS and remaped $(mandir) variable.

2000-09-27  Tomasz Kłoczko  <kloczek@pld.org.pl>

	* po/cs.po, configure.in:
	- added cs translation (Jiri Pavlovsky <Jiri.Pavlovsky@ff.cuni.cz>).

2000-09-05  Marek Michałkiewicz  <marekm@pld.org.pl>

	* man/pl/sulogin.8, man/pl/vipw.8, po/el.po, po/fr.po, po/pl.po, po/sv.po, man/pl/Attic/d_passwd.5, man/pl/Attic/dialups.5, man/pl/Attic/dpasswd.8, man/pl/Attic/mkpasswd.8, man/pl/Attic/pw_auth.3, man/pl/Attic/pwauth.8, man/pl/Attic/shadowconfig.8, man/pl/chage.1, man/pl/chfn.1, man/pl/chpasswd.8, man/pl/chsh.1, man/pl/faillog.5, man/pl/faillog.8, man/pl/gpasswd.1, man/pl/groups.1, man/pl/grpck.8, man/pl/id.1, man/pl/lastlog.8, man/pl/limits.5, man/pl/login.1, man/pl/login.access.5, man/pl/login.defs.5, man/pl/logoutd.8, man/pl/newgrp.1, man/pl/newusers.8, man/pl/passwd.1, man/pl/passwd.5, man/pl/porttime.5, man/pl/pwck.8, man/pl/pwconv.8, man/pl/shadow.3, man/pl/shadow.5, man/pl/su.1, man/pl/suauth.5:
	*** empty log message ***

2000-09-02  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/groupmod.c, src/grpck.c, src/login.c, src/logoutd.c, src/newgrp.c, src/passwd.c, src/pwck.c, src/su.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, lib/commonio.h, lib/defines.h, lib/groupio.c, lib/pwio.c, lib/sgroupio.c, lib/shadowio.c, man/Attic/usermod.8, po/el.po, po/fr.po, po/pl.po, po/sv.po, redhat/Attic/shadow-utils.spec.in, src/Attic/dpasswd.c, src/chage.c, src/chfn.c, src/chsh.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, configure.in, debian/Attic/rules, doc/Attic/CHANGES, doc/Attic/LSM, lib/commonio.c:
	*** empty log message ***

2000-08-26  Marek Michałkiewicz  <marekm@pld.org.pl>

	* contrib/Makefile.am, contrib/groupmems.shar, doc/Attic/LSM, po/el.po, po/fr.po, po/pl.po, po/sv.po, doc/Attic/README.mirrors, src/vipw.c, src/Attic/dpasswd.c, src/Attic/mkpasswd.c, src/Makefile.am, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/groups.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/id.c, src/lastlog.c, src/login.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, lib/Attic/dialchk.h, lib/Attic/dialup.h, lib/Attic/rad64.c, lib/Attic/tcfsio.h, lib/Makefile.am, lib/commonio.c, lib/commonio.h, lib/defines.h, lib/encrypt.c, lib/getdef.c, lib/getdef.h, lib/groupio.c, lib/groupio.h, lib/prototypes.h, lib/pwauth.c, lib/pwio.c, lib/pwio.h, lib/sgroupio.c, lib/sgroupio.h, lib/shadowio.h, libmisc/Attic/suauth.c, libmisc/chkname.h, libmisc/chowndir.c, libmisc/copydir.c, libmisc/entry.c, libmisc/failure.h, libmisc/getdate.h, libmisc/hushed.c, libmisc/loginprompt.c, libmisc/setupenv.c, libmisc/sulog.c, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Makefile.am, man/pl/Makefile.am, man/pl/groupadd.8, man/pl/groupdel.8, man/pl/groupmod.8, man/pl/useradd.8, man/pl/userdel.8, man/pl/usermod.8, etc/Attic/login.defs.hurd, etc/Attic/login.defs.linux, doc/Attic/ANNOUNCE, doc/Attic/CHANGES, doc/Attic/README, doc/Attic/README.linux, doc/Attic/README.pam, doc/WISHLIST, debian/Attic/login.copyright, debian/Attic/passwd.copyright, debian/Attic/secure-su.copyright, Attic/mkinstalldirs, configure.in, Makefile.am:
	*** empty log message ***

1999-08-27  Marek Michałkiewicz  <marekm@pld.org.pl>

	* doc/Attic/LSM, po/el.po, po/fr.po, po/pl.po, po/sv.po, debian/Attic/passwd.postinst, lib/Attic/dialchk.c, lib/Attic/getpass.c, lib/getdef.c, lib/pwauth.c, libmisc/limits.c, libmisc/rlogin.c, man/Attic/limits.5, man/Attic/newgrp.1, src/Attic/dpasswd.c, src/chage.c, src/gpasswd.c, src/login.c, src/logoutd.c, src/newgrp.c, src/passwd.c, src/sulogin.c, Attic/acconfig.h, configure.in, debian/Attic/Makefile.am, debian/Attic/changelog, debian/Attic/control.gnu, debian/Attic/control.linux, debian/Attic/login.postrm, debian/Attic/logoutd, debian/Attic/logoutd.init, debian/Attic/passwd.conffiles, debian/Attic/passwd.cron, debian/Attic/passwd.init, debian/Attic/passwd.postrm, debian/Attic/rules, doc/Attic/CHANGES, doc/Attic/README.mirrors, doc/WISHLIST, etc/Attic/login.defs.hurd, etc/Attic/login.defs.linux, etc/Makefile.am, lib/defines.h:
	*** empty log message ***

1999-07-09  Marek Michałkiewicz  <marekm@pld.org.pl>

	* configure.in, contrib/Makefile.am, debian/Attic/changelog, doc/Attic/CHANGES, doc/Attic/LSM, doc/WISHLIST, lib/Attic/strcasecmp.c, lib/prototypes.h, libmisc/Makefile.am, man/Attic/faillog.8, po/el.po, po/pl.po, src/Makefile.am, src/chfn.c, src/chsh.c, src/faillog.c, src/groupmod.c, src/grpconv.c, src/grpunconv.c, src/newgrp.c, src/passwd.c, src/vipw.c:
	*** empty log message ***

1999-06-07  Marek Michałkiewicz  <marekm@pld.org.pl>

	* redhat/Attic/shadow-utils.spec.in, src/Attic/dpasswd.c, src/Attic/mkpasswd.c, src/Makefile.am, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/groups.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/id.c, src/lastlog.c, src/login.c, src/logoutd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/usermod.c, contrib/Makefile.am, contrib/README, contrib/udbachk.tgz, debian/Attic/changelog, debian/Attic/rules, doc/Attic/CHANGES, doc/Attic/LSM, doc/Attic/README.linux, doc/Attic/README.mirrors, doc/README.platforms, doc/WISHLIST, lib/Attic/getpass.c, lib/Attic/rcsid.h, lib/Makefile.am, lib/fputsx.c, lib/pam_defs.h, lib/prototypes.h, libmisc/Attic/login_desrpc.c, libmisc/pam_pass.c, libmisc/utmp.c, man/Attic/login.1, po/el.po, po/pl.po, Attic/acconfig.h, configure.in:
	*** empty log message ***

1999-03-07  Marek Michałkiewicz  <marekm@pld.org.pl>

	* po/pl.po, po/el.po, doc/Attic/LSM, src/useradd.c, src/su.c, src/pwconv.c, src/pwck.c, src/passwd.c, src/newusers.c, src/newgrp.c, src/logoutd.c, src/login.c, src/grpconv.c, src/grpck.c, src/groupadd.c, src/gpasswd.c, src/Attic/dpasswd.c, src/chfn.c, src/chage.c, man/Attic/usermod.8, man/Attic/useradd.8, man/Attic/limits.5, man/Attic/chage.1, libmisc/valid.c, libmisc/sub.c, libmisc/strtoday.c, libmisc/setupenv.c, libmisc/obscure.c, libmisc/limits.c, libmisc/env.c, lib/Attic/snprintf.h, lib/getdef.c, lib/encrypt.c, lib/defines.h, etc/Attic/login.defs.linux, doc/WISHLIST, doc/Attic/README.nls, doc/Attic/README.pam, doc/README.platforms, doc/Attic/README.mirrors, doc/Attic/README.linux, doc/Makefile.am, doc/Attic/CHANGES, debian/Attic/tar.c, debian/Attic/rules, debian/Attic/logoutd, debian/Attic/control, debian/Attic/changelog, configure.in:
	*** empty log message ***

1998-12-28  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/usermod.c, src/userdel.c, src/useradd.c, src/sulogin.c, src/su.c, src/pwunconv.c, src/pwconv.c, src/pwck.c, src/passwd.c, src/newusers.c, src/newgrp.c, src/Attic/mkpasswd.c, src/logoutd.c, src/login.c, src/lastlog.c, src/id.c, src/grpunconv.c, src/grpconv.c, src/grpck.c, src/groups.c, src/groupmod.c, src/groupdel.c, src/groupadd.c, src/gpasswd.c, src/faillog.c, src/expiry.c, src/Attic/dpasswd.c, src/chsh.c, src/chpasswd.c, src/chfn.c, src/chage.c, po/Attic/doit, po/POTFILES.in, po/el.po, src/Makefile.am, man/Attic/usermod.8, man/Attic/userdel.8, man/Attic/useradd.8, man/Attic/sulogin.8, man/Attic/su.1, man/Attic/shadow.5, man/Attic/shadow.3, man/Attic/pwck.8, man/Attic/pwauth.8, man/Attic/pw_auth.3, man/Attic/porttime.5, man/Attic/passwd.5, man/Attic/passwd.1, man/Attic/newusers.8, man/Attic/newgrp.1, man/Attic/mkpasswd.8, man/Attic/logoutd.8, man/Attic/login.defs.5, man/Attic/login.1, man/Attic/lastlog.8, man/Attic/id.1, man/Attic/grpck.8, man/Attic/groups.1, man/Attic/groupmod.8, man/Attic/groupdel.8, man/Attic/groupadd.8, man/Attic/faillog.8, man/Attic/faillog.5, man/Attic/dpasswd.8, man/Attic/chsh.1, man/Attic/chpasswd.8, man/Attic/chfn.1, man/Attic/chage.1, libmisc/xmalloc.c, libmisc/sub.c, libmisc/Attic/suauth.c, libmisc/shell.c, libmisc/setupenv.c, libmisc/pam_pass.c, libmisc/obscure.c, libmisc/mail.c, libmisc/Attic/login_desrpc.c, libmisc/limits.c, libmisc/failure.c, libmisc/env.c, libmisc/console.c, libmisc/chowntty.c, libmisc/age.c, libmisc/addgrps.c, libmisc/Makefile.am, lib/Attic/strerror.c, lib/pwauth.c, lib/prototypes.h, lib/Attic/getpass.c, lib/getdef.c, lib/Attic/dialchk.c, lib/defines.h, lib/Makefile.am, doc/WISHLIST, doc/README.platforms, doc/Attic/README.mirrors, doc/Attic/README.linux, doc/Attic/README, doc/Attic/LSM, doc/Attic/CHANGES, debian/Attic/secure-su.copyright, debian/Attic/passwd.copyright, debian/Attic/login.copyright, debian/Attic/control, debian/Attic/changelog, configure.in, Attic/acconfig.h, Makefile.am:
	*** empty log message ***

1998-07-24  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/passwd.c, src/su.c, src/userdel.c, src/Makefile.am, src/chage.c, src/faillog.c, src/login.c, lib/Attic/tcfsio.c, lib/Attic/tcfsio.h, lib/pwauth.c, libmisc/chowntty.c, libmisc/pam_pass.c, libmisc/setugid.c, etc/pam.d/passwd, etc/pam.d/su, lib/Makefile.am, lib/commonio.c, lib/defines.h, lib/prototypes.h, doc/Attic/README.linux, doc/Attic/README.mirrors, doc/Makefile.am, doc/README.platforms, doc/WISHLIST, etc/Makefile.am, etc/pam.d/Makefile.am, doc/Attic/CHANGES, debian/Attic/changelog, configure.in, Attic/acconfig.h:
	*** empty log message ***

1998-06-26  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/passwd.c, src/usermod.c, man/Attic/faillog.8, man/Attic/pwconv.8, src/logoutd.c, lib/Attic/getpass.c, libmisc/copydir.c, doc/Attic/README.linux, doc/Attic/README.mirrors, doc/WISHLIST, lib/commonio.c, debian/Attic/changelog, doc/Attic/CHANGES, configure.in:
	*** empty log message ***

1998-05-29  Marek Michałkiewicz  <marekm@pld.org.pl>

	* man/Attic/lastlog.8, man/Attic/login.1, src/usermod.c, doc/Attic/CHANGES, doc/Attic/README.linux, etc/Attic/login.defs.linux, lib/defines.h, debian/Attic/changelog, debian/Attic/login.copyright, debian/Attic/login.postinst, debian/Attic/passwd.copyright, debian/Attic/rules, debian/Attic/secure-su.copyright, configure.in, contrib/Makefile.am, contrib/shadow-anonftp.patch:
	*** empty log message ***

1998-04-16  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/useradd.c, src/userdel.c, src/usermod.c, src/passwd.c, src/sulogin.c, src/groupdel.c, src/login.c, src/logoutd.c, src/newgrp.c, src/Attic/dpasswd.c, src/chage.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, redhat/Attic/shadow-970616-rh.patch, redhat/Attic/shadow-970616-utuser.patch, redhat/Attic/shadow-970616.login.defs, redhat/Attic/shadow-970616.useradd, redhat/Attic/shadow-utils-970616.spec, src/Makefile.am, libmisc/utmp.c, redhat/Attic/Makefile.am, redhat/Attic/README, redhat/Attic/shadow-970616-fix.patch, redhat/Attic/shadow-970616-glibc.patch, libmisc/Attic/login_desrpc.c, libmisc/limits.c, libmisc/log.c, libmisc/loginprompt.c, libmisc/obscure.c, libmisc/strtoday.c, libmisc/chkname.c, libmisc/chowndir.c, libmisc/copydir.c, libmisc/failure.c, lib/Attic/dialchk.c, lib/Attic/pwpack.c, lib/defines.h, lib/pwauth.c, doc/Attic/CHANGES, doc/Attic/README.linux, doc/WISHLIST, doc/cracklib26.diff, lib/commonio.c, Attic/acconfig.h, configure.in, debian/Attic/tar.c:
	*** empty log message ***

1998-04-02  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/groupmod.c, libmisc/sulog.c, lib/sgetspent.c, lib/sgetpwent.c, lib/sgetgrent.c, lib/Attic/putgrent.c, lib/gshadow.c, lib/getdef.c, lib/fputsx.c, lib/commonio.c, doc/Attic/README.linux, doc/Attic/README.mirrors, doc/Attic/CHANGES, configure.in:
	*** empty log message ***

1998-01-30  Marek Michałkiewicz  <marekm@pld.org.pl>

	* Attic/install-sh, src/userdel.c, src/usermod.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/useradd.c, src/newgrp.c, src/newusers.c, src/passwd.c, src/pwck.c, src/groupmod.c, src/login.c, src/logoutd.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/expiry.c, redhat/Attic/README, redhat/Attic/shadow-utils.spec.in, src/Makefile.am, src/chage.c, man/Attic/login.defs.5, man/Attic/useradd.8, man/Attic/usermod.8, redhat/Attic/Makefile.am, libmisc/pam_pass.c, libmisc/strtoday.c, libmisc/tz.c, libmisc/Attic/login_access.c, libmisc/Attic/login_desrpc.c, libmisc/Attic/login_krb.c, libmisc/obscure.c, libmisc/age.c, libmisc/env.c, libmisc/limits.c, lib/Attic/strstr.c, lib/shadow.c, lib/shadowio.c, lib/shadowio.h, lib/utent.c, lib/Attic/rmdir.c, lib/pwio.c, lib/pwio.h, lib/sgetspent.c, lib/sgroupio.c, lib/Attic/mkdir.c, lib/Attic/putgrent.c, lib/prototypes.h, lib/pwauth.c, lib/Attic/md5crypt.c, lib/Attic/getpass.c, lib/groupio.c, lib/gshadow.c, lib/lockpw.c, lib/commonio.h, lib/defines.h, lib/encrypt.c, lib/getdef.c, lib/getdef.h, doc/Attic/README.mirrors, doc/Attic/automake-1.0.diff, doc/WISHLIST, lib/Makefile.am, lib/commonio.c, doc/Attic/ANNOUNCE, doc/Attic/CHANGES, doc/Attic/README.linux, doc/Makefile.am, doc/README.limits, debian/Attic/Makefile.am, debian/Attic/changelog, debian/Attic/login.copyright, debian/Attic/rules, Attic/mkinstalldirs, Attic/shadow-utils.spec, contrib/README, Attic/acconfig.h, Attic/aclocal.m4, configure.in, Makefile.am:
	*** empty log message ***

1998-01-25  Marek Michałkiewicz  <marekm@pld.org.pl>

	* Attic/acconfig.h: *** empty log message ***

1997-12-14  Marek Michałkiewicz  <marekm@pld.org.pl>

	* doc/Attic/CHANGES, debian/Attic/checksums, debian/Attic/rules, debian/Attic/Makefile.am, src/Makefile.am, src/userdel.c, src/usermod.c, src/pwck.c, src/useradd.c, src/Attic/mkpasswd.c, src/gpasswd.c, src/grpck.c, src/login.c, src/chage.c, src/chfn.c, src/chsh.c, man/Attic/shadowconfig.8, man/Attic/vipw.8, old/Attic/Makefile.am, old/Attic/pwunconv.8, man/Attic/login.defs.5, man/Attic/pwconv.8, man/Attic/pwunconv.8, man/Makefile.am, libmisc/limits.c, libmisc/rlogin.c, lib/Attic/pwdbm.c, lib/Attic/pwent.c, lib/prototypes.h, lib/shadow.c, doc/Attic/LSM, doc/WISHLIST, etc/limits, lib/Attic/grent.c, Attic/shadow-utils.spec, debian/Attic/changelog, configure.in:
	*** empty log message ***

1997-12-08  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/userdel.c, src/usermod.c, src/Attic/shadowconfig.sh, src/su.c, src/sulogin.c, src/useradd.c, src/passwd.c, src/pwck.c, src/pwconv.c, src/pwunconv.c, src/newgrp.c, src/newusers.c, src/Attic/mkpasswd.c, src/logoutd.c, src/grpconv.c, src/grpunconv.c, src/id.c, src/lastlog.c, src/login.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/groups.c, src/grpck.c, src/Attic/dpasswd.c, src/chsh.c, src/expiry.c, src/faillog.c, src/gpasswd.c, src/Makefile.am, src/chage.c, src/chfn.c, src/chpasswd.c, old/Attic/Makefile.am, old/Attic/pwconv.8, old/Attic/vipw.8, man/Attic/limits.5, man/Attic/pwconv.8, man/Attic/shadowconfig.8, man/Attic/vipw.8, man/Makefile.am, libmisc/tz.c, libmisc/ulimit.c, libmisc/utmp.c, libmisc/valid.c, libmisc/xmalloc.c, libmisc/Attic/suauth.c, libmisc/strtoday.c, libmisc/sub.c, libmisc/sulog.c, libmisc/ttytype.c, libmisc/Attic/setup.c, libmisc/salt.c, libmisc/setugid.c, libmisc/setupenv.c, libmisc/shell.c, libmisc/rlogin.c, libmisc/motd.c, libmisc/myname.c, libmisc/obscure.c, libmisc/pam_pass.c, libmisc/pwd2spwd.c, libmisc/pwd_init.c, libmisc/Attic/login_access.c, libmisc/Attic/login_desrpc.c, libmisc/Attic/login_krb.c, libmisc/loginprompt.c, libmisc/mail.c, libmisc/hushed.c, libmisc/isexpired.c, libmisc/limits.c, libmisc/list.c, libmisc/log.c, libmisc/Attic/getdate.c, libmisc/failure.h, libmisc/fields.c, libmisc/getdate.h, libmisc/getdate.y, libmisc/entry.c, libmisc/env.c, libmisc/failure.c, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/console.c, libmisc/copydir.c, libmisc/Attic/chkshell.c, libmisc/age.c, libmisc/basename.c, libmisc/chkname.c, libmisc/chkname.h, lib/Attic/strdup.c, lib/Attic/strerror.c, lib/Attic/strstr.c, lib/utent.c, libmisc/Makefile.am, libmisc/addgrps.c, lib/Attic/spdbm.c, lib/Attic/sppack.c, lib/sgroupio.c, lib/shadow.c, lib/shadowio.c, lib/Attic/rename.c, lib/Attic/rmdir.c, lib/sgetgrent.c, lib/sgetpwent.c, lib/sgetspent.c, lib/Attic/rad64.c, lib/Attic/pwdbm.c, lib/Attic/pwent.c, lib/Attic/pwpack.c, lib/pwauth.c, lib/pwio.c, lib/Attic/mkdir.c, lib/Attic/putgrent.c, lib/Attic/putpwent.c, lib/Attic/putspent.c, lib/port.c, lib/prototypes.h, lib/Attic/gsdbm.c, lib/Attic/gspack.c, lib/Attic/md5.c, lib/Attic/md5crypt.c, lib/gshadow.c, lib/lockpw.c, lib/Attic/grdbm.c, lib/Attic/grent.c, lib/Attic/grpack.c, lib/groupio.c, lib/Attic/getpass.c, lib/Attic/dialup.c, lib/encrypt.c, lib/fputsx.c, lib/getdef.c, lib/Attic/dialchk.c, lib/Attic/dialchk.h, lib/commonio.c, lib/commonio.h, lib/defines.h, doc/Attic/automake-1.0.diff, etc/Attic/login.defs.linux, etc/limits, lib/Makefile.am, doc/Attic/CHANGES, doc/Attic/README.linux, doc/Attic/README.mirrors, doc/WISHLIST, debian/Attic/login.conffiles, debian/Attic/login.postinst, debian/Attic/passwd.postinst, debian/Attic/porttime, debian/Attic/rules, debian/Attic/secure-su.README, debian/Attic/securetty, contrib/pwdauth.c, debian/Attic/changelog, debian/Attic/control, Attic/acconfig.h, Attic/aclocal.m4, Attic/shadow-utils.spec, configure.in, Makefile.am:
	*** empty log message ***

1997-10-01  Marek Michałkiewicz  <marekm@pld.org.pl>

	* debian/Attic/changelog, src/chpasswd.c, libmisc/Attic/login_access.c, lib/commonio.h, lib/sgroupio.c, lib/shadowio.c, etc/Attic/login.defs.linux, doc/Attic/CHANGES, doc/Attic/LSM, doc/Attic/README.mirrors, doc/WISHLIST, Attic/shadow-utils.spec:
	*** empty log message ***

1997-09-30  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/useradd.c, src/userdel.c, src/usermod.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/newusers.c, src/passwd.c, src/pwck.c, src/grpck.c, src/grpconv.c, src/grpunconv.c, src/login.c, src/groupmod.c, src/Attic/dpasswd.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/Makefile.am, old/Attic/install-sh, old/Attic/pwconv-old.8, old/Attic/pwunconv-old.8, old/Attic/Makefile.am, man/Attic/pwconv.8, man/Attic/pwunconv.8, libmisc/setugid.c, libmisc/shell.c, libmisc/utmp.c, libmisc/mail.c, libmisc/obscure.c, libmisc/pam_pass.c, libmisc/salt.c, libmisc/Attic/login_access.c, libmisc/isexpired.c, libmisc/env.c, libmisc/fields.c, libmisc/addgrps.c, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/console.c, libmisc/copydir.c, lib/Attic/strerror.c, lib/Attic/snprintf.c, lib/Attic/snprintf.h, lib/sgroupio.c, lib/sgroupio.h, lib/shadowio.c, lib/shadowio.h, lib/Attic/putgrent.c, lib/Attic/pwent.c, lib/pwauth.c, lib/Attic/getpass.c, lib/Attic/grent.c, lib/prototypes.h, lib/commonio.c, lib/commonio.h, lib/defines.h, lib/encrypt.c, lib/getdef.c, lib/Makefile.am, etc/Attic/login.defs.linux, doc/Attic/README.linux, doc/Attic/README.mirrors, doc/WISHLIST, doc/Attic/CHANGES, doc/Attic/LSM, doc/Makefile.am, debian/Attic/rules, debian/Attic/changelog, contrib/adduser.c, configure.in, Attic/acconfig.h:
	*** empty log message ***

1997-09-29  Marek Michałkiewicz  <marekm@pld.org.pl>

	* man/Attic/chpasswd.8, man/Attic/pwconv.8, man/Attic/pwunconv.8, man/Attic/su.1, man/Makefile.am:
	*** empty log message ***

1997-06-16  Marek Michałkiewicz  <marekm@pld.org.pl>

	* doc/Attic/console.c.spec, doc/Makefile.am, doc/WISHLIST, doc/console.c.spec.txt, doc/Attic/CHANGES, debian/Attic/changelog, src/Attic/shadowconfig.sh, redhat/Attic/Makefile.am, redhat/Attic/README, redhat/Attic/shadow-970502-config.patch, redhat/Attic/shadow-utils.spec, doc/Attic/README.mirrors, doc/Attic/README.shadow-paper, doc/Attic/README.linux, debian/Attic/login.copyright, debian/Attic/passwd.copyright, debian/Attic/secure-su.copyright, Attic/shadow-utils.spec, Makefile.am, configure.in:
	*** empty log message ***

1997-06-01  Marek Michałkiewicz  <marekm@pld.org.pl>

	* debian/Attic/changelog, src/userdel.c, src/usermod.c, src/pwck.c, src/pwunconv.c, src/useradd.c, src/grpunconv.c, src/newusers.c, src/passwd.c, src/expiry.c, src/grpconv.c, src/chage.c, src/chfn.c, src/chpasswd.c, src/chsh.c, src/Makefile.am, redhat/Attic/Makefile.am, redhat/Attic/README, redhat/Attic/shadow-970502-config.patch, redhat/Attic/shadow-utils.spec, libmisc/mail.c, libmisc/Attic/login_desrpc.c, lib/pwio.h, lib/shadowio.c, lib/shadowio.h, lib/prototypes.h, lib/pwauth.c, lib/pwio.c, lib/commonio.c, lib/defines.h, doc/Attic/README.linux, doc/WISHLIST, doc/Attic/CHANGES, doc/Attic/INSTALL, Attic/install-sh, Attic/mkinstalldirs, Attic/acconfig.h, Makefile.am, configure.in:
	*** empty log message ***

1997-05-02  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/Attic/shadowconfig.sh, src/Makefile.am, man/Makefile.am, libmisc/mail.c, libmisc/salt.c, lib/sgroupio.c, lib/shadowio.c, lib/groupio.c, lib/pwio.c, etc/Makefile.am, doc/WISHLIST, doc/Attic/CHANGES, debian/Attic/shadowconfig, debian/Attic/Makefile.am, debian/Attic/changelog, debian/Attic/control, debian/Attic/rules, configure.in, Attic/configure, shlib/Attic/Makefile.in, man/Attic/Makefile.in, libmisc/Attic/Makefile.in, lib/Attic/Makefile.in, etc/Attic/Makefile.in, doc/Attic/Makefile.in, contrib/Attic/Makefile.in, Attic/Makefile.in, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/shadow.5, man/Attic/su.1, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/pwunconv.8, man/Attic/shadow.3, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/limits.5, man/Attic/login.1, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, libmisc/valid.c, libmisc/sulog.c, libmisc/ttytype.c, libmisc/tz.c, libmisc/utmp.c, libmisc/Attic/setup.c, libmisc/setupenv.c, libmisc/shell.c, libmisc/strtoday.c, libmisc/sub.c, libmisc/setugid.c, libmisc/obscure.c, libmisc/pwd2spwd.c, libmisc/rlogin.c, libmisc/Attic/login_access.c, libmisc/loginprompt.c, libmisc/motd.c, libmisc/hushed.c, libmisc/isexpired.c, libmisc/limits.c, libmisc/list.c, libmisc/log.c, libmisc/copydir.c, libmisc/entry.c, libmisc/env.c, libmisc/failure.c, libmisc/fields.c, libmisc/age.c, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/console.c, lib/utent.c, lib/Attic/shadow_.h, lib/Attic/spdbm.c, lib/Attic/sppack.c, lib/Attic/strstr.c, lib/shadow.c, lib/sgetpwent.c, lib/sgetspent.c, lib/Attic/pwpack.c, lib/Attic/rad64.c, lib/Attic/rename.c, lib/Attic/rmdir.c, lib/sgetgrent.c, lib/Attic/pwdbm.c, lib/Attic/pwent.c, lib/pwauth.h, lib/Attic/putgrent.c, lib/Attic/putpwent.c, lib/Attic/putspent.c, lib/port.h, lib/pwauth.c, lib/Attic/lastlog_.h, lib/Attic/mkdir.c, lib/lockpw.c, lib/port.c, lib/Attic/grpack.c, lib/Attic/gsdbm.c, lib/Attic/gspack.c, lib/gshadow.c, lib/gshadow_.h, lib/Attic/getpass.c, lib/Attic/grdbm.c, lib/Attic/grent.c, lib/getdef.c, lib/Attic/dialup.h, lib/encrypt.c, lib/faillog.h, lib/fputsx.c, lib/Attic/dialchk.c, lib/Attic/dialup.c, lib/commonio.c, lib/defines.h, etc/Attic/login.defs.linux, etc/login.defs, doc/Attic/README.linux, doc/Attic/LICENSE, doc/Attic/README, doc/Makefile.am, doc/HOWTO, doc/Attic/ANNOUNCE, debian/Attic/secure-su.README, debian/Attic/secure-su.conffiles, debian/Attic/secure-su.copyright, debian/Attic/secure-su.postrm, debian/Attic/secure-su.preinst, debian/Attic/securetty, debian/Attic/passwd.conffiles, debian/Attic/passwd.copyright, debian/Attic/passwd.postinst, debian/Attic/porttime, debian/Attic/login.conffiles, debian/Attic/login.copyright, debian/Attic/login.postinst, debian/Attic/login.postrm, debian/Attic/login.preinst, debian/Attic/login.prerm, debian/Attic/logoutd, Attic/acconfig.h, Attic/config.h.in, Makefile.am, old/Attic/Makefile.in, old/Attic/scologin.c, old/Attic/orig-config.h, old/Attic/pwconv-old.c, old/Attic/pwd.h.m4, old/Attic/pwunconv-old.c, old/Attic/config.h.sun4, old/Attic/config.h.svr4, old/Attic/config.h.xenix, old/Attic/config.h.linux, old/Attic/Makefile.sun4, old/Attic/Makefile.svr4, old/Attic/Makefile.xenix, old/Attic/Makefile.am, old/Attic/Makefile.linux, src/Attic/Makefile.in, src/pwconv.c, src/userdel.c, src/usermod.c, src/useradd.c, src/su.c, src/sulogin.c, src/Attic/pwconv5.c, src/Attic/scologin.c, src/pwck.c, src/pwunconv.c, src/Attic/patchlevel.h, src/newusers.c, src/passwd.c, src/Attic/mkpasswd.c, src/logoutd.c, src/newgrp.c, src/grpunconv.c, src/id.c, src/lastlog.c, src/login.c, src/grpck.c, src/grpconv.c, src/groupdel.c, src/groupmod.c, src/groups.c, src/faillog.c, src/gpasswd.c, src/groupadd.c, src/Attic/dpasswd.c, src/chsh.c, src/expiry.c, src/chfn.c, src/chpasswd.c, src/chage.c:
	*** empty log message ***

1997-02-11  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/groupadd.c, src/useradd.c, libmisc/setupenv.c, lib/sgroupio.c, lib/shadowio.c, lib/groupio.c, lib/pwio.c, lib/Makefile.am, lib/commonio.c, doc/Attic/CHANGES, doc/HOWTO, README, configure.in:
	*** empty log message ***

1997-01-08  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/groupadd.c, lib/commonio.c, README, src/useradd.c, src/userdel.c, src/usermod.c, src/Attic/pwconv5.c, src/pwconv.c, src/su.c, src/passwd.c, src/pwck.c, src/grpunconv.c, src/login.c, src/logoutd.c, src/newgrp.c, src/grpck.c, src/grpconv.c, src/faillog.c, src/gpasswd.c, src/groupmod.c, src/chage.c, src/chfn.c, src/chsh.c, src/expiry.c, libmisc/ttytype.c, libmisc/utmp.c, libmisc/Attic/suauth.c, libmisc/strtoday.c, libmisc/shell.c, libmisc/failure.c, libmisc/log.c, libmisc/loginprompt.c, libmisc/myname.c, lib/shadowio.h, libmisc/Makefile.am, libmisc/chkname.c, lib/sgetpwent.c, lib/sgroupio.c, lib/sgroupio.h, lib/shadow.c, lib/shadowio.c, lib/Attic/pwent.c, lib/pwio.c, lib/pwio.h, lib/Attic/putgrent.c, lib/groupio.c, lib/groupio.h, lib/gshadow.c, lib/prototypes.h, lib/defines.h, lib/faillog.h, lib/getdef.c, doc/Attic/README.linux, doc/WISHLIST, etc/Attic/login.defs.linux, lib/Makefile.am, doc/Attic/CHANGES, doc/HOWTO, Attic/acconfig.h, configure.in:
	*** empty log message ***

1996-10-27  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/usermod.c, src/grpck.c, src/useradd.c, src/userdel.c, src/chsh.c, src/gpasswd.c, libmisc/isexpired.c, libmisc/limits.c, lib/sgroupio.c, lib/shadowio.c, lib/commonio.c, lib/groupio.c, lib/pwio.c, doc/Attic/CHANGES, doc/Attic/README.linux, doc/WISHLIST, Attic/configure, configure.in:
	*** empty log message ***

1996-09-25  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/usermod.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/su.c, src/Attic/pwconv5.c, src/newgrp.c, src/passwd.c, src/pwck.c, src/grpck.c, src/login.c, src/logoutd.c, src/gpasswd.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/chfn.c, src/chsh.c, src/chage.c, libmisc/strtoday.c, libmisc/env.c, libmisc/fields.c, libmisc/isexpired.c, libmisc/setupenv.c, lib/Attic/rad64.c, lib/getdef.c, lib/prototypes.h, lib/defines.h, etc/Attic/login.defs.linux, doc/Attic/README.linux, doc/WISHLIST, doc/Attic/CHANGES, Attic/configure, configure.in, Attic/config.h.in:
	*** empty log message ***

1996-09-20  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/usermod.c, src/su.c, src/sulogin.c, src/useradd.c, src/userdel.c, src/newusers.c, src/passwd.c, src/pwck.c, src/grpck.c, src/login.c, src/logoutd.c, src/newgrp.c, src/groupdel.c, src/groupmod.c, src/Attic/dpasswd.c, src/chsh.c, src/gpasswd.c, src/groupadd.c, src/Attic/Makefile.in, src/chage.c, src/chfn.c, src/Makefile.am, libmisc/Attic/suauth.c, libmisc/shell.c, libmisc/sub.c, libmisc/ttytype.c, libmisc/env.c, libmisc/setugid.c, libmisc/setupenv.c, libmisc/chowntty.c, lib/prototypes.h, lib/getdef.c, doc/Attic/CHANGES, doc/WISHLIST:
	*** empty log message ***

1996-09-10  Marek Michałkiewicz  <marekm@pld.org.pl>

	* src/su.c, src/sulogin.c, src/usermod.c, src/logoutd.c, src/newgrp.c, src/passwd.c, src/pwconv.c, src/Attic/Makefile.in, src/chfn.c, src/chsh.c, src/grpunconv.c, src/login.c, src/Makefile.am, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/pwunconv.8, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/login.access.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/faillog.5, libmisc/isexpired.c, libmisc/obscure.c, libmisc/setupenv.c, libmisc/utmp.c, libmisc/age.c, lib/Attic/getpass.c, lib/defines.h, lib/getdef.c, etc/Attic/login.defs.linux, etc/limits, etc/login.access, doc/Attic/CHANGES, doc/Attic/README.linux, doc/WISHLIST, contrib/Attic/Makefile.in, contrib/Makefile.am, Attic/configure, configure.in:
	*** empty log message ***

1996-08-10  Marek Michałkiewicz  <marekm@pld.org.pl>

	* old/Attic/Makefile.am, old/Attic/Makefile.linux, old/Attic/Makefile.sun4, old/Attic/Makefile.svr4, old/Attic/Makefile.xenix, old/Attic/config.h.linux, old/Attic/config.h.sun4, old/Attic/config.h.svr4, old/Attic/config.h.xenix, old/Attic/install-sh, old/Attic/orig-config.h, old/Attic/pwd.h.m4, shlib/Attic/Makefile.am, shlib/Attic/Makefile.in, shlib/Attic/Makefile.in.saved:
	New file.

	* contrib/adduser-old.c, contrib/adduser.sh, contrib/adduser2.sh, contrib/atudel:
	960810 - first version under cvs

	* contrib/Attic/Makefile.in, contrib/Makefile.am, contrib/README, contrib/adduser.c, contrib/pwdauth.c, doc/Attic/ANNOUNCE, doc/Attic/CHANGES, doc/Attic/LICENSE, doc/Attic/Makefile.in, doc/Attic/README, doc/Attic/README.linux, doc/Attic/README.sun4, doc/Attic/automake-1.0.diff, doc/Attic/console.c.spec, doc/HOWTO, doc/Makefile.am, doc/README.limits, doc/WISHLIST, etc/Attic/Makefile.in, etc/Attic/login.defs.linux, etc/Makefile.am, etc/login.access, etc/login.defs, old/Attic/Makefile.in, src/Attic/patchlevel.h, src/Attic/pwconv5.c, src/Attic/scologin.c, src/chage.c, src/chfn.c, src/chsh.c, src/expiry.c, src/gpasswd.c, src/groups.c, src/grpconv.c, src/id.c, src/login.c, src/newgrp.c, src/passwd.c, src/pwconv.c, src/pwunconv.c, src/su.c, src/sulogin.c, lib/Attic/dialup.h, lib/Attic/grdbm.c, lib/Attic/grent.c, lib/Attic/grpack.c, lib/Attic/gsdbm.c, lib/Attic/gspack.c, lib/Attic/lastlog_.h, lib/Attic/md5.c, lib/Attic/md5.h, lib/Attic/md5crypt.c, lib/Attic/mkdir.c, lib/Attic/putgrent.c, lib/Attic/putpwent.c, lib/Attic/putspent.c, lib/Attic/pwdbm.c, lib/Attic/pwent.c, lib/Attic/pwpack.c, lib/Attic/rcsid.h, lib/Attic/rename.c, lib/Attic/rmdir.c, lib/Attic/shadow_.h, lib/Attic/spdbm.c, lib/Attic/sppack.c, lib/Attic/strdup.c, lib/Attic/strstr.c, lib/defines.h, lib/faillog.h, lib/getdef.h, lib/groupio.h, lib/gshadow_.h, lib/port.h, lib/prototypes.h, lib/pwauth.h, lib/pwio.h, lib/sgetgrent.c, lib/sgetpwent.c, lib/sgetspent.c, lib/sgroupio.h, lib/shadow.c, lib/shadowio.c, lib/shadowio.h, lib/utent.c, src/Attic/Makefile.in, src/Attic/dpasswd.c, src/Attic/mkpasswd.c, src/Makefile.am, src/chpasswd.c, src/faillog.c, src/groupadd.c, src/groupdel.c, src/groupmod.c, src/grpck.c, src/lastlog.c, src/logoutd.c, src/newusers.c, src/pwck.c, src/useradd.c, src/userdel.c, src/usermod.c, lib/Attic/Makefile.in, lib/Attic/dialchk.c, lib/Attic/dialup.c, lib/Attic/getpass.c, lib/Attic/rad64.c, lib/Makefile.am, lib/commonio.c, lib/encrypt.c, lib/fputsx.c, lib/getdef.c, lib/groupio.c, lib/gshadow.c, lib/lockpw.c, lib/port.c, lib/pwauth.c, lib/pwio.c, lib/sgroupio.c, libmisc/Attic/login_access.c, libmisc/Attic/login_desrpc.c, libmisc/Attic/login_krb.c, libmisc/Attic/setup.c, libmisc/Attic/suauth.c, libmisc/age.c, libmisc/basename.c, libmisc/chkname.c, libmisc/chowndir.c, libmisc/chowntty.c, libmisc/console.c, libmisc/copydir.c, libmisc/entry.c, libmisc/env.c, libmisc/failure.c, libmisc/fields.c, libmisc/hushed.c, libmisc/isexpired.c, libmisc/limits.c, libmisc/list.c, libmisc/log.c, libmisc/loginprompt.c, libmisc/mail.c, libmisc/motd.c, libmisc/obscure.c, libmisc/pwd2spwd.c, libmisc/rlogin.c, libmisc/salt.c, libmisc/setugid.c, libmisc/setupenv.c, libmisc/shell.c, libmisc/strtoday.c, libmisc/sub.c, libmisc/sulog.c, libmisc/ttytype.c, libmisc/tz.c, libmisc/ulimit.c, libmisc/utmp.c, libmisc/valid.c, libmisc/xmalloc.c, man/Attic/Makefile.in, man/Attic/chage.1, man/Attic/chfn.1, man/Attic/chpasswd.8, man/Attic/chsh.1, man/Attic/dpasswd.8, man/Attic/faillog.5, man/Attic/faillog.8, man/Attic/gpasswd.1, man/Attic/groupadd.8, man/Attic/groupdel.8, man/Attic/groupmod.8, man/Attic/groups.1, man/Attic/grpck.8, man/Attic/id.1, man/Attic/lastlog.8, man/Attic/login.1, man/Attic/login.access.5, man/Attic/login.defs.5, man/Attic/logoutd.8, man/Attic/mkpasswd.8, man/Attic/newgrp.1, man/Attic/newusers.8, man/Attic/passwd.1, man/Attic/passwd.5, man/Attic/porttime.5, man/Attic/pw_auth.3, man/Attic/pwauth.8, man/Attic/pwck.8, man/Attic/pwconv.8, man/Attic/pwunconv.8, man/Attic/shadow.3, man/Attic/shadow.5, man/Attic/su.1, man/Attic/suauth.5, man/Attic/sulogin.8, man/Attic/useradd.8, man/Attic/userdel.8, man/Attic/usermod.8, man/Makefile.am, Attic/Makefile.in, Attic/acconfig.h, Attic/aclocal.m4, Attic/config.h.in, Attic/configure, Attic/install-sh, Attic/mkinstalldirs, Attic/stamp-h.in, Makefile.am, README, configure.in, libmisc/Attic/Makefile.in, libmisc/Makefile.am, libmisc/addgrps.c:
	New file.

