.\" ** You probably do not want to edit this file directly **
.\" It was generated using the DocBook XSL Stylesheets (version 1.69.1).
.\" Instead of manually editing it, you probably should edit the DocBook XML
.\" source for it and then use the DocBook XSL Stylesheets to regenerate it.
.TH "useradd" "8" "03/11/2006" "Команды управления системой" "Команды управления системой"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "НАЗВАНИЕ"
useradd \- регистрирует нового пользователя или изменяет информацию по умолчанию о новых пользователях
.SH "СИНТАКСИС"
.HP 8
\fBuseradd\fR [\fIпараметры\fR] \fILOGIN\fR
.HP 8
\fBuseradd\fR \-D
.HP 8
\fBuseradd\fR \-D [\fIпараметры\fR]
.SH "ОПИСАНИЕ"
.PP
При запуске без параметра
\fB\-D\fR
команда
\fBuseradd\fR
создаёт новую учётную запись пользователя, используя значения из командной строки и системные значения по умолчанию. В зависимости от параметров командной строки, команда useradd обновляет системные файлы, а также может создать домашний каталог нового пользователя и скопировать файлы настроек.
.SH "ПАРАМЕТРЫ"
.PP
Возможные параметры команды
\fBuseradd\fR
:
.TP
\fB\-c\fR, \fB\-\-comment\fR \fIКОММЕНТАРИЙ\fR
Любая текстовая строка. Обычно, здесь коротко описывается учётная запись, и в настоящее время используется как поле для имени и фамилии пользователя.
.TP
\fB\-b\fR, \fB\-\-base\-dir\fR \fIБАЗОВЫЙ_КАТАЛОГ\fR
Базовый системный каталог по умолчанию, если другой каталог не указан с помощью параметра
\fB\-d\fR.
\fIБАЗОВЫЙ_КАТАЛОГ\fR
объединяется с именем учётной записи для определения домашнего каталога. Если не используется параметр
\fB\-m\fR
, то
\fIБАЗОВЫЙ_КАТАЛОГ\fR
должен существовать.
.TP
\fB\-d\fR, \fB\-\-home\fR \fIДОМАШНИЙ_КАТАЛОГ\fR
Для создаваемого пользователя будет указан каталог
\fIДОМАШНИЙ_КАТАЛОГ\fR
в качестве начального каталога. По умолчанию, это значение получается объединением
\fILOGIN\fR
с
\fIБАЗОВЫЙ_КАТАЛОГ\fR
и используется как имя регистрационного каталога. Каталог
\fIДОМАШНИЙ_КАТАЛОГ\fR
необязательно должен существовать и не будет создан, если его нет.
.TP
\fB\-e\fR, \fB\-\-expiredate\fR \fIEXPIRE_DATE\fR
Дата, когда учётная запись пользователя будет заблокирована. Дата задаётся в формате
\fIГГГГ\-ММ\-ДД\fR.
.TP
\fB\-f\fR, \fB\-\-inactive\fR \fIINACTIVE\fR
Число дней, которые должны пройти после устаревания пароля, чтобы учётная запись заблокировалась навсегда. Если указано значение 0, то учётная запись блокируется сразу после устаревания пароля, а при значении \-1 данная возможность не используется. По умолчанию используется значение \-1.
.TP
\fB\-g\fR, \fB\-\-gid\fR \fIGROUP\fR
Имя или числовой идентификатор новой начальной группы пользователя. Группа с таким именем должна существовать. Идентификатор группы должен указывать на уже существующую группу. Идентификатор группы по умолчанию равен 1 или значению указанному в файле
\fI/etc/default/useradd\fR.
.TP
\fB\-G\fR, \fB\-\-groups\fR \fIГРУППА1\fR[\fI,ГРУППА2,...\fR[\fI,ГРУППАN\fR]]]
Список дополнительных групп, в которых числится пользователь. Перечисление групп осуществляется через запятую, без промежуточных пробелов. На указанные группы действуют ограничения, указанные в параметре
\fB\-g\fR. По умолчанию пользователь входит только в начальную группу.
.TP
\fB\-h\fR, \fB\-\-help\fR
Показать краткую справку и закончить работу.
.TP
\fB\-m\fR, \fB\-\-create\-home\fR
Если домашнего каталога пользователя не существует, то он будет создан. Файлы из каталога
\fISKEL_DIR\fR
будут скопированы в домашний каталог, если он указан в параметре
\fB\-k\fR
, иначе будут использованы файлы из каталога
\fI/etc/skel\fR. Все каталоги, находящиеся в
\fISKEL_DIR\fR
или
\fI/etc/skel\fR
будут также созданы в домашнем каталоге пользователя. Параметр
\fB\-k\fR
можно использовать только вместе с
\fB\-m\fR. По умолчанию, домашний каталог не создаётся и файлы не копируются.
.TP
\fB\-K\fR, \fB\-\-key\fR \fIКЛЮЧ\fR=\fIЗНАЧЕНИЕ\fR
Используется для изменения значений по умолчанию, хранимых в файле /etc/login.defs (UID_MIN, UID_MAX, UMASK, PASS_MAX_DAYS и других).

Пример:
\fB\-K \fR\fIPASS_MAX_DAYS\fR=\fI\-1\fR
можно использовать при создании системной учётной записи, чтобы выключить устаревание пароля, даже если системная учётная запись вообще не имеет пароля. Можно указывать параметр
\fB\-K\fR
несколько раз, например:
\fB\-K \fR\fIUID_MIN\fR=\fI100\fR\fB \-K \fR\fIUID_MAX\fR=\fI499\fR
.sp
Замечание:
\fB\-K \fR\fIUID_MIN\fR=\fI10\fR,
\fIUID_MAX\fR=\fI499\fR
такая форма пока не поддерживается.
.TP
\fB\-o\fR, \fB\-\-non\-unique\fR
Позволяет создать учётную запись с уже имеющимся (не уникальным) UID.
.TP
\fB\-p\fR, \fB\-\-password\fR \fIПАРОЛЬ\fR
Шифрованное значение пароля, которое возвращает функция
\fBcrypt\fR(3). По умолчанию учётная запись заблокирована.
.TP
\fB\-s\fR, \fB\-\-shell\fR \fIОБОЛОЧКА\fR
Имя регистрационной оболочки пользователя. Если задать пустое значение, то будет использована регистрационная оболочка по умолчанию.
.TP
\fB\-u\fR, \fB\-\-uid\fR \fIUID\fR
Числовое значение идентификатора пользователя (ID). Оно должно быть уникальным, если не используется параметр
\fB\-o\fR. Значение должно быть неотрицательным. По умолчанию используется наименьшее значение ID большее 999 и большее любого другого пользовательского значения. Значения от 0 до 999 обычно зарезервированы для системных учётных записей.
.SS "Изменение значений по умолчанию"
.PP
При запуске программы с параметром
\fB\-D\fR
,
\fBuseradd\fR
показывает текущие значения по умолчанию, или изменяет их, если указаны дополнительные параметры в командной строке. Допустимые параметры:
.TP
\fB\-b\fR \fIДОМАШНИЙ_КАТАЛОГ\fR
Начальная часть пути нового домашнего каталога пользователя. Имя пользователя будет добавлено в конец
\fIДОМАШНИЙ_КАТАЛОГ\fR
для создания имени нового каталога, если не задан параметр
\fB\-d\fR
при создании новой учётной записи.
.TP
\fB\-e\fR \fIEXPIRE_DATE\fR
Дата, когда учётная запись пользователя заблокирована.
.TP
\fB\-f\fR \fIINACTIVE\fR
Число дней, которые должны пройти после устаревания пароля, перед тем как учётная запись будет заблокирована.
.TP
\fB\-g\fR, \fB\-\-gid\fR \fIGROUP\fR
Имя или числовой идентификатор новой начальной группы пользователя. Группа с таким именем должна существовать и числовой идентификатор группы должен указывать на существующую группу.
.TP
\fB\-s\fR, \fB\-\-shell\fR \fIОБОЛОЧКА\fR
Имя новой регистрационной оболочки пользователя. Данная программа будет использована для всех новых пользовательских учётных записей.
.PP
Если программа запущена без параметров,
\fBuseradd\fR
покажет текущие значения по умолчанию.
.SH "ЗАМЕЧАНИЯ"
.PP
Системный администратор сам решает, какие файлы нужно положить в каталог
\fI/etc/skel/\fR
, чтобы они были доступы для новых пользователей.
.SH "ПРЕДОСТЕРЕЖЕНИЯ"
.PP
Нельзя добавить пользователя в NIS группу. Это необходимо делать на NIS сервере.
.PP
Также, если имя пользователя уже существует во внешней базе данных такой как NIS, то
\fBuseradd\fR
не станет создавать учётную запись пользователя.
.PP
Имена пользователей должны начинаться со строчной буквы или символа подчёркивания, и должны состоять из строчных букв, символов подчёркивания, тире и знака доллара. Это можно описать регулярным выражением: [a\-z_][a\-z0\-9_\-]*[$]
.SH "ФАЙЛЫ"
.TP
\fI/etc/passwd\fR
содержит информацию о пользователях
.TP
\fI/etc/shadow\fR
содержит защищаемую информацию о пользователях
.TP
\fI/etc/group\fR
содержит информацию о группах
.TP
\fI/etc/default/useradd\fR
содержит информацию о значениях по умолчанию
.TP
\fI/etc/skel/\fR
каталог, содержащий пользовательские файлы по умолчанию
.TP
\fI/etc/login.defs\fR
содержит конфигурацию подсистемы теневых паролей
.SH "ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ"
.PP
\fBuseradd\fR
завершая работу, возвращает следующие значения:
.TP
\fI0\fR
успешное выполнение
.TP
\fI1\fR
не удалось изменить файл паролей
.TP
\fI2\fR
ошибка в параметрах команды
.TP
\fI3\fR
недопустимое значение параметра
.TP
\fI4\fR
такой UID уже существует (и не задан параметр
\fB\-o\fR)
.TP
\fI6\fR
указанная группа не существует
.TP
\fI9\fR
имя пользователя уже существует
.TP
\fI10\fR
не удалось изменить файл групп
.TP
\fI12\fR
не удалось создать домашний каталог
.TP
\fI13\fR
не удалось создать почтовый ящик
.SH "СМОТРИТЕ ТАКЖЕ"
.PP
\fBchfn\fR(1),
\fBchsh\fR(1),
\fBpasswd\fR(1),
\fBcrypt\fR(3),
\fBgroupadd\fR(8),
\fBgroupdel\fR(8),
\fBgroupmod\fR(8),
\fBlogin.defs\fR(5),
\fBuserdel\fR(8),
\fBusermod\fR(8).
